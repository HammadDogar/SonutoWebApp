(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"160d":function(t,e,o){"use strict";var i=o("5cd8"),s=o.n(i);s.a},"5cd8":function(t,e,o){},f2d6:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"flex"},[o("div",{staticClass:"q-gutter-y-md",staticStyle:{width:"100%"}},[o("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[o("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.blogCategory,(function(e){return o("q-tab",{key:e.id,attrs:{"no-caps":"",name:e.Name,label:e.Name},on:{click:function(o){return t.goToblogs(e.Name)}}})})),1),o("q-separator"),t.blog.CoverPhoto?o("q-img",{attrs:{src:t.getImageurl(t.blog.CoverPhoto.url)},on:{click:function(e){return t.oneClick(t.blog)}}}):t._e(),o("q-card-section",[o("div",{staticClass:"text-h5 q-mt-sm q-mb-xs blog-title"},[t._v(t._s(t.blog.Title))]),o("div",{staticClass:"text-caption blog-description",domProps:{innerHTML:t._s(t.blog.Content)}})]),o("q-card-actions",{staticClass:"icons",attrs:{align:"between"}},[o("q-btn",{attrs:{flat:"",icon:t.likeColour(),size:"10px","no-caps":""},on:{click:function(e){t.setLikeForBlog(parseInt(t.blog.id))}}},[o("span",{staticClass:"action"},[t._v("Like")])]),o("q-btn",{attrs:{flat:"",icon:"app:comment",size:"10px","no-caps":""},on:{click:function(e){return t.blogComment(t.blog.id)}}},[o("span",{staticClass:"action"},[t._v("Comment")])]),o("q-btn",{attrs:{flat:"",icon:"app:share",size:"10px","no-caps":""}},[o("span",{staticClass:"action"},[t._v("Share")])])],1)],1)],1),o("q-card",{staticClass:"my-card",staticStyle:{width:"100%"},attrs:{flat:"",bordered:""}},[o("q-card-section",[o("div",{staticClass:"text-h5 q-mt-sm q-mb-xs"},[t._v("Comment")])]),o("q-card-section",{staticClass:"comment-input",staticStyle:{width:"100%"}},[o("q-item-section",[o("q-input",{attrs:{rounded:"",outlined:"",placeholder:"Write a Message",dense:t.dense},scopedSlots:t._u([{key:"before",fn:function(){return[null!=t.userprofileDetail&&null!=t.userprofileDetail.avatar?o("q-avatar",{attrs:{size:"34px"}},[o("img",{attrs:{src:""+t.userprofileDetail.avatar.url}})]):o("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[t._v("\n              "+t._s(t.userDetails.userprofile.firstname.charAt(0))+"\n\n            ")])]},proxy:!0},{key:"after",fn:function(){return[o("q-btn",{staticStyle:{color:"#6B7BC7"},attrs:{round:"",dense:"",flat:"",icon:"send",disable:0==t.commentText.length},on:{click:function(e){return t.postBlogComment()}}})]},proxy:!0}]),model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1)],1),t._l(t.blog.blog_comments,(function(e){return o("q-intersection",{key:e.id,attrs:{transition:"scale",once:""}},[o("q-card-section",{attrs:{horizontal:""}},[!1!==t.edit||null!==t.selectedComment&&t.selectedComment.id!==e.id?t._e():o("q-card-section",[o("q-item-section",{staticClass:"avatar-section",attrs:{avatar:""}},[null!=e.userprofile.avatar?o("q-avatar",{attrs:{size:"34px"}},[o("img",{attrs:{src:""+e.userprofile.avatar.url}})]):o("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[t._v("\n              "+t._s(e.userprofile.firstname.charAt(0))+"\n            ")])],1)],1),!1!==t.edit||null!==t.selectedComment&&t.selectedComment.id!==e.id?t._e():o("q-card-section",{staticClass:"comment-section"},[o("q-item-section",[o("div",{staticClass:"row"},[o("div",{staticClass:"title col",on:{click:function(o){t.goToProfile(parseInt(e.userprofile.id))}}},[t._v("\n                "+t._s(e.userprofile.firstname)+" "+t._s(e.userprofile.lastname)+"\n              ")]),o("div",{staticClass:"subtitle"},[t._v("("+t._s(t.formatDate(e.created_at))+")")]),parseInt(e.userprofile.id)===t.userprofileDetail.id?o("div",[o("q-btn",{attrs:{color:"grey-7",round:"",flat:"",icon:"app:three-dot-action",size:"8px"}},[o("q-menu",{attrs:{cover:"","auto-close":""}},[o("q-list",[o("q-item",{attrs:{clickable:""},on:{click:function(o){t.editComment(e),t.edit=!0}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"create"}})],1),o("q-item-section",[t._v("Edit Comment")])],1),o("q-item",{attrs:{clickable:""},on:{click:function(o){t.editComment(e),t.confirm=!0}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"delete"}})],1),o("q-item-section",[t._v("Delete Comment")])],1)],1)],1)],1)],1):t._e()]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("truncate",{staticClass:"comment",attrs:{clamp:"...See More",type:"text",length:60,less:"Show Less",text:e.comment,"action-class":"collapsedText"}}),o("p",{staticClass:"comment",staticStyle:{display:"inline-block","word-break":"break-word"}})],1)])])],1),parseInt(e.userprofile.id)===t.userprofileDetail.id&&!0===t.edit&&null!=t.selectedComment&&t.selectedComment.id===e.id?o("q-card-section",{staticClass:"comment-input",staticStyle:{width:"100%","margin-top":"10px"}},[o("q-item-section",[o("q-input",{attrs:{rounded:"",outlined:"",placeholder:"Write a Message",dense:t.dense},scopedSlots:t._u([{key:"before",fn:function(){return[null!=t.userprofileDetail&&null!=t.userprofileDetail.avatar?o("q-avatar",{attrs:{size:"34px"}},[o("img",{attrs:{src:""+t.userprofileDetail.avatar.url}})]):o("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[t._v("\n                  "+t._s(t.userDetails.userprofile.firstname.charAt(0))+"\n                ")])]},proxy:!0},{key:"after",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:t.resetEdit}}),o("q-btn",{staticStyle:{color:"#6B7BC7"},attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:function(e){return t.putBlogComment()}}})]},proxy:!0}],null,!0),model:{value:t.selectedComment.comment,callback:function(e){t.$set(t.selectedComment,"comment",e)},expression:"selectedComment.comment"}})],1)],1):t._e()],1)],1)}))],2),t.relatedBlogs().length?o("q-card",{staticClass:"my-card",staticStyle:{width:"100%"},attrs:{flat:"",bordered:""}},[o("q-card-section",[o("div",{staticClass:"text-h5 q-mt-sm q-mb-xs"},[t._v("Related Posts")])]),o("div",{staticClass:"q-pa-md mostReadSection",staticStyle:{"padding-top":"0px !important"}},[o("div",{staticClass:"favorite-pic-section"},[o("q-scroll-area",{staticClass:"scroll",attrs:{horizontal:""}},[o("div",{staticClass:"row no-wrap item-section"},t._l(t.relatedBlogs(),(function(e){return o("div",{key:e.id,staticClass:"item"},[o("q-img",{staticClass:"blog-image",attrs:{src:t.getImageurl(e.CoverPhoto.url)},on:{click:function(o){return t.goToBlog(e.id)}}}),o("div",{staticClass:"BMiCal",on:{click:function(o){return t.goToBlog(e.id)}}},[t._v(t._s(e.Title))]),o("div",{staticClass:"appStar"},[t._v(t._s(e.blog_comments.length)+" Comments")])],1)})),0)])],1)])],1):t._e(),o("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[o("q-card",[o("q-card-section",{staticClass:"row items-center"},[o("div",{staticClass:"text-h6"},[t._v("Delete comment")])]),o("q-card-section",{staticClass:"row items-center"},[o("span",{staticClass:"q-ml-sm"},[t._v("Deleting the comment will remove it from the conversation")])]),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Delete"},on:{click:t.deleteComment}})],1)],1)],1),o("div",{ref:"fullscreenElement",attrs:{id:"image-box"}},[o("FullScreen",{attrs:{details:t.fullscreendata}})],1)],1)},s=[],n=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("7f7f"),o("f751"),o("7514"),o("9523")),r=o.n(n),a=o("bd4c"),l=o("2f62"),c=o("e017"),u=o("d41a");function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function m(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var f={name:"Blog",computed:m(m(m({},Object(l["c"])("userprofile",["userDetails","userprofileDetail"])),Object(l["c"])("blog",["blog","blogCategory","blogs"])),Object(l["c"])("config",["blobBaseUrl"])),created:function(){this.$root.$on("footerAddIconClick",this.showAddNewsFeedModel),this.$root.$on("headerRightIcon2Click",this.gotoSearch),this.$root.$on("headerBackButtonClick",this.backButtonClick),this.$root.$on("onlikeClick",this.setLikeForBlog),this.$root.$on("onsetSelectedClick",this.blogComment),this.$root.$on("onformatDateClick",this.formatDate),this.$root.$on("onExitFullscreen",this.closeFullScreen)},beforeDestroy:function(){this.$root.$off("footerAddIconClick",this.showAddNewsFeedModel),this.$root.$off("headerBackButtonClick",this.backButtonClick),this.$root.$off("headerRightIcon2Click",this.gotoSearch),this.$root.$off("onsetSelectedClick",this.blogComment),this.$root.$off("onformatDateClick",this.formatDate),this.$root.$off("onExitFullscreen",this.closeFullScreen)},mounted:function(){var t,e;this.$auth.isAuthenticated()?this.setHeaderData(!1,!0,"","","","",!0,!0):this.setHeaderData(!1,!0,"","","","",!1,!1),this.fetchBlog(null===(t=this.$route)||void 0===t||null===(e=t.query)||void 0===e?void 0:e.id),this.fetchBlogs()},filters:{truncate:function(t,e,o){return t.length>e?t.substring(0,e)+o:t}},data:function(){return{tab:"",slide:1,autoplay:!0,commentText:"",ph:"",dense:!1,selectedComment:null,confirm:!1,edit:!1,fullscreendata:{url:null,hideBack:!0,userprofile:"",feedtext:"",created_at:"",likeLength:"",commentLength:"",id:"",likeIcon:""},delay:700,clicks:0,timer:null}},components:{truncate:c["a"],FullScreen:u["a"]},watch:{"$route.query.id":function(t){this.fetchBlog(t)}},methods:m(m(m({},Object(l["b"])("header",["setHeader"])),Object(l["b"])("blog",["fetchBlog","fetchBlogs","postBlogComments","putBlogComments","deleteBlogComments","postBlogLikes","deleteBlogLikes"])),{},{setHeaderData:function(t,e,o,i,s,n,r,a){this.setHeader({hamburgerIcon:t,backIcon:e,title:o,rightIcon1:i,rightIcon2:s,rightLinkText:n,notificationIcon:r,searchIcon:a})},relatedBlogs:function(){var t,e,o,i=this,s=null===(t=this.blog)||void 0===t||null===(e=t.blog_categories)||void 0===e?void 0:e.map((function(t){return t.id})),n=null===(o=this.blogs)||void 0===o?void 0:o.filter((function(t){var e,o=(null===t||void 0===t||null===(e=t.blog_categories)||void 0===e?void 0:e.some((function(t){return null===s||void 0===s?void 0:s.some((function(e){return e===t.id}))})))&&t.id!==i.blog.id;return o}));return n},setLikeForBlog:function(t){var e=this;if(!this.$auth.isAuthenticated())return this.$router.push("/welcome"),!1;var o=this.blog.bloglikes.find((function(t){return parseInt(t.userprofile.id)===e.userprofileDetail.id}));void 0===o?this.postBlogLikes({userprofileId:this.userprofileDetail.id,blogId:t}).then((function(){e.fetchBlog(t).then((function(){e.fullscreendata.likeIcon=e.likeColour(),e.fullscreendata.likeLength=e.blog.bloglikes.length}))})):this.deleteBlogLikes({blogLikeId:o.id}).then((function(){e.fetchBlog(t).then((function(){e.fullscreendata.likeIcon=e.likeColour(),e.fullscreendata.likeLength=e.blog.bloglikes.length}))}))},likeColour:function(){var t=this;if(!this.blog.bloglikes)return"app:like";var e=this.blog.bloglikes.find((function(e){return parseInt(e.userprofile.id)===t.userprofileDetail.id}));return void 0!==e?"app:like-blue":"app:like"},formatDate:function(t){return a["a"].formatDate(t,"DD MMM")+" at "+a["a"].formatDate(t,"hh.mm A")},editComment:function(t){this.selectedComment=Object.assign({},t)},postBlogComment:function(){var t=this;this.postBlogComments({comment:this.commentText,blogId:this.$route.query.id,userprofile:this.userprofileDetail.id}).then((function(){t.commentText="",t.fetchBlog(t.$route.query.id)}))},closeFullScreen:function(){if(document.exitFullscreen){document.exitFullscreen();var t=document.getElementById("image-box");t.setAttribute("style","display:none;"),this.fullscreendata.hideBack=!0}},getfullScreen:function(t){this.fullscreendata.hideBack=!1,this.fullscreendata.url=t.CoverPhoto.url,this.fullscreendata.name=t.userprofile.firstname+" "+t.userprofile.lastname,this.fullscreendata.feedtext=t.Content,this.fullscreendata.created_at=t.created_at,this.fullscreendata.likeLength=t.bloglikes.length,this.fullscreendata.commentLength=t.blog_comments.length,this.fullscreendata.id=parseInt(t.id),this.fullscreendata.likeIcon=this.likeColour();var e=document.getElementById("image-box");e.setAttribute("style","display:flex;");var o=this.$refs.fullscreenElement;this.$q.fullscreen.toggle(o).then((function(){})).catch((function(t){alert(t)}))},resetEdit:function(){this.selectedComment=null,this.edit=!1},putBlogComment:function(){var t=this;this.putBlogComments(this.selectedComment).then((function(){t.selectedComment=null,t.edit=!1,t.fetchBlog(t.$route.query.id)}))},deleteComment:function(){var t=this;this.deleteBlogComments(this.selectedComment.id).then((function(){t.selectedComment=null,t.fetchBlog(t.$route.query.id)}))},backButtonClick:function(){this.$router.push("/blogs/Home")},goToBlog:function(t){this.$router.push({path:"/blog",query:{id:t}})},blogComment:function(t){if(!this.$auth.isAuthenticated())return this.$router.push("/welcome"),!1;this.$router.push("/blog-comment/"+t)},gotoSearch:function(){this.$router.push("/blog-search")},goToProfile:function(t){t===this.userDetails.userprofile.id?this.$router.push("/profile"):this.$router.push("/user-profile/"+t)},oneClick:function(t){if(this.clicks++,1===this.clicks){var e=this;this.timer=setTimeout((function(){e.clicks=0,e.getfullScreen(t)}),this.delay)}else clearTimeout(this.timer),this.clicks=0,this.likeColour(),this.setLikeForBlog(parseInt(t.id))},goToblogs:function(t){this.$router.push("/blogs/"+t)},getImageurl:function(t){var e=t.substring(t.lastIndexOf("/")+1),o=this.blobBaseUrl;return t=o+e,t},showAddNewsFeedModel:function(){if(!this.$auth.isAuthenticated())return this.$router.push("/welcome"),!1}})},h=f,p=(o("160d"),o("2877")),g=o("9989"),b=o("f09f"),C=o("429b"),v=o("7460"),k=o("eb85"),q=o("068f"),y=o("a370"),x=o("4b7e"),B=o("9c40"),$=o("4074"),_=o("27f9"),w=o("cb32"),D=o("ad56"),I=o("4e73"),S=o("1c1c"),O=o("66e5"),T=o("0016"),Q=o("4983"),L=o("24e8"),j=o("de5e"),P=o("8572"),A=o("7f67"),F=o("eebe"),z=o.n(F),E=Object(p["a"])(h,i,s,!1,null,"1576be82",null);e["default"]=E.exports;z()(E,"components",{QPage:g["a"],QCard:b["a"],QTabs:C["a"],QTab:v["a"],QSeparator:k["a"],QImg:q["a"],QCardSection:y["a"],QCardActions:x["a"],QBtn:B["a"],QItemSection:$["a"],QInput:_["a"],QAvatar:w["a"],QIntersection:D["a"],QMenu:I["a"],QList:S["a"],QItem:O["a"],QIcon:T["a"],QScrollArea:Q["a"],QDialog:L["a"],QPageSticky:j["a"],QField:P["a"]}),z()(E,"directives",{ClosePopup:A["a"]})}}]);