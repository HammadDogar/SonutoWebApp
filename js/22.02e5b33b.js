(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"5be4":function(e,t,s){},8734:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex"},[s("div",{staticClass:"background"},[s("div",{staticClass:"d-flex"},[s("q-icon",{staticClass:"backbutton",attrs:{name:"app:back"},on:{click:function(t){return e.goToBack()}}}),s("span",{staticClass:"Heading"},[e._v("Please Verify Yourself")])],1),s("div",{staticClass:"steps"},[1===e.steps?s("div",{staticClass:" step1"},[s("q-btn",{attrs:{color:"primary",label:"Upload Your Selfie",icon:e.form.personImg?"check":"camera"},on:{click:function(t){return e.uploadImages("selfie")}}}),e.showDirection?s("div",{staticClass:"camera-direction"},[s("div",{staticClass:"content"},[s("h6",{staticClass:"q-mt-none"},[e._v("Place your face inside the outline")]),s("div",{staticClass:"shape"})])]):e._e()],1):e._e(),2===e.steps?s("div",{staticClass:"step2"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("q-select",{staticClass:"input-control",staticStyle:{"padding-left":"5px"},attrs:{borderless:"",options:e.docTypes,"emit-value":"","map-options":"",label:"Document Type",rules:[function(e){return!!e||"Field is required"}],"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"}},on:{input:e.resetPictures},model:{value:e.form.docType,callback:function(t){e.$set(e.form,"docType",t)},expression:"form.docType"}}),s("div",{staticClass:"doc-btns"},[e.form.docType&&"License"===e.form.docType?s("q-btn",{staticClass:"q-mt-lg",attrs:{color:"primary",label:"Upload Front Side",icon:e.form.docImgFront?"check":"camera"},on:{click:function(t){return e.uploadImages("front")}}}):e._e(),e.form.docType&&"License"===e.form.docType?s("q-btn",{staticClass:"q-mt-lg",attrs:{color:"primary",label:"Upload Back Side",icon:e.form.docImgBack?"check":"camera"},on:{click:function(t){return e.uploadImages("back")}}}):e._e(),e.form.docType&&"Passport"===e.form.docType?s("q-btn",{staticClass:"q-mt-lg",attrs:{color:"primary",label:"Upload Image",icon:e.form.docImgFront?"check":"camera"},on:{click:function(t){return e.uploadImages("front")}}}):e._e()],1)],1)])]):e._e()]),1===e.steps?s("q-btn",{staticClass:"next-btn",attrs:{color:"primary",label:"Next",disabled:!e.form.personImg},on:{click:function(t){return e.next(2)}}}):e._e(),2===e.steps?s("q-btn",{staticClass:"next-btn",attrs:{color:"primary",label:"Submit",disabled:null===e.form.docImgFront||"License"===e.form.docType&&null===e.form.docImgBack||e.requestLoading},on:{click:e.submitDetails}}):e._e()],1)])},o=[],n=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("a34a")),i=s.n(n),c=(s("34ef"),s("96cf"),s("c973")),a=s.n(c),l=s("9523"),u=s.n(l),p=s("fecd"),d=s("2f62"),f=s("ce28");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){u()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"UserVerification",data:function(){return{steps:1,docTypes:["Passport","License"],form:{personImg:null,docType:"",docImgFront:null,docImgBack:null},requestLoading:!1,showDirection:!1}},computed:b(b({},Object(d["c"])("config",["baseUrl","rocketChatUrl"])),Object(d["c"])("userprofile",["userDetails","userprofileDetail"])),methods:b(b(b(b({},Object(d["b"])("userprofile",["updateUser"])),Object(d["b"])("verification",["submitUserVerificationsDetail"])),Object(d["b"])("otp",["sendOTP"])),{},{goToBack:function(){1===this.steps?this.$router.push("welcome"):2===this.steps&&(this.steps=1)},uploadImages:function(e){var t=this;return a()(i.a.mark((function s(){var r,o,n;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return"selfie"===e&&(t.showDirection=!0),s.next=3,t.takePicture();case 3:r=s.sent,o=new Blob([new Uint8Array(Object(f["a"])(r.base64String))],{type:"image/".concat(r.format)}),n=new File([o],"Name",{lastModified:new Date,type:o.type}),"selfie"===e?(t.form.personImg=n,t.showDirection=!1):"front"===e?t.form.docImgFront=n:"back"===e&&(t.form.docImgBack=n);case 7:case"end":return s.stop()}}),s)})))()},takePicture:function(){var e=this;return a()(i.a.mark((function t(){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].getPhoto({quality:90,allowEditing:!0,resultType:p["b"].Base64}).catch((function(t){e.showDirection=!1}));case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})))()},next:function(e){this.steps=e},submitDetails:function(){var e=this;this.requestLoading=!0;var t=new FormData;t.append("data",JSON.stringify({documentType:this.form.docType,status:"Pending",users_permissions_user:this.userDetails.id})),t.append("files.personImg",this.form.personImg,"personImg"),"License"===this.form.docType?(t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),t.append("files.docBackImg",this.form.docImgBack,"docBackImg")):t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),this.submitUserVerificationsDetail({verRequest:t,userDetails:{name:this.userprofileDetail.firstfame+" "+this.userprofileDetail.lastname,id:this.userprofileDetail.user}}).then((function(t){e.requestLoading=!1,e.userDetails.confirmed?e.$router.push("index"):(e.$router.push("successful-verified"),e.sendOTP({email:e.userDetails.email,userId:e.userDetails.id}))}))},resetPictures:function(){this.form.docImgBack=null,this.form.docImgFront=null}}),mounted:function(){}},h=g,y=(s("d4ce"),s("ff27"),s("2877")),k=s("9989"),v=s("0016"),I=s("9c40"),w=s("ddd8"),O=s("eebe"),D=s.n(O),C=Object(y["a"])(h,r,o,!1,null,"7d1ba962",null);t["default"]=C.exports;D()(C,"components",{QPage:k["a"],QIcon:v["a"],QBtn:I["a"],QSelect:w["a"]})},d4ce:function(e,t,s){"use strict";var r=s("dcf8"),o=s.n(r);o.a},dcf8:function(e,t,s){},ff27:function(e,t,s){"use strict";var r=s("5be4"),o=s.n(r);o.a}}]);