(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"52b7":function(t,e,a){"use strict";var s=a("e34d"),r=a.n(s);r.a},ab55:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"page"},[a("div",{ref:"container",staticClass:"row chat-body"},[null!==t.inboxDetail?a("div",{staticClass:"col-12"},[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-card",{staticClass:"comment-card page",attrs:{flat:"",bordered:""}},[t._l(t.messages,(function(e,s){return a("div",{key:e.id},[0===s||s>0&&t.isSameDateMessage(t.messages[s-1].created_at,e.created_at)?a("q-card-actions",{staticStyle:{margin:"10px 10px 0px 10px"},attrs:{align:"between"}},[a("div",{staticClass:"row",staticStyle:{width:"100%"}},[a("div",{staticClass:"col separator"},[a("q-separator")],1),a("div",{staticClass:"col",staticStyle:{"text-align":"center"}},[a("q-item-label",{attrs:{flat:""}},[t._v(t._s(t.chatDay(e.created_at)))]),a("q-item-label",{attrs:{flat:""}},[t._v(t._s(t.chatDate(e.created_at)))])],1),a("div",{staticClass:"col separator"},[a("q-separator")],1)])]):t._e(),e.fromUser.id!=t.userDetails.id?a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",[a("q-item-section",{staticClass:"avatar-section",attrs:{avatar:""}},[null!==t.inboxDetail.avatar?a("q-avatar",{attrs:{size:"38px"}},[a("q-img",{attrs:{src:""+t.inboxDetail.avatar.url}})],1):a("q-avatar",{attrs:{color:"primary","text-color":"white"}},[t._v("\n                    "+t._s(t.inboxDetail.firstname.charAt(0))+"\n                  ")])],1)],1),a("q-card-section",{staticClass:"comment-section"},[a("q-item-section",[a("p",{staticClass:"comment"},[t._v("\n                    "+t._s(e.text)+"\n                  ")]),a("div",{staticClass:"messagetime"},[t._v(t._s(t.chatTime(e.created_at)))])])],1)],1):a("q-card-section",{staticClass:"justify-end",attrs:{horizontal:""}},[a("q-card-section",{staticClass:"nextReply"},[a("q-item-section",[a("p",{staticStyle:{margin:"0px 0px 0px 30px"}},[t._v("\n                    "+t._s(e.text)+"\n                  ")]),a("div",{staticClass:"replytime"},[t._v(t._s(t.chatTime(e.created_at)))])])],1),a("q-card-section",[a("q-item-section",{staticClass:"avatar-section",attrs:{avatar:""}},[null!==t.userDetails.userprofile.avatar?a("q-avatar",{attrs:{size:"38px"}},[a("q-img",{attrs:{src:""+t.userDetails.userprofile.avatar.url}})],1):a("q-avatar",{attrs:{color:"primary","text-color":"white"}},[t._v("\n                    "+t._s(t.userDetails.userprofile.firstname.charAt(0))+"\n                  ")])],1)],1)],1)],1)})),0===t.messages.length?a("q-card-section",{staticClass:"justify-center",attrs:{horizontal:""}},[a("div",{staticClass:"d-flex items-center"},[a("h6",[t._v("No Messages Found")])])]):t._e()],2)],1)],1):t._e()]),a("q-footer",{staticClass:"bg-white text-primary footer commentSectionHeight"},[a("q-card",{staticClass:"newsfeed-card",attrs:{flat:"",bordered:""}},[a("q-separator",{attrs:{inset:""}}),a("q-card-section",{staticClass:"Comment-input"},[a("q-item-section",[a("q-input",{ref:"commentT",attrs:{borderless:"",id:"commentText",placeholder:"Write a message..."},scopedSlots:t._u([{key:"before",fn:function(){return[null!==t.userDetails.userprofile.avatar?a("q-avatar",{attrs:{size:"38px"}},[a("q-img",{attrs:{src:""+t.userDetails.userprofile.avatar.url}})],1):a("q-avatar",{attrs:{color:"primary","text-color":"white"}},[t._v("\n                "+t._s(t.userDetails.userprofile.firstname.charAt(0))+"\n              ")])]},proxy:!0},{key:"after",fn:function(){return[a("q-btn",{staticStyle:{color:"#6B7BC7"},attrs:{round:"",flat:"",icon:"send",disable:0==t.messageText.length||t.isLoading},on:{click:t.send}})]},proxy:!0}]),model:{value:t.messageText,callback:function(e){t.messageText=e},expression:"messageText"}})],1)],1)],1)],1)],1)},r=[],i=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("7514"),a("9523")),n=a.n(i),o=a("bd4c"),c=a("2f62"),l=a("2007");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){n()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"MessageReply",data:function(){return{messageText:"",tempMessages:[{userId:1,text:"AOA"},{userId:1,text:"How are you?"},{userId:2,text:"WS, I'm fine. Thank you."},{userId:1,text:"AOA"},{userId:1,text:"How are you?"},{userId:2,text:"WS, I'm fine. Thank you."}],isLoading:!1}},computed:u(u({},Object(c["c"])("userprofile",["userprofiles","userDetails"])),Object(c["c"])("chat",["inboxDetail","messages","inboxes"])),mounted:function(){this.setHeaderData(!1,!0,"","","","",!0,!0),this.getInboxDetail({inboxId:this.$route.params.id,userId:this.userDetails.id}),this.fetchMessages(this.$route.params.id),this.scrollToEnd()},watch:{"$route.params.id":function(){this.getInboxDetail({inboxId:this.$route.params.id,userId:this.userDetails.id}),this.fetchMessages(this.$route.params.id)},inboxDetail:function(){var t=this;this.setHeaderData(!1,!0,this.inboxDetail.firstname+" "+this.inboxDetail.lastname,"","","",!0,!0);var e=this.inboxes.find((function(e){return parseInt(e.id)===parseInt(t.$route.params.id)}));void 0!==e&&e.unreadMessages.length>0&&this.seeAllMessages({inboxId:parseInt(this.$route.params.id),userId:this.userDetails.id})}},beforeRouteLeave:function(t,e,a){a()},updated:function(){this.scrollToEnd()},methods:u(u(u(u({},Object(c["b"])("header",["setHeader"])),Object(c["b"])("chat",["fetchMessages","sendMessage","addMessage","getInboxDetail","putMessage","seeAllMessages"])),Object(c["b"])("notifications",["postNotifications"])),{},{setHeaderData:function(t,e,a,s,r,i,n,o){this.setHeader({hamburgerIcon:t,backIcon:e,title:a,rightIcon1:s,rightIcon2:r,rightLinkText:i,notificationIcon:n,searchIcon:o})},chatTime:function(t){return o["a"].formatDate(t,"hh.mm A")},isSameDateMessage:function(t,e){return o["a"].formatDate(t,"YYYY-MM-DD")!==o["a"].formatDate(e,"YYYY-MM-DD")},chatDay:function(t){return o["a"].formatDate(t,"dddd (MMM)")},chatDate:function(t){return o["a"].formatDate(t,"DD-MM-YYYY")},backButtonClick:function(){this.$router.push("inbox")},send:function(){var t=this;this.isLoading=!0;var e={text:this.messageText,toUser:this.inboxDetail.userId,fromUser:this.userDetails.id,inbox:this.inboxDetail.inboxId};this.sendMessage(e).then((function(a){l["b"].emit("sendMessage",{user:parseInt(e.fromUser),msgObj:a,to:parseInt(e.toUser)}),t.addMessage(a),t.messageText="",t.isLoading=!1})),this.postNotifications({message:"You received a message",userprofileId:this.userDetails.userprofile.id,userId:this.inboxDetail.userId,url:"/chat/"+this.inboxDetail.inboxId}),l["b"].emit("sendNotification",{text:"You received a message",to:this.inboxDetail.userId})},scrollToEnd:function(){var t=this.$refs.container;t.scrollTop=t.scrollHeight}})},m=f,p=(a("52b7"),a("2877")),h=a("9989"),b=a("f09f"),g=a("4b7e"),x=a("eb85"),v=a("0170"),D=a("a370"),I=a("4074"),y=a("cb32"),q=a("068f"),_=a("7ff0"),C=a("27f9"),M=a("9c40"),O=a("eebe"),w=a.n(O),j=Object(p["a"])(m,s,r,!1,null,"2003db48",null);e["default"]=j.exports;w()(j,"components",{QPage:h["a"],QCard:b["a"],QCardActions:g["a"],QSeparator:x["a"],QItemLabel:v["a"],QCardSection:D["a"],QItemSection:I["a"],QAvatar:y["a"],QImg:q["a"],QFooter:_["a"],QInput:C["a"],QBtn:M["a"]})},e34d:function(t,e,a){}}]);