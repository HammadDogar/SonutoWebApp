"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[96],{29884:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var n=o(59835),i=o(86970),l={class:"q-gutter-y-md",style:{width:"100%"}},r=["src","id","poster","onClick"],a=["onClick"],s={key:0,class:"text-caption text-grey blog-description"};function u(e,t,o,u,c,d){var p=(0,n.up)("q-tab"),g=(0,n.up)("q-tabs"),f=(0,n.up)("q-separator"),h=(0,n.up)("q-card-section"),m=(0,n.up)("q-card"),y=(0,n.up)("q-tab-panel"),b=(0,n.up)("q-tab-panels"),v=(0,n.up)("BlogVlogOption"),w=(0,n.up)("q-dialog"),k=(0,n.up)("DeletePostWarning"),B=(0,n.up)("q-page"),C=(0,n.Q2)("intersection");return(0,n.wg)(),(0,n.j4)(B,{class:"flex"},{default:(0,n.w5)((function(){return[(0,n._)("div",l,[(0,n.Wm)(m,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{modelValue:c.tab,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.tab=e}),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.blogCategory,(function(e){return(0,n.wg)(),(0,n.j4)(p,{"no-caps":"",key:e.id,name:e.Name,label:e.Name},null,8,["name","label"])})),128))]})),_:1},8,["modelValue"]),(0,n.Wm)(f),(0,n.Wm)(b,{modelValue:c.tab,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.tab=e}),animated:""},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.blogCategory,(function(t){return(0,n.wg)(),(0,n.j4)(y,{key:t.id,name:t.Name,style:{padding:"0px !important"}},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.publishedBlogs,(function(o){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{transition:"scale",class:"vlog-div",key:o.id},[d.filterCategory(o,t.Name)?((0,n.wg)(),(0,n.j4)(m,{key:0,class:"my-card",flat:"",style:{width:"100%"}},{default:(0,n.w5)((function(){return[(0,n._)("div",null,[null!==o.CoverPhoto&&!1===d.isImagePost(o.CoverPhoto.mime)?((0,n.wg)(),(0,n.iD)("video",{key:0,src:o.CoverPhoto.url,class:"video-player",id:o.id,controls:"",poster:!!o.PosterImage&&o.PosterImage.url,preload:"none",controlsList:"nodownload",onClick:function(e){return d.goToBlog(o.id)}},null,8,r)):(0,n.kq)("",!0)]),(0,n.Wm)(h,null,{default:(0,n.w5)((function(){return[(0,n._)("div",{class:"text-h5 q-mt-sm q-mb-xs blog-title",onClick:function(e){return d.goToBlog(o.id)}},(0,i.zw)(o.Title),9,a),o.ShortDescription?((0,n.wg)(),(0,n.iD)("div",s,(0,i.zw)(o.ShortDescription|e.truncate(50,"...")),1)):(0,n.kq)("",!0)]})),_:2},1024)]})),_:2},1024)):(0,n.kq)("",!0)])),[[C,d.onIntersection]])})),128))]})),_:2},1032,["name"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]),(0,n.Wm)(w,{modelValue:c.postOptionModel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.postOptionModel=e}),position:"bottom"},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{isMyProfilePost:c.isMyPost,onClickedSelectedOption:d.clickedSelectedOptionModal},null,8,["isMyProfilePost","onClickedSelectedOption"])]})),_:1},8,["modelValue"]),(0,n.Wm)(w,{modelValue:c.postWarningModal,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.postWarningModal=e}),position:"bottom"},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{postType:"Vlog",onDeleteSelectedOption:d.deleteSelectedOption},null,8,["onDeleteSelectedOption"])]})),_:1},8,["modelValue"])]})),_:1})}var c=o(46264),d=o.n(c),p=(o(51393),o(69665),o(65716),o(61732),o(18381),o(60499)),g=o(4376),f=o(6827),h=o(33100),m=o(85541),y=o(80156),b={name:"VlogList",created:function(){this.$emitter.on("headerBackButtonClick",this.backButtonClick),window.addEventListener("scroll",this.playVideoOnScroll)},beforeUnmount:function(){this.$emitter.off("footerAddIconClick",this.showAddVlogPage),this.$emitter.off("headerBackButtonClick",this.backButtonClick),window.removeEventListener("scroll",this.playVideoOnScroll),this.setFooterData(!1,!0)},computed:d()(d()(d()({},(0,h.Se)("blog",["blogCategory","blogs","publishedBlogs","popularBlogs"])),(0,h.Se)("config",["blobBaseUrl"])),(0,h.Se)("userprofile",["userDetails","userprofileDetail"])),data:function(){return{inView:(0,p.iH)(Array.apply(null,Array(3)).map((function(e){return!0}))),selectedBlog:null,isMyPost:!1,postOptionModel:!1,postWarningModal:!1,tab:"Home"}},watch:{publishedBlogs:function(){this.inView=(0,p.iH)(Array.apply(null,Array(this.publishedBlogs.length)).map((function(e){return!1})))}},mounted:function(){this.setHeaderData(!1,!0,"Vlogs","","","",!0,!0),this.setFooterData(!1,!1),this.fetchBlogs(!0),this.fetchBlogCategory(),this.$route.params.category&&(this.tab=this.$route.params.category)},methods:d()(d()(d()(d()({},(0,h.nv)("header",["setHeader"])),(0,h.nv)("blog",["fetchBlogs","storeContent","deleteBlog","fetchBlogCategory"])),(0,h.nv)("footer",["setFooter"])),{},{setHeaderData:function(e,t,o,n,i,l,r,a){this.setHeader({hamburgerIcon:e,backIcon:t,title:o,rightIcon1:n,rightIcon2:i,rightLinkText:l,notificationIcon:r,searchIcon:a})},backButtonClick:function(){this.$router.push("/")},goToBlog:function(e){this.$router.push({path:"/blog",query:{id:e}})},formatDate:function(e){return g.ZP.formatDate(e,"DD MMM")+" at "+g.ZP.formatDate(e,"hh.mm A")},gotoSearch:function(){this.$router.push("blog-search")},closeFullScreen:function(){if(document.exitFullscreen){document.exitFullscreen();var e=document.getElementById("image-box");e.setAttribute("style","display:none;")}},getImageurl:function(e){var t=e.substring(e.lastIndexOf("/")+1),o=this.blobBaseUrl;return e=o+t,e},isImagePost:function(e){return"image"===e.split("/")[0]},onIntersection:function(e){},playPauseVideo:function(){var e=document.querySelectorAll(".video-player");e.forEach((function(e){e.muted=!0;var t=e.play();void 0!==t&&t.then((function(t){var o=new IntersectionObserver((function(t){t.forEach((function(t){console.log("intersectionRatio",t.intersectionRatio,e.id),t.intersectionRatio<1&&!e.paused?e.pause():1===t.intersectionRatio&&e.paused&&e.play()}))}),{threshold:1});o.observe(e)}))}))},playVideoOnScroll:function(){var e=!1,t=document.querySelectorAll(".video-player");t.forEach((function(t){var o=400,n=t.getBoundingClientRect().top;n>0&&n<o&&!e?(t.muted=!0,t.play(),e=!0):t.pause()}))},showAddVlogPage:function(){var e=this;this.storeContent({form:null}).then((function(){e.$router.push({path:"/create-post",query:{isForVlog:!0}})}))},openBlogVlogOptionModel:function(e){this.selectedBlog=e,parseInt(e.userprofile.id)===parseInt(this.userDetails.userprofile.id)?this.isMyPost=!0:this.isMyPost=!1,this.postOptionModel=!0},clickedSelectedOptionModal:function(e){switch(this.postOptionModel=!1,e){case"delete":this.postWarningModal=!0;break}},deleteSelectedOption:function(e){"cancel"===e?(this.isMyPost=!1,this.postWarningModal=!1):(this.deleteBlog(parseInt(this.selectedBlog.id)).then((function(){f.Z.create({progress:!0,message:"Vlog Deleted Successfully",type:"positive"})})),this.isMyPost=!1,this.postWarningModal=!1)},filterCategory:function(e,t){var o=e.blog_categories.find((function(e){return e.Name===t}));return void 0!==o},setFooterData:function(e,t){this.setFooter({commentSection:e,addButton:t})}}),components:{BlogVlogOption:m.Z,DeletePostWarning:y.Z}},v=o(11639),w=o(69885),k=o(44458),B=o(47817),C=o(57661),V=o(50926),D=o(89800),P=o(84106),S=o(91487),M=o(63190),I=o(68879),O=o(32074),q=o(18149),Z=o(79205),W=o(69984),_=o.n(W);const Q=(0,v.Z)(b,[["render",u],["__scopeId","data-v-097551ad"]]);var x=Q;_()(b,"components",{QPage:w.Z,QCard:k.Z,QTabs:B.Z,QTab:C.Z,QSeparator:V.Z,QTabPanels:D.Z,QTabPanel:P.Z,QImg:S.Z,QCardSection:M.Z,QBtn:I.Z,QDialog:O.Z,QField:q.Z}),_()(b,"directives",{Intersection:Z.Z})}}]);