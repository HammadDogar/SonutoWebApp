(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"17cc":function(e,t,i){},5608:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"flex"},[i("div",{staticClass:"q-gutter-y-md",staticStyle:{width:"100%"}},[i("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[i("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.recipesCategory,(function(t){return i("q-tab",{key:t.id,attrs:{"no-caps":"",name:t.Name,label:t.Name},on:{click:function(i){return e.goToRecipes(t.Name)}}})})),1),i("q-separator"),e.recipe.CoverPhoto&&e.isImagePost(e.recipe.CoverPhoto.mime)?i("q-img",{attrs:{src:e.getImageurl(e.recipe.CoverPhoto.url)},on:{click:function(t){return e.oneClick(e.recipe)}}}):e.recipe.CoverPhoto&&!1===e.isImagePost(e.recipe.CoverPhoto.mime)?i("video",{staticClass:"video-player",attrs:{src:e.recipe.CoverPhoto.url,autoplay:"",controls:"",controlsList:"nodownload"}}):e._e(),i("q-card-section",[i("div",{staticClass:"text-h5 q-mt-sm q-mb-xs blog-title"},[e._v(e._s(e.recipe.Title))]),i("div",{staticClass:"text-caption blog-description",domProps:{innerHTML:e._s(e.recipe.Content)}})]),i("q-card-actions",{staticClass:"icons",attrs:{align:"between"}},[i("q-btn",{attrs:{flat:"",icon:e.likeColour(),size:"10px","no-caps":""},on:{click:function(t){e.setLikeForRecipe(parseInt(e.recipe.id))}}},[i("span",{staticClass:"action"},[e._v("Like")])]),i("q-btn",{attrs:{flat:"",icon:"app:comment",size:"10px","no-caps":""},on:{click:function(t){return e.recipeComment(e.recipe.id)}}},[i("span",{staticClass:"action"},[e._v("Comment")])]),i("q-btn",{attrs:{flat:"",icon:"app:share",size:"10px","no-caps":""},on:{click:function(t){return e.shareNewsfeed(e.recipe)}}},[i("span",{staticClass:"action"},[e._v("Share")])])],1)],1)],1),i("q-card",{staticClass:"my-card",staticStyle:{width:"100%"},attrs:{flat:"",bordered:""}},[i("q-card-section",[i("div",{staticClass:"text-h5 q-mt-sm q-mb-xs"},[e._v("Comment")])]),i("q-card-section",{staticClass:"comment-input",staticStyle:{width:"100%"}},[i("q-item-section",[i("q-input",{attrs:{rounded:"",outlined:"",placeholder:"Write a Message",dense:e.dense},scopedSlots:e._u([{key:"before",fn:function(){return[null!=e.userprofileDetail&&null!=e.userprofileDetail.avatar?i("q-avatar",{attrs:{size:"34px"}},[i("img",{attrs:{src:""+e.userprofileDetail.avatar.url}})]):i("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[e._v("\n              "+e._s(e.userDetails.userprofile.firstname.charAt(0))+"\n\n            ")])]},proxy:!0},{key:"after",fn:function(){return[i("q-btn",{staticStyle:{color:"#6B7BC7"},attrs:{round:"",dense:"",flat:"",icon:"send",disable:0==e.commentText.length},on:{click:function(t){return e.postRecipeComment()}}})]},proxy:!0}]),model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1)],1),e._l(e.recipe.recipe_comments,(function(t){return i("q-intersection",{key:t.id,attrs:{transition:"scale",once:""}},[i("q-card-section",{attrs:{horizontal:""}},[!1!==e.edit||null!==e.selectedComment&&e.selectedComment.id!==t.id?e._e():i("q-card-section",[i("q-item-section",{staticClass:"avatar-section",attrs:{avatar:""}},[null!=t.userprofile.avatar?i("q-avatar",{attrs:{size:"34px"}},[i("img",{attrs:{src:""+t.userprofile.avatar.url}})]):i("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[e._v("\n              "+e._s(t.userprofile.firstname.charAt(0))+"\n            ")])],1)],1),!1!==e.edit||null!==e.selectedComment&&e.selectedComment.id!==t.id?e._e():i("q-card-section",{staticClass:"comment-section"},[i("q-item-section",[i("div",{staticClass:"row justify-center"},[i("div",{staticClass:"title col",on:{click:function(i){e.goToProfile(parseInt(t.userprofile.id))}}},[e._v("\n                "+e._s(t.userprofile.firstname)+" "+e._s(t.userprofile.lastname)+"\n              ")]),i("div",{staticClass:"subtitle"},[e._v("("+e._s(e.formatDate(t.created_at))+")")]),parseInt(t.userprofile.id)===e.userprofileDetail.id?i("div",[i("q-btn",{attrs:{color:"grey-7",round:"",flat:"",icon:"app:three-dot-action",size:"8px"}},[i("q-menu",{attrs:{cover:"","auto-close":""}},[i("q-list",[i("q-item",{attrs:{clickable:""},on:{click:function(i){e.editComment(t),e.edit=!0}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"create"}})],1),i("q-item-section",[e._v("Edit Comment")])],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){e.editComment(t),e.confirm=!0}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"delete"}})],1),i("q-item-section",[e._v("Delete Comment")])],1)],1)],1)],1)],1):e._e()]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("truncate",{staticClass:"comment",attrs:{clamp:"...See More",type:"text",length:60,less:"Show Less",text:t.comment,"action-class":"collapsedText"}}),i("p",{staticClass:"comment",staticStyle:{display:"inline-block","word-break":"break-word"}})],1)])])],1),parseInt(t.userprofile.id)===e.userprofileDetail.id&&!0===e.edit&&null!=e.selectedComment&&e.selectedComment.id===t.id?i("q-card-section",{staticClass:"comment-input",staticStyle:{width:"100%","margin-top":"10px"}},[i("q-item-section",[i("q-input",{attrs:{rounded:"",outlined:"",placeholder:"Write a Message",dense:e.dense},scopedSlots:e._u([{key:"before",fn:function(){return[null!=e.userprofileDetail&&null!=e.userprofileDetail.avatar?i("q-avatar",{attrs:{size:"34px"}},[i("img",{attrs:{src:""+e.userprofileDetail.avatar.url}})]):i("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[e._v("\n                  "+e._s(e.userDetails.userprofile.firstname.charAt(0))+"\n                ")])]},proxy:!0},{key:"after",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:e.resetEdit}}),i("q-btn",{staticStyle:{color:"#6B7BC7"},attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:function(t){return e.putRecipeComment()}}})]},proxy:!0}],null,!0),model:{value:e.selectedComment.comment,callback:function(t){e.$set(e.selectedComment,"comment",t)},expression:"selectedComment.comment"}})],1)],1):e._e()],1)],1)}))],2),e.relatedRecipes().length?i("q-card",{staticClass:"my-card",staticStyle:{width:"100%"},attrs:{flat:"",bordered:""}},[i("q-card-section",[i("div",{staticClass:"text-h5 q-mt-sm q-mb-xs"},[e._v("Related Recipes")])]),i("div",{staticClass:"q-pa-md mostReadSection",staticStyle:{"padding-top":"0px !important"}},[i("div",{staticClass:"favorite-pic-section"},[i("q-scroll-area",{staticClass:"scroll",attrs:{horizontal:""}},[i("div",{staticClass:"row no-wrap item-section"},e._l(e.relatedRecipes(),(function(t){return i("div",{key:t.id,staticClass:"item"},[i("q-img",{staticClass:"blog-image",attrs:{src:e.getImageurl(t.CoverPhoto.url)},on:{click:function(i){return e.goToRecipe(t.id)}}}),i("div",{staticClass:"BMiCal",on:{click:function(i){return e.goToRecipe(t.id)}}},[e._v(e._s(t.Title))]),i("div",{staticClass:"appStar"},[e._v(e._s(t.recipe_comments.length)+" Comments")])],1)})),0)])],1)])],1):e._e(),i("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("div",{staticClass:"text-h6"},[e._v("Delete comment")])]),i("q-card-section",{staticClass:"row items-center"},[i("span",{staticClass:"q-ml-sm"},[e._v("Deleting the comment will remove it from the conversation")])]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Delete"},on:{click:e.deleteComment}})],1)],1)],1),i("div",{ref:"fullscreenElement",attrs:{id:"image-box"}},[i("FullScreen",{attrs:{details:e.fullscreendata}})],1),i("q-dialog",{attrs:{position:"bottom"},model:{value:e.postOptionModel,callback:function(t){e.postOptionModel=t},expression:"postOptionModel"}},[i("BlogVlogOption",{attrs:{isMyProfilePost:e.isMyPost},on:{"clicked-selected-Option":e.clickedSelectedOptionModal}})],1),i("q-dialog",{attrs:{position:"bottom"},model:{value:e.postWarningModal,callback:function(t){e.postWarningModal=t},expression:"postWarningModal"}},[i("DeletePostWarning",{attrs:{postType:e.postType},on:{"delete-selected-option":e.deleteSelectedOption}})],1),i("q-dialog",{attrs:{position:"bottom"},model:{value:e.shareActionModel,callback:function(t){e.shareActionModel=t},expression:"shareActionModel"}},[i("ShareAction",{attrs:{sharePost:e.sharePostId,isBlogPost:!1,isRecipePost:!0,postOwner:e.postOwner}})],1)],1)},o=[],r=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("28a5"),i("7f7f"),i("f751"),i("7514"),i("9523")),n=i.n(r),a=i("bd4c"),c=i("2a19"),l=i("2f62"),u=i("e017"),d=i("d41a"),p=i("23cc"),m=i("f2d8"),h=i("9f2b");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){n()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var C={name:"Recipe",computed:v(v(v({},Object(l["c"])("userprofile",["userDetails","userprofileDetail"])),Object(l["c"])("recipe",["recipe","recipesCategory","recipes"])),Object(l["c"])("config",["blobBaseUrl"])),created:function(){this.$root.$on("footerAddIconClick",this.showAddNewsFeedModel),this.$root.$on("headerRightIcon2Click",this.gotoSearch),this.$root.$on("headerBackButtonClick",this.backButtonClick),this.$root.$on("onlikeClick",this.setLikeForRecipe),this.$root.$on("onsetSelectedClick",this.recipeComment),this.$root.$on("onformatDateClick",this.formatDate),this.$root.$on("onExitFullscreen",this.closeFullScreen)},beforeDestroy:function(){this.$root.$off("footerAddIconClick",this.showAddNewsFeedModel),this.$root.$off("headerBackButtonClick",this.backButtonClick),this.$root.$off("headerRightIcon2Click",this.gotoSearch),this.$root.$off("onsetSelectedClick",this.recipeComment),this.$root.$off("onformatDateClick",this.formatDate),this.$root.$off("onExitFullscreen",this.closeFullScreen)},mounted:function(){var e,t;this.$auth.isAuthenticated(),this.setHeaderData(!1,!0,"Recipe","","","",!1,!1),this.fetchRecipe(null===(e=this.$route)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.id),this.fetchRecipes(!1)},filters:{truncate:function(e,t,i){return e.length>t?e.substring(0,t)+i:e}},data:function(){return{tab:"",slide:1,autoplay:!0,commentText:"",ph:"",dense:!1,selectedComment:null,confirm:!1,edit:!1,fullscreendata:{url:null,hideBack:!0,userprofile:"",feedtext:"",created_at:"",likeLength:"",commentLength:"",id:"",likeIcon:""},delay:700,clicks:0,timer:null,postOptionModel:!1,postWarningModal:!1,isMyPost:!1,postType:"blog",shareActionModel:!1,sharePostId:null,postOwner:null}},components:{truncate:u["a"],FullScreen:d["a"],DeletePostWarning:p["a"],BlogVlogOption:m["a"],ShareAction:h["a"]},watch:{"$route.query.id":function(e){this.fetchRecipe(e)}},methods:v(v(v({},Object(l["b"])("header",["setHeader"])),Object(l["b"])("recipe",["fetchRecipe","fetchRecipes","postRecipeComments","putRecipeComments","deleteRecipeComments","postRecipeLikes","deleteRecipeLikes","deleteRecipe"])),{},{setHeaderData:function(e,t,i,s,o,r,n,a){this.setHeader({hamburgerIcon:e,backIcon:t,title:i,rightIcon1:s,rightIcon2:o,rightLinkText:r,notificationIcon:n,searchIcon:a})},relatedRecipes:function(){var e=this,t=this.recipe&&this.recipe.recipe_categories&&this.recipe.recipe_categories.map((function(e){return e.id})),i=this.recipes&&this.recipes.filter((function(i){var s,o=(null===i||void 0===i||null===(s=i.recipe_categories)||void 0===s?void 0:s.some((function(e){return null===t||void 0===t?void 0:t.some((function(t){return t===e.id}))})))&&i.id!==e.recipe.id&&"Published"===i.Status;return o}));return i},setLikeForRecipe:function(e){var t,i,s,o=this;if(!this.$auth.isAuthenticated())return this.$router.push("/welcome"),!1;if(null===(null===(t=this.userDetails)||void 0===t?void 0:t.verification)||"Approved"!==(null===(i=this.userDetails)||void 0===i||null===(s=i.verification)||void 0===s?void 0:s.status))return this.verifcationStatusModal=!0,!1;var r=this.recipe.recipelikes.find((function(e){return parseInt(e.userprofile.id)===o.userprofileDetail.id}));void 0===r?this.postRecipeLikes({userprofileId:this.userprofileDetail.id,recipeId:e}).then((function(){o.fetchRecipe(e).then((function(){o.fullscreendata.likeIcon=o.likeColour(),o.fullscreendata.likeLength=o.recipe.recipelikes.length}))})):this.deleteRecipeLikes({recipeLikeId:r.id}).then((function(){o.fetchRecipe(e).then((function(){o.fullscreendata.likeIcon=o.likeColour(),o.fullscreendata.likeLength=o.recipe.recipelikes.length}))}))},likeColour:function(){var e=this;if(!this.recipe.recipelikes)return"app:like";var t=this.recipe.recipelikes.find((function(t){return parseInt(t.userprofile.id)===e.userprofileDetail.id}));return void 0!==t?"app:like-blue":"app:like"},formatDate:function(e){return a["a"].formatDate(e,"DD MMM")+" at "+a["a"].formatDate(e,"hh.mm A")},editComment:function(e){this.selectedComment=Object.assign({},e)},postRecipeComment:function(){var e=this;this.postRecipeComments({comment:this.commentText,recipeId:this.$route.query.id,userprofile:this.userprofileDetail.id}).then((function(){e.commentText="",e.fetchRecipe(e.$route.query.id)}))},closeFullScreen:function(){if(document.exitFullscreen){document.exitFullscreen();var e=document.getElementById("image-box");e.setAttribute("style","display:none;"),this.fullscreendata.hideBack=!0}},getfullScreen:function(e){this.fullscreendata.hideBack=!1,this.fullscreendata.url=e.CoverPhoto.url,this.fullscreendata.name=e.userprofile.firstname+" "+e.userprofile.lastname,this.fullscreendata.feedtext=e.Content,this.fullscreendata.created_at=e.created_at,this.fullscreendata.likeLength=e.recipelikes.length,this.fullscreendata.commentLength=e.recipe_comments.length,this.fullscreendata.id=parseInt(e.id),this.fullscreendata.likeIcon=this.likeColour();var t=document.getElementById("image-box");t.setAttribute("style","display:flex;");var i=this.$refs.fullscreenElement;this.$q.fullscreen.toggle(i).then((function(){})).catch((function(e){alert(e)}))},resetEdit:function(){this.selectedComment=null,this.edit=!1},putRecipeComment:function(){var e=this;this.putRecipeComments(this.selectedComment).then((function(){e.selectedComment=null,e.edit=!1,e.fetchRecipe(e.$route.query.id)}))},deleteComment:function(){var e=this;this.deleteRecipeComments(this.selectedComment.id).then((function(){e.selectedComment=null,e.fetchRecipe(e.$route.query.id)}))},backButtonClick:function(){this.$router.push("/recipes/AllRecipes")},goToRecipe:function(e){this.$router.push({path:"/blog",query:{id:e}})},recipeComment:function(e){var t,i,s;return this.$auth.isAuthenticated()?null===(null===(t=this.userDetails)||void 0===t?void 0:t.verification)||"Approved"!==(null===(i=this.userDetails)||void 0===i||null===(s=i.verification)||void 0===s?void 0:s.status)?(this.verifcationStatusModal=!0,!1):void this.$router.push("/recipe-comment/"+e):(this.$router.push("/welcome"),!1)},gotoSearch:function(){this.$router.push("/recipe-search")},goToProfile:function(e){e===this.userDetails.userprofile.id?this.$router.push("/profile"):this.$router.push("/user-profile/"+e)},oneClick:function(e){if(this.clicks++,1===this.clicks){var t=this;this.timer=setTimeout((function(){t.clicks=0,t.getfullScreen(e)}),this.delay)}else clearTimeout(this.timer),this.clicks=0,this.likeColour(),this.setLikeForRecipe(parseInt(e.id))},goToRecipes:function(e){this.$router.push("/recipes/"+e)},getImageurl:function(e){var t=e.substring(e.lastIndexOf("/")+1),i=this.blobBaseUrl;return e=i+t,e},showAddNewsFeedModel:function(){var e,t,i;return this.$auth.isAuthenticated()?null===(null===(e=this.userDetails)||void 0===e?void 0:e.verification)||"Approved"!==(null===(t=this.userDetails)||void 0===t||null===(i=t.verification)||void 0===i?void 0:i.status)?(this.verifcationStatusModal=!0,!1):void 0:(this.$router.push("/welcome"),!1)},isImagePost:function(e){return"image"===e.split("/")[0]},clickedSelectedOptionModal:function(e){switch(this.postOptionModel=!1,e){case"delete":this.postType="Recipe",this.postWarningModal=!0;break}},openRecipeOptionModel:function(){parseInt(this.recipe.userprofile.id)===parseInt(this.userDetails.userprofile.id)?this.isMyPost=!0:this.isMyPost=!1,this.postOptionModel=!0},deleteSelectedOption:function(e){var t=this;"cancel"===e?(this.isMyPost=!1,this.postWarningModal=!1):(this.deleteRecipe(parseInt(this.recipe.id)).then((function(){c["a"].create({progress:!0,message:"Recipe Deleted Successfully",type:"postive"}),t.$router.push("recipes/home")})),this.isMyPost=!1,this.postWarningModal=!1)},shareNewsfeed:function(e){var t,i,s;return this.$auth.isAuthenticated()?null===(null===(t=this.userDetails)||void 0===t?void 0:t.verification)||"Approved"!==(null===(i=this.userDetails)||void 0===i||null===(s=i.verification)||void 0===s?void 0:s.status)?(this.verifcationStatusModal=!0,!1):(this.sharePostId=e.id,this.shareActionModel=!0,void(this.postOwner=e.userprofile.user.id||null)):(this.$router.push("/welcome"),!1)}})},g=C,k=(i("cf77"),i("e498"),i("2877")),b=i("9989"),y=i("f09f"),q=i("429b"),x=i("7460"),w=i("eb85"),$=i("068f"),D=i("a370"),R=i("4074"),_=i("cb32"),I=i("0170"),S=i("9c40"),M=i("4b7e"),O=i("27f9"),P=i("ad56"),A=i("4e73"),T=i("1c1c"),B=i("66e5"),L=i("0016"),Q=i("4983"),j=i("24e8"),F=i("de5e"),z=i("8572"),E=i("7f67"),W=i("eebe"),N=i.n(W),H=Object(k["a"])(g,s,o,!1,null,"407eb8fa",null);t["default"]=H.exports;N()(H,"components",{QPage:b["a"],QCard:y["a"],QTabs:q["a"],QTab:x["a"],QSeparator:w["a"],QImg:$["a"],QCardSection:D["a"],QItemSection:R["a"],QAvatar:_["a"],QItemLabel:I["a"],QBtn:S["a"],QCardActions:M["a"],QInput:O["a"],QIntersection:P["a"],QMenu:A["a"],QList:T["a"],QItem:B["a"],QIcon:L["a"],QScrollArea:Q["a"],QDialog:j["a"],QPageSticky:F["a"],QField:z["a"]}),N()(H,"directives",{ClosePopup:E["a"]})},ce85:function(e,t,i){},cf77:function(e,t,i){"use strict";var s=i("ce85"),o=i.n(s);o.a},e498:function(e,t,i){"use strict";var s=i("17cc"),o=i.n(s);o.a}}]);