(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[65],{"3c74":function(e,t,i){},"3d5d":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"flex"},[i("q-card",{staticClass:"my-card",staticStyle:{width:"100%"},attrs:{flat:"",bordered:""}},e._l(e.recipe.recipe_comments,(function(t){return i("q-card-section",{key:t.id,attrs:{horizontal:""}},[!1!==e.edit||null!==e.selectedComment&&e.selectedComment.id!==t.id?e._e():i("q-card-section",[i("q-item-section",{staticClass:"avatar-section",attrs:{avatar:""}},[null!=t.userprofile.avatar?i("q-avatar",{attrs:{size:"34px"}},[i("img",{attrs:{src:""+t.userprofile.avatar.url}})]):i("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[e._v("\n            "+e._s(t.userprofile.firstname.charAt(0))+"\n          ")])],1)],1),!1!==e.edit||null!==e.selectedComment&&e.selectedComment.id!==t.id?e._e():i("q-card-section",{staticClass:"comment-section"},[i("q-item-section",[i("div",{staticClass:"row"},[i("div",{staticClass:"title col",on:{click:function(i){e.goToProfile(parseInt(t.userprofile.id))}}},[e._v("\n              "+e._s(t.userprofile.firstname)+" "+e._s(t.userprofile.lastname)+"\n            ")]),i("div",{staticClass:"subtitle"},[e._v("("+e._s(e.formatDate(t.created_at))+")")]),parseInt(t.userprofile.id)===e.userprofileDetail.id?i("div",[i("q-btn",{attrs:{color:"grey-7",round:"",flat:"",icon:"app:three-dot-action",size:"8px"}},[i("q-menu",{attrs:{cover:"","auto-close":""}},[i("q-list",[i("q-item",{attrs:{clickable:""},on:{click:function(i){e.editComment(t),e.edit=!0}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"create"}})],1),i("q-item-section",[e._v("Edit Comment")])],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){e.editComment(t),e.confirm=!0}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"delete"}})],1),i("q-item-section",[e._v("Delete Comment")])],1)],1)],1)],1)],1):e._e()]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("p",{staticClass:"comment",staticStyle:{display:"inline-block","word-break":"break-word"}},[e._v(e._s(t.comment))])])])])],1),parseInt(t.userprofile.id)===e.userprofileDetail.id&&!0===e.edit&&null!=e.selectedComment&&e.selectedComment.id===t.id?i("q-card-section",{staticClass:"comment-input",staticStyle:{width:"100%","margin-top":"10px"}},[i("q-item-section",[i("q-input",{attrs:{rounded:"",outlined:"",placeholder:"Write a Message",dense:e.dense},scopedSlots:e._u([{key:"before",fn:function(){return[null!=e.userprofileDetail&&null!=e.userprofileDetail.avatar?i("q-avatar",{attrs:{size:"34px"}},[i("img",{attrs:{src:""+e.userprofileDetail.avatar.url}})]):i("q-avatar",{attrs:{size:"34px",color:"primary","text-color":"white"}},[e._v("\n                "+e._s(e.userDetails.userprofile.firstname.charAt(0))+"\n              ")])]},proxy:!0},{key:"after",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:e.resetEdit}}),i("q-btn",{staticStyle:{color:"#6B7BC7"},attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:function(t){return e.putRecipeComment()}}})]},proxy:!0}],null,!0),model:{value:e.selectedComment.comment,callback:function(t){e.$set(e.selectedComment,"comment",t)},expression:"selectedComment.comment"}})],1)],1):e._e()],1)})),1),i("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("div",{staticClass:"text-h6"},[e._v("Delete comment")])]),i("q-card-section",{staticClass:"row items-center"},[i("span",{staticClass:"q-ml-sm"},[e._v("Deleting the comment will remove it from the conversation")])]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Delete"},on:{click:e.deleteComment}})],1)],1)],1)],1)},a=[],r=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("f751"),i("9523")),s=i.n(r),n=i("bd4c"),c=i("2f62");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={name:"RecipeComment",computed:m(m(m({},Object(c["c"])("userprofile",["userprofiles","userDetails","userprofileDetail"])),Object(c["c"])("recipe",["recipe"])),Object(c["c"])("footer",["footerData"])),mounted:function(){this.setFooterData(!0),this.setHeaderData(!1,!0,"Comment","","","",!0,!0),this.fetchRecipe(this.$route.params.id),this.$root.$on("saveCommentButtonClick",this.postNewRecipeComment),this.$root.$on("headerBackButtonClick",this.backButtonClick)},beforeRouteLeave:function(e,t,i){this.setFooterData(!1),this.$root.$off("saveCommentButtonClick",this.postNewRecipeComment),this.$root.$off("headerBackButtonClick",this.backButtonClick),i()},components:{},watch:{"$route.params.id":function(e){this.fetchRecipe(e)}},data:function(){return{tab:"",slide:1,autoplay:!0,commentText:"",ph:"",dense:!1,selectedComment:null,confirm:!1,edit:!1}},methods:m(m(m(m({},Object(c["b"])("header",["setHeader"])),Object(c["b"])("recipe",["fetchRecipe","postRecipeComments","putRecipeComments","deleteRecipeComments","postRecipeLikes","deleteRecipeLikes"])),{},{setHeaderData:function(e,t,i,o,a,r,s,n){this.setHeader({hamburgerIcon:e,backIcon:t,title:i,rightIcon1:o,rightIcon2:a,rightLinkText:r,notificationIcon:s,searchIcon:n})}},Object(c["b"])("footer",["setFooter","addComment"])),{},{setFooterData:function(e){this.setFooter({commentSection:e})},postNewRecipeComment:function(){var e=this;this.postRecipeComments({comment:this.footerData.comment,recipeId:this.$route.params.id,userprofile:this.userprofileDetail.id}).then((function(){e.addComment(""),e.fetchRecipe(e.$route.params.id)}))},formatDate:function(e){return n["a"].formatDate(e,"DD MMM")+" at "+n["a"].formatDate(e,"hh.mm A")},editComment:function(e){this.selectedComment=Object.assign({},e)},resetEdit:function(){this.selectedComment=null,this.edit=!1},putRecipeComment:function(){var e=this;this.putRecipeComments(this.selectedComment).then((function(){e.selectedComment=null,e.edit=!1,e.fetchRecipe(e.$route.params.id)}))},deleteComment:function(){var e=this;this.deleteRecipeComments(this.selectedComment.id).then((function(){e.selectedComment=null,e.fetchRecipe(e.$route.params.id)}))},backButtonClick:function(){this.$router.push({path:"/recipe",query:{id:this.$route.params.id}})},goToProfile:function(e){e===this.userDetails.userprofile.id?this.$router.push("/profile"):this.$router.push("/user-profile/"+e)}})},p=u,d=(i("4ff5"),i("2877")),f=i("9989"),h=i("f09f"),C=i("a370"),b=i("4074"),v=i("cb32"),k=i("9c40"),q=i("4e73"),D=i("1c1c"),w=i("66e5"),y=i("0016"),g=i("27f9"),O=i("24e8"),_=i("4b7e"),R=i("de5e"),$=i("8572"),j=i("7f67"),x=i("eebe"),Q=i.n(x),I=Object(d["a"])(p,o,a,!1,null,"3ab4417d",null);t["default"]=I.exports;Q()(I,"components",{QPage:f["a"],QCard:h["a"],QCardSection:C["a"],QItemSection:b["a"],QAvatar:v["a"],QBtn:k["a"],QMenu:q["a"],QList:D["a"],QItem:w["a"],QIcon:y["a"],QInput:g["a"],QDialog:O["a"],QCardActions:_["a"],QPageSticky:R["a"],QField:$["a"]}),Q()(I,"directives",{ClosePopup:j["a"]})},"4ff5":function(e,t,i){"use strict";var o=i("3c74"),a=i.n(o);a.a}}]);