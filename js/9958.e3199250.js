"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[9958],{9958:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var s=a(59835),n=a(86970),r=function(e){return(0,s.dD)("data-v-cea74564"),e=e(),(0,s.Cn)(),e},i={class:"row chat-body",ref:"container"},o={key:0,class:"col-12"},u={class:"row",style:{width:"100%"}},l={class:"col separator"},c={class:"col",style:{"text-align":"center"}},d={class:"col separator"},f={class:"comment"},m={class:"messagetime"},h={style:{margin:"0px 0px 0px 30px"}},p={class:"replytime"},g=r((function(){return(0,s._)("div",{class:"d-flex items-center"},[(0,s._)("h6",null,"No Messages Found")],-1)}));function w(e,t,a,r,w,x){var D=(0,s.up)("q-separator"),_=(0,s.up)("q-item-label"),b=(0,s.up)("q-card-actions"),v=(0,s.up)("q-img"),I=(0,s.up)("q-avatar"),k=(0,s.up)("q-item-section"),y=(0,s.up)("q-card-section"),W=(0,s.up)("q-card"),M=(0,s.up)("q-btn"),T=(0,s.up)("q-input"),Z=(0,s.up)("q-footer"),q=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(q,{class:"page"},{default:(0,s.w5)((function(){return[(0,s._)("div",i,[null!==e.inboxDetail?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(W,{flat:"",bordered:""},{default:(0,s.w5)((function(){return[(0,s.Wm)(W,{class:"comment-card page",flat:"",bordered:""},{default:(0,s.w5)((function(){return[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.messages,(function(t,a){return(0,s.wg)(),(0,s.iD)("div",{key:t.id},[0===a||a>0&&x.isSameDateMessage(e.messages[a-1].created_at,t.created_at)?((0,s.wg)(),(0,s.j4)(b,{key:0,align:"between",style:{margin:"10px 10px 0px 10px"}},{default:(0,s.w5)((function(){return[(0,s._)("div",u,[(0,s._)("div",l,[(0,s.Wm)(D)]),(0,s._)("div",c,[(0,s.Wm)(_,{flat:""},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,n.zw)(x.chatDay(t.created_at)),1)]})),_:2},1024),(0,s.Wm)(_,{flat:""},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,n.zw)(x.chatDate(t.created_at)),1)]})),_:2},1024)]),(0,s._)("div",d,[(0,s.Wm)(D)])])]})),_:2},1024)):(0,s.kq)("",!0),t.fromUser.id!=e.userDetails.id?((0,s.wg)(),(0,s.j4)(y,{key:1,horizontal:""},{default:(0,s.w5)((function(){return[(0,s.Wm)(y,null,{default:(0,s.w5)((function(){return[(0,s.Wm)(k,{avatar:"",class:"avatar-section"},{default:(0,s.w5)((function(){return[null!==e.inboxDetail.avatar?((0,s.wg)(),(0,s.j4)(I,{key:0,size:"38px"},{default:(0,s.w5)((function(){return[(0,s.Wm)(v,{src:"".concat(e.inboxDetail.avatar.url)},null,8,["src"])]})),_:1})):((0,s.wg)(),(0,s.j4)(I,{key:1,color:"primary","text-color":"white"},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,n.zw)(e.inboxDetail.firstname.charAt(0)),1)]})),_:1}))]})),_:1})]})),_:1}),(0,s.Wm)(y,{class:"comment-section"},{default:(0,s.w5)((function(){return[(0,s.Wm)(k,null,{default:(0,s.w5)((function(){return[(0,s._)("p",f,(0,n.zw)(t.text),1),(0,s._)("div",m,(0,n.zw)(x.chatTime(t.created_at)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)):((0,s.wg)(),(0,s.j4)(y,{key:2,horizontal:"",class:"justify-end"},{default:(0,s.w5)((function(){return[(0,s.Wm)(y,{class:"nextReply"},{default:(0,s.w5)((function(){return[(0,s.Wm)(k,null,{default:(0,s.w5)((function(){return[(0,s._)("p",h,(0,n.zw)(t.text),1),(0,s._)("div",p,(0,n.zw)(x.chatTime(t.created_at)),1)]})),_:2},1024)]})),_:2},1024),(0,s.Wm)(y,null,{default:(0,s.w5)((function(){return[(0,s.Wm)(k,{avatar:"",class:"avatar-section"},{default:(0,s.w5)((function(){return[null!==e.userDetails.userprofile.avatar?((0,s.wg)(),(0,s.j4)(I,{key:0,size:"38px"},{default:(0,s.w5)((function(){return[(0,s.Wm)(v,{src:"".concat(e.userDetails.userprofile.avatar.url)},null,8,["src"])]})),_:1})):((0,s.wg)(),(0,s.j4)(I,{key:1,color:"primary","text-color":"white"},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,n.zw)(e.userDetails.userprofile.firstname.charAt(0)),1)]})),_:1}))]})),_:1})]})),_:1})]})),_:2},1024))])})),128)),0===e.messages.length?((0,s.wg)(),(0,s.j4)(y,{key:0,horizontal:"",class:"justify-center"},{default:(0,s.w5)((function(){return[g]})),_:1})):(0,s.kq)("",!0)]})),_:1})]})),_:1})])):(0,s.kq)("",!0)],512),(0,s.Wm)(Z,{class:"bg-white text-primary footer commentSectionHeight"},{default:(0,s.w5)((function(){return[(0,s.Wm)(W,{flat:"",bordered:"",class:"newsfeed-card"},{default:(0,s.w5)((function(){return[(0,s.Wm)(D,{inset:""}),(0,s.Wm)(y,{class:"Comment-input"},{default:(0,s.w5)((function(){return[(0,s.Wm)(k,null,{default:(0,s.w5)((function(){return[(0,s.Wm)(T,{borderless:"",modelValue:w.messageText,"onUpdate:modelValue":t[0]||(t[0]=function(e){return w.messageText=e}),id:"commentText",ref:"commentT",placeholder:"Write a message..."},{before:(0,s.w5)((function(){return[null!==e.userDetails.userprofile.avatar?((0,s.wg)(),(0,s.j4)(I,{key:0,size:"38px"},{default:(0,s.w5)((function(){return[(0,s.Wm)(v,{src:"".concat(e.userDetails.userprofile.avatar.url)},null,8,["src"])]})),_:1})):((0,s.wg)(),(0,s.j4)(I,{key:1,color:"primary","text-color":"white"},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,n.zw)(e.userDetails.userprofile.firstname.charAt(0)),1)]})),_:1}))]})),after:(0,s.w5)((function(){return[(0,s.Wm)(M,{round:"",flat:"",icon:"send",onClick:x.send,disable:0==w.messageText.length||w.isLoading,style:{color:"#6B7BC7"}},null,8,["onClick","disable"])]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})}var x=a(46264),D=a.n(x),_=(a(18381),a(65716),a(69665),a(4376)),b=a(33100),v=a(57529),I={name:"MessageReply",data:function(){return{messageText:"",tempMessages:[{userId:1,text:"AOA"},{userId:1,text:"How are you?"},{userId:2,text:"WS, I'm fine. Thank you."},{userId:1,text:"AOA"},{userId:1,text:"How are you?"},{userId:2,text:"WS, I'm fine. Thank you."}],isLoading:!1}},computed:D()(D()({},(0,b.Se)("userprofile",["userprofiles","userDetails"])),(0,b.Se)("chat",["inboxDetail","messages","inboxes"])),mounted:function(){this.setHeaderData(!1,!0,"","","","",!0,!0),this.getInboxDetail({inboxId:this.$route.params.id,userId:this.userDetails.id}),this.fetchMessages(this.$route.params.id),this.scrollToEnd()},watch:{"$route.params.id":function(){this.getInboxDetail({inboxId:this.$route.params.id,userId:this.userDetails.id}),this.fetchMessages(this.$route.params.id)},inboxDetail:function(){var e=this;this.setHeaderData(!1,!0,this.inboxDetail.firstname+" "+this.inboxDetail.lastname,"","","",!0,!0);var t=this.inboxes.find((function(t){return parseInt(t.id)===parseInt(e.$route.params.id)}));void 0!==t&&t.unreadMessages.length>0&&this.seeAllMessages({inboxId:parseInt(this.$route.params.id),userId:this.userDetails.id})}},beforeRouteLeave:function(e,t,a){a()},updated:function(){this.scrollToEnd()},methods:D()(D()(D()(D()({},(0,b.nv)("header",["setHeader"])),(0,b.nv)("chat",["fetchMessages","sendMessage","addMessage","getInboxDetail","putMessage","seeAllMessages"])),(0,b.nv)("notifications",["postNotifications"])),{},{setHeaderData:function(e,t,a,s,n,r,i,o){this.setHeader({hamburgerIcon:e,backIcon:t,title:a,rightIcon1:s,rightIcon2:n,rightLinkText:r,notificationIcon:i,searchIcon:o})},chatTime:function(e){return _.ZP.formatDate(e,"hh.mm A")},isSameDateMessage:function(e,t){return _.ZP.formatDate(e,"YYYY-MM-DD")!==_.ZP.formatDate(t,"YYYY-MM-DD")},chatDay:function(e){return _.ZP.formatDate(e,"dddd (MMM)")},chatDate:function(e){return _.ZP.formatDate(e,"DD-MM-YYYY")},backButtonClick:function(){this.$router.push("inbox")},send:function(){var e=this;this.isLoading=!0;var t={text:this.messageText,toUser:this.inboxDetail.userId,fromUser:this.userDetails.id,inbox:this.inboxDetail.inboxId};this.sendMessage(t).then((function(a){v.socket.emit("sendMessage",{user:parseInt(t.fromUser),msgObj:a,to:parseInt(t.toUser)}),e.addMessage(a),e.messageText="",e.isLoading=!1})),this.postNotifications({message:"You received a message",userprofileId:this.userDetails.userprofile.id,userId:this.inboxDetail.userId,url:"/chat/"+this.inboxDetail.inboxId}),v.socket.emit("sendNotification",{text:"You received a message",to:this.inboxDetail.userId})},scrollToEnd:function(){var e=this.$refs.container;e.scrollTop=e.scrollHeight}})},k=a(11639),y=a(69885),W=a(44458),M=a(11821),T=a(50926),Z=a(33115),q=a(63190),z=a(76749),Y=a(61357),j=a(91487),A=a(71378),Q=a(13119),S=a(68879),C=a(69984),U=a.n(C);const H=(0,k.Z)(I,[["render",w],["__scopeId","data-v-cea74564"]]);var $=H;U()(I,"components",{QPage:y.Z,QCard:W.Z,QCardActions:M.Z,QSeparator:T.Z,QItemLabel:Z.Z,QCardSection:q.Z,QItemSection:z.Z,QAvatar:Y.Z,QImg:j.Z,QFooter:A.Z,QInput:Q.Z,QBtn:S.Z})}}]);