"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[9323],{49323:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var o=n(59835),r=n(86970),i=function(e){return(0,o.dD)("data-v-854e94de"),e=e(),(0,o.Cn)(),e},l=["src"],u={class:"row"},a=["onClick"],s={class:"subtitle"},c={key:0},m={class:"row"},d={class:"col"},f={class:"comment",style:{display:"inline-block","word-break":"break-word"}},p=["src"],h=i((function(){return(0,o._)("div",{class:"text-h6"},"Delete comment",-1)})),C=i((function(){return(0,o._)("span",{class:"q-ml-sm"},"Deleting the comment will remove it from the conversation",-1)}));function w(e,t,n,i,w,g){var k=(0,o.up)("q-avatar"),_=(0,o.up)("q-item-section"),v=(0,o.up)("q-card-section"),B=(0,o.up)("q-icon"),D=(0,o.up)("q-item"),b=(0,o.up)("q-list"),W=(0,o.up)("q-menu"),y=(0,o.up)("q-btn"),q=(0,o.up)("q-input"),Z=(0,o.up)("q-card"),Q=(0,o.up)("q-card-actions"),I=(0,o.up)("q-dialog"),$=(0,o.up)("q-page"),x=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)($,{class:"flex"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{class:"my-card",flat:"",bordered:"",style:{width:"100%"}},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.blog.blog_comments,(function(n){return(0,o.wg)(),(0,o.j4)(v,{horizontal:"",key:n.id},{default:(0,o.w5)((function(){return[!1!==w.edit||null!==w.selectedComment&&w.selectedComment.id!==n.id?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(v,{key:0},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,{avatar:"",class:"avatar-section"},{default:(0,o.w5)((function(){return[null!=n.userprofile.avatar?((0,o.wg)(),(0,o.j4)(k,{key:0,size:"34px"},{default:(0,o.w5)((function(){return[(0,o._)("img",{src:"".concat(n.userprofile.avatar.url)},null,8,l)]})),_:2},1024)):((0,o.wg)(),(0,o.j4)(k,{key:1,size:"34px",color:"primary","text-color":"white"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,r.zw)(n.userprofile.firstname.charAt(0)),1)]})),_:2},1024))]})),_:2},1024)]})),_:2},1024)),!1!==w.edit||null!==w.selectedComment&&w.selectedComment.id!==n.id?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(v,{key:1,class:"comment-section"},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,null,{default:(0,o.w5)((function(){return[(0,o._)("div",u,[(0,o._)("div",{class:"title col",onClick:function(e){return g.goToProfile(parseInt(n.userprofile.id))}},(0,r.zw)(n.userprofile.firstname)+" "+(0,r.zw)(n.userprofile.lastname),9,a),(0,o._)("div",s,"("+(0,r.zw)(g.formatDate(n.created_at))+")",1),parseInt(n.userprofile.id)===e.userprofileDetail.id?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(y,{color:"grey-7",round:"",flat:"",icon:"app:three-dot-action",size:"8px"},{default:(0,o.w5)((function(){return[(0,o.Wm)(W,{cover:"","auto-close":""},{default:(0,o.w5)((function(){return[(0,o.Wm)(b,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(D,{clickable:"",onClick:function(e){return g.editComment(n),w.edit=!0}},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,{avatar:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(B,{name:"create"})]})),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Edit Comment")]})),_:1})]})),_:2},1032,["onClick"]),(0,o.Wm)(D,{clickable:"",onClick:function(e){return g.editComment(n),w.confirm=!0}},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,{avatar:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(B,{name:"delete"})]})),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Delete Comment")]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)])):(0,o.kq)("",!0)]),(0,o._)("div",m,[(0,o._)("div",d,[(0,o._)("p",f,(0,r.zw)(n.comment),1)])])]})),_:2},1024)]})),_:2},1024)),parseInt(n.userprofile.id)===e.userprofileDetail.id&&!0===w.edit&&null!=w.selectedComment&&w.selectedComment.id===n.id?((0,o.wg)(),(0,o.j4)(v,{key:2,class:"comment-input",style:{width:"100%","margin-top":"10px"}},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(q,{rounded:"",outlined:"",modelValue:w.selectedComment.comment,"onUpdate:modelValue":t[1]||(t[1]=function(e){return w.selectedComment.comment=e}),placeholder:"Write a Message",dense:w.dense},{before:(0,o.w5)((function(){return[null!=e.userprofileDetail&&null!=e.userprofileDetail.avatar?((0,o.wg)(),(0,o.j4)(k,{key:0,size:"34px"},{default:(0,o.w5)((function(){return[(0,o._)("img",{src:"".concat(e.userprofileDetail.avatar.url)},null,8,p)]})),_:1})):((0,o.wg)(),(0,o.j4)(k,{key:1,size:"34px",color:"primary","text-color":"white"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,r.zw)(e.userDetails.userprofile.firstname.charAt(0)),1)]})),_:1}))]})),after:(0,o.w5)((function(){return[(0,o.Wm)(B,{name:"close",onClick:g.resetEdit,class:"cursor-pointer"},null,8,["onClick"]),(0,o.Wm)(y,{round:"",dense:"",flat:"",icon:"send",onClick:t[0]||(t[0]=function(e){return g.putBlogComment()}),style:{color:"#6B7BC7"}})]})),_:1},8,["modelValue","dense"])]})),_:1})]})),_:1})):(0,o.kq)("",!0)]})),_:2},1024)})),128))]})),_:1}),(0,o.Wm)(I,{modelValue:w.confirm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.confirm=e}),persistent:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(v,{class:"row items-center"},{default:(0,o.w5)((function(){return[h]})),_:1}),(0,o.Wm)(v,{class:"row items-center"},{default:(0,o.w5)((function(){return[C]})),_:1}),(0,o.Wm)(Q,{align:"right"},{default:(0,o.w5)((function(){return[(0,o.wy)((0,o.Wm)(y,{flat:"",label:"Cancel"},null,512),[[x]]),(0,o.wy)((0,o.Wm)(y,{flat:"",label:"Delete",onClick:g.deleteComment},null,8,["onClick"]),[[x]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var g=n(46264),k=n.n(g),_=(n(58665),n(69665),n(4376)),v=n(33100),B={name:"Comment",computed:k()(k()(k()({},(0,v.Se)("userprofile",["userprofiles","userDetails","userprofileDetail"])),(0,v.Se)("blog",["blog"])),(0,v.Se)("footer",["footerData"])),mounted:function(){this.setFooterData(!0),this.setHeaderData(!1,!0,"Comment","","","",!0,!0),this.fetchBlog(this.$route.params.id),this.$emitter.on("saveCommentButtonClick",this.postNewBlogComment),this.$emitter.on("headerBackButtonClick",this.backButtonClick)},beforeRouteLeave:function(e,t,n){this.setFooterData(!1),this.$emitter.off("saveCommentButtonClick",this.postNewBlogComment),this.$emitter.off("headerBackButtonClick",this.backButtonClick),n()},components:{},watch:{"$route.params.id":function(e){e&&this.fetchBlog(e)}},data:function(){return{tab:"",slide:1,autoplay:!0,commentText:"",ph:"",dense:!1,selectedComment:null,confirm:!1,edit:!1}},methods:k()(k()(k()(k()({},(0,v.nv)("header",["setHeader"])),(0,v.nv)("blog",["fetchBlog","postBlogComments","putBlogComments","deleteBlogComments","postBlogLikes","deleteBlogLikes"])),{},{setHeaderData:function(e,t,n,o,r,i,l,u){this.setHeader({hamburgerIcon:e,backIcon:t,title:n,rightIcon1:o,rightIcon2:r,rightLinkText:i,notificationIcon:l,searchIcon:u})}},(0,v.nv)("footer",["setFooter","addComment"])),{},{setFooterData:function(e){this.setFooter({commentSection:e})},postNewBlogComment:function(){var e=this;this.postBlogComments({comment:this.footerData.comment,blogId:this.$route.params.id,userprofile:this.userprofileDetail.id}).then((function(){e.addComment(""),e.fetchBlog(e.$route.params.id)}))},formatDate:function(e){return _.ZP.formatDate(e,"DD MMM")+" at "+_.ZP.formatDate(e,"hh.mm A")},editComment:function(e){this.selectedComment=Object.assign({},e)},resetEdit:function(){this.selectedComment=null,this.edit=!1},putBlogComment:function(){var e=this;this.putBlogComments(this.selectedComment).then((function(){e.selectedComment=null,e.edit=!1,e.fetchBlog(e.$route.params.id)}))},deleteComment:function(){var e=this;this.deleteBlogComments(this.selectedComment.id).then((function(){e.selectedComment=null,e.fetchBlog(e.$route.params.id)}))},backButtonClick:function(){this.$router.push({path:"/blog",query:{id:this.$route.params.id}})},goToProfile:function(e){e===this.userDetails.userprofile.id?this.$router.push("/profile"):this.$router.push("/user-profile/"+e)}})},D=n(11639),b=n(69885),W=n(44458),y=n(63190),q=n(76749),Z=n(61357),Q=n(68879),I=n(56362),$=n(13246),x=n(490),z=n(22857),j=n(13119),S=n(32074),P=n(11821),F=n(30627),U=n(18149),V=n(62146),A=n(69984),H=n.n(A);const L=(0,D.Z)(B,[["render",w],["__scopeId","data-v-854e94de"]]);var M=L;H()(B,"components",{QPage:b.Z,QCard:W.Z,QCardSection:y.Z,QItemSection:q.Z,QAvatar:Z.Z,QBtn:Q.Z,QMenu:I.Z,QList:$.Z,QItem:x.Z,QIcon:z.Z,QInput:j.Z,QDialog:S.Z,QCardActions:P.Z,QPageSticky:F.Z,QField:U.Z}),H()(B,"directives",{ClosePopup:V.Z})}}]);