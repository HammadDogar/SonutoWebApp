(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"5be4":function(e,t,s){},"6d0d":function(e,t,s){},"6d83":function(e,t,s){"use strict";var i=s("6d0d"),n=s.n(i);n.a},8734:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex"},[s("div",{staticClass:"background"},[s("div",{staticClass:"d-flex"},[s("q-icon",{staticClass:"backbutton",attrs:{name:"app:back"},on:{click:function(t){return e.goToBack()}}})],1),s("div",{staticClass:"steps-description-section"},[1===e.steps?s("div",[s("span",{staticClass:"Heading"},[e._v("Prepare for your selfie")]),s("p",{staticClass:"sub-title"},[e._v("\n          Sonuto has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the\n          platform to verify their identity.\n        ")]),s("p",{staticClass:"sub-title"},[e._v("\n          *Remove anything that obstructs your face like hats, sunglasses or headphones.\n        ")]),s("p",{staticClass:"sub-title"},[e._v("\n          *Make sure your face is fully and evenly lit.\n        ")]),s("p",{staticClass:"sub-title"},[e._v("\n          *Position your face at the same height as your phone's camera.\n        ")])]):e._e(),2===e.steps?s("div",[s("span",{staticClass:"Heading"},[e._v("Prepare to scan your document")]),s("p",{staticClass:"sub-title"},[e._v("\n          Sonuto has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the\n          platform to verify their identity.\n        ")]),s("p",{staticClass:"sub-title"},[e._v("\n          Open the page showing your personal information and continue on the next screen.\n        ")])]):e._e()]),s("div",{staticClass:"steps"},[s("div",{staticClass:" step1"},[e.showDirection?s("div",{staticClass:"camera-direction",class:[1===e.directionState&&"full-div-height"]},[1===e.directionState?s("div",{staticClass:"content"},[s("h6",{staticClass:"q-mt-none"},[e._v("Place your face inside the outline")]),s("div",{staticClass:"shape"})]):e._e(),2===e.directionState?s("div",{staticClass:"content"},[s("h6",[e._v("Place your front side of document")])]):e._e(),3===e.directionState?s("div",{staticClass:"content"},[s("h6",[e._v("Place your back side of document")])]):e._e()]):e._e()]),2===e.steps?s("div",{staticClass:"step2"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("q-select",{staticClass:"input-control",staticStyle:{"padding-left":"5px"},attrs:{borderless:"",options:e.docTypes,"emit-value":"","map-options":"","label-color":"primary",label:"Document Type",rules:[function(e){return!!e||"Field is required"}],"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"}},on:{input:e.resetPictures},model:{value:e.form.docType,callback:function(t){e.$set(e.form,"docType",t)},expression:"form.docType"}})],1)])]):e._e()]),s("div",{staticClass:"buttons-section"},[1===e.steps?s("q-btn",{staticClass:"next-btn",attrs:{label:"Next","icon-right":"app:right-arrow"},on:{click:function(t){return e.uploadImages("selfie")}}}):e._e(),2===e.steps?s("q-btn",{staticClass:"next-btn",attrs:{label:"Next",disabled:e.requestLoading,"icon-right":"app:right-arrow"},on:{click:function(t){return e.uploadImages("front")}}}):e._e()],1)])])},n=[],a=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("a34a")),r=s.n(a),o=(s("34ef"),s("96cf"),s("c973")),c=s.n(o),l=s("9523"),u=s.n(l),p=s("fecd"),d=s("2f62"),f=s("ce28");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){u()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={name:"UserVerification",data:function(){return{steps:1,docTypes:["Passport","License"],form:{personImg:null,docType:"License",docImgFront:null,docImgBack:null},requestLoading:!1,showDirection:!1,directionState:0}},computed:h(h({},Object(d["c"])("config",["baseUrl","rocketChatUrl"])),Object(d["c"])("userprofile",["userDetails","userprofileDetail"])),methods:h(h(h(h({},Object(d["b"])("userprofile",["updateUser"])),Object(d["b"])("verification",["submitUserVerificationsDetail"])),Object(d["b"])("otp",["sendOTP"])),{},{goToBack:function(){1===this.steps?this.$router.push("welcome"):2===this.steps&&(this.steps=1)},uploadImages:function(e){var t=this;return c()(r.a.mark((function s(){var i,n,a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.showDirection=!0,"selfie"===e?t.directionState=1:"front"===e?t.directionState=2:"License"===t.form.docType&&"back"===e&&(t.directionState=3),s.next=4,t.takePicture();case 4:if(i=s.sent,i){s.next=7;break}return s.abrupt("return");case 7:n=new Blob([new Uint8Array(Object(f["a"])(i.base64String))],{type:"image/".concat(i.format)}),a=new File([n],"Name",{lastModified:new Date,type:n.type}),t.showDirection=!1,"selfie"===e?(t.form.personImg=a,t.showDirection=!1,t.steps=2):"front"===e?(t.form.docImgFront=a,"License"===t.form.docType?t.uploadImages("back"):t.submitDetails()):"back"===e&&(t.form.docImgBack=a,t.submitDetails());case 11:case"end":return s.stop()}}),s)})))()},takePicture:function(){var e=this;return c()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].getPhoto({quality:90,allowEditing:!0,resultType:p["b"].Base64}).catch((function(t){e.showDirection=!1}));case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})))()},next:function(e){this.steps=e},submitDetails:function(){var e=this;this.requestLoading=!0;var t=new FormData;t.append("data",JSON.stringify({documentType:this.form.docType,status:"Pending",users_permissions_user:this.userDetails.id})),t.append("files.personImg",this.form.personImg,"personImg"),"License"===this.form.docType?(t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),t.append("files.docBackImg",this.form.docImgBack,"docBackImg")):t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),this.submitUserVerificationsDetail({verRequest:t,userDetails:{name:this.userprofileDetail.firstfame+" "+this.userprofileDetail.lastname,id:this.userprofileDetail.user}}).then((function(t){e.requestLoading=!1,e.userDetails.confirmed?e.$router.push("index"):(e.$router.push("successful-verified"),e.sendOTP({email:e.userDetails.email,userId:e.userDetails.id}))}))},resetPictures:function(){this.form.docImgBack=null,this.form.docImgFront=null}}),mounted:function(){}},g=b,v=(s("6d83"),s("ff27"),s("2877")),y=s("9989"),w=s("0016"),k=s("9c40"),C=s("ddd8"),D=s("eebe"),O=s.n(D),I=Object(v["a"])(g,i,n,!1,null,"04ea0c60",null);t["default"]=I.exports;O()(I,"components",{QPage:y["a"],QIcon:w["a"],QBtn:k["a"],QSelect:C["a"]})},ff27:function(e,t,s){"use strict";var i=s("5be4"),n=s.n(i);n.a}}]);