"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[9521],{49521:function(e,t,o){o.r(t),o.d(t,{default:function(){return Q}});var r=o(59835),n=o(86970),i=["src"],l={class:"q-pa-md q-gutter-sm"},u={key:0,class:"text-center q-mb-md q-mt-lg"};function s(e,t,o,s,a,c){var f=(0,r.up)("q-item-label"),w=(0,r.up)("q-avatar"),d=(0,r.up)("q-item-section"),h=(0,r.up)("q-btn"),p=(0,r.up)("q-item"),m=(0,r.up)("q-list"),g=(0,r.up)("q-card"),v=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(v,null,{default:(0,r.w5)((function(){return[e.usernotications.length>=1?((0,r.wg)(),(0,r.j4)(g,{key:0,flat:"",bordered:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(f,{class:"title",style:{margin:"15px","font-size":"20px"}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,n.zw)("Follower requests"))]})),_:1}),(0,r.Wm)(m,null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.followersRequests,(function(e){return(0,r.wg)(),(0,r.j4)(p,{key:e.id},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{avatar:""},{default:(0,r.w5)((function(){return[null!=e.follower.avatar?((0,r.wg)(),(0,r.j4)(w,{key:0},{default:(0,r.w5)((function(){return[(0,r._)("img",{src:e.follower.avatar.url},null,8,i)]})),_:2},1024)):((0,r.wg)(),(0,r.j4)(w,{key:1,color:"primary","text-color":"white"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,n.zw)(e.follower.firstname.charAt(0)),1)]})),_:2},1024))]})),_:2},1024),(0,r.Wm)(d,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(f,null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,n.zw)(e.follower.firstname)+" "+(0,n.zw)(e.follower.lastname),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(d,{side:""},{default:(0,r.w5)((function(){return[(0,r._)("div",l,[(0,r.Wm)(h,{label:"Accept",color:"primary","no-caps":"",onClick:function(t){return c.acceptFollow(e)}},null,8,["onClick"]),(0,r.Wm)(h,{label:"Reject",color:"primary","no-caps":"",onClick:function(t){return c.removeFollow(e)}},null,8,["onClick"])])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),0===e.followersRequests.length?((0,r.wg)(),(0,r.iD)("h6",u,"No Request Found")):(0,r.kq)("",!0)]})),_:1})):(0,r.kq)("",!0)]})),_:1})}var a=o(46264),c=o.n(a),f=(o(69665),o(18381),o(65716),o(33100)),w=o(96060),d=o(6827),h=o(57529),p={name:"notification",data:function(){return{matMoreHoriz:null}},created:function(){this.matMoreHoriz=w.Bed},computed:c()(c()(c()({},(0,f.Se)("userprofile",["userprofiles","userDetails","userprofileDetail"])),(0,f.Se)("notifications",["usernotications"])),(0,f.Se)("followers",["followersRequests"])),mounted:function(){this.setHeaderData(!0,!1,"Followers","","","",!0,!0),this.fetchNotifications(this.userDetails.id),this.fetchFollowers(this.userprofileDetail.user)},methods:c()(c()(c()(c()({},(0,f.nv)("header",["setHeader"])),(0,f.nv)("notifications",["fetchNotifications","putNotification"])),(0,f.nv)("followers",["fetchFollowers","fetchFollowings","updateFollowers","updateFollowing","getFollowing","removeFollowing","removeFollower"])),{},{setHeaderData:function(e,t,o,r,n,i,l,u){this.setHeader({hamburgerIcon:e,backIcon:t,title:o,rightIcon1:r,rightIcon2:n,rightLinkText:i,notificationIcon:l,searchIcon:u})},updateNotification:function(e,t,o,r){var n=this;this.putNotification({notificationId:e,userprofileId:t,message:o,userId:r}).then((function(){n.fetchNotifications(n.userDetails.id)}))},redirectToFollowRequests:function(){this.$router.push("my-photos")},viewcomments:function(e){this.$router.push(e.URL)},filterUserProfileData:function(e){var t=this.userprofiles.find((function(t){return t.id===e}));return null!=t?t.firstname+" "+t.lastname:""},filterUserProfileImage:function(e){var t=this.userprofiles.find((function(t){return t.id===e}));return null!=t&&null!=t.avatar?t.avatar.url:null},getNotificationReceiveTime:function(e){var t=new Date(e),o=new Date,r=(o.getTime()-t.getTime())/1e3;return r>60?(r/=60,r>60?(r/=60,r>60?Math.floor(r/=24)+" Days ago":Math.floor(r)+" Hours ago"):Math.floor(r)+" Min ago"):Math.floor(r)+" secound ago"},goToProfile:function(e){this.$router.push("/user-profile/"+e)},acceptFollow:function(e){var t=this;this.updateFollowers({id:e.id,status:"Accepted"}).then((function(){t.fetchFollowers(t.userprofileDetail.user)})),this.getFollowing({followingId:this.userprofileDetail.id,userId:e.follower.user}).then((function(o){o.length>0&&t.updateFollowing({id:o[0].id,status:"Accepted"}).then((function(){t.fetchFollowings(t.userprofileDetail.user),d.Z.create({progress:!0,message:"Request Accepted",type:"positive"}),h.socket.emit("followRequestStatus",{to:e.follower.user})}))}))},removeFollow:function(e){var t=this;this.removeFollower(e.id).then((function(){t.fetchFollowers(t.userprofileDetail.user)})),this.getFollowing({followingId:this.userprofileDetail.id,userId:e.follower.user}).then((function(o){o.length>0&&t.removeFollowing(o[0].id).then((function(){t.fetchFollowings(t.userprofileDetail.user),h.socket.emit("followRequestStatus",{to:e.follower.user}),d.Z.create({progress:!0,message:"Request Rejected",type:"positive"})}))}))}})},m=o(11639),g=o(69885),v=o(44458),F=o(33115),q=o(13246),k=o(490),D=o(76749),I=o(61357),_=o(68879),y=o(22857),R=o(69984),Z=o.n(R);const b=(0,m.Z)(p,[["render",s],["__scopeId","data-v-c9a52d8a"]]);var Q=b;Z()(p,"components",{QPage:g.Z,QCard:v.Z,QItemLabel:F.Z,QList:q.Z,QItem:k.Z,QItemSection:D.Z,QAvatar:I.Z,QBtn:_.Z,QIcon:y.Z})}}]);