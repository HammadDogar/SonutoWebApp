(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"37ac":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex-center page"},[s("div",{staticClass:"main-container"},[s("div",{staticClass:"row justify-center q-mt-lg"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"flex justify-between q-mx-md"},[s("h6",{staticClass:"q-ma-none"},[e._v("Manage Roles")]),s("q-btn",{staticClass:"add-button",attrs:{color:"primary",type:"submit",label:"Assign Role",rounded:"","no-caps":""},on:{click:e.openUserDialog}})],1),[s("div",{staticClass:"q-pa-md"},[s("q-table",{staticClass:"my-sticky-header-table custom-table table-responsive",attrs:{data:this.assignedUserList,columns:e.columns,pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body-cell-action",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-btn",{attrs:{dense:"",round:"",flat:"",color:"blue",icon:"edit"},on:{click:function(s){return e.editUser(t)}}}),s("q-btn",{attrs:{dense:"",round:"",flat:"",color:"red",icon:"delete"},on:{click:function(s){return e.removeUser(t)}}})],1)]}}])})],1)]],2)]),s("q-dialog",{model:{value:e.addUserDialog,callback:function(t){e.addUserDialog=t},expression:"addUserDialog"}},[s("q-card",{staticClass:"add-user-modal"},[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[e._v("Assign Role")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"close-btn",attrs:{icon:"close",disabled:e.isLoading,flat:"",round:"",dense:""}})],1),s("q-card-section",[s("q-form",{on:{submit:e.assignRoleFunc}},[s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-12"},[s("q-select",{attrs:{name:"user",options:e.userList,label:"User",readonly:e.isEdit,disable:e.isEdit,"option-value":function(e){return e.id},"option-label":function(e){return e.name},"map-options":"","emit-value":"",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}})],1),s("div",{staticClass:"col-12"},[s("q-select",{attrs:{options:e.userRoleList,"emit-value":"","map-options":"",label:"Role",multiple:"","option-value":function(e){return e.id},"option-label":function(e){return e.Name},rules:[function(e){return!!e||"Field is required"}]},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}})],1),s("div",{staticClass:"col-12 text-right"},[s("q-btn",{staticClass:"add-button",attrs:{color:"primary",type:"submit",label:"Assign",rounded:"",disabled:e.isLoading,"no-caps":""}})],1)])])],1)],1)],1)],1)])},a=[],n=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("456d"),s("9523")),r=s.n(n),o=(s("6b54"),s("06db"),s("2f62")),l=s("2a19");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={data:function(){return{addUserDialog:!1,form:{userId:"",roles:[]},pagination:{rowsPerPage:10},columns:[{name:"username",required:!0,label:"Name",align:"center",format:function(e,t){return"".concat(t.userprofile.firstname+" "+t.userprofile.lastname)}},{name:"id",align:"center",label:"Roles",format:function(e,t){return t.user_roles.map((function(e){return e.Name})).toString()}},{name:"action",align:"center",label:"Action",field:""}],isLoading:!1,isEdit:!1}},computed:d(d({},Object(o["c"])("userprofile",["isAuthenticated","userRoles"])),Object(o["c"])("manageroles",["userList","userRoleList","assignedUserList"])),methods:d(d(d({},Object(o["b"])("manageroles",["getUserRoleList","fetchUserList","assignRole","getAssignedUserList","removeAssignedUser"])),Object(o["b"])("header",["setHeader"])),{},{setHeaderData:function(e,t,s,i,a,n,r,o,l){this.setHeader({hamburgerIcon:e,backIcon:t,title:s,rightIcon1:i,rightIcon2:a,rightLinkText:n,notificationIcon:r,searchIcon:o,fullWidthOnLarge:l})},openUserDialog:function(){this.addUserDialog=!0,this.isEdit=!1},assignCallBack:function(e){"positive"===e&&(this.form={userId:"",roles:[]},this.addUserDialog=!1,this.getAssignedUserList()),this.isLoading=!1,l["a"].create({progress:!0,message:"positive"===e?"Role Assigned Successfully":"Error",type:e})},editUser:function(e){this.form.userId=e.row.id.toString(),this.form.roles=e.row.user_roles.map((function(e){return parseInt(e.id)})),this.isEdit=!0,this.addUserDialog=!0},removeUser:function(e){this.removeAssignedUser({id:e.row.id,callBack:this.deleteCallBack})},assignRoleFunc:function(){this.isLoading=!0;var e=this.form;this.assignRole({payload:e,callBack:this.assignCallBack})},deleteCallBack:function(){l["a"].create({progress:!0,message:"User Un-Assigned Successfully",type:"positive"}),this.getAssignedUserList()}}),mounted:function(){var e;this.getUserRoleList(),this.fetchUserList(),this.getAssignedUserList(),this.setHeaderData(!0,!1,"Manage Roles","","","",!1,!1,!0),(null===(e=this.userRoles)||void 0===e?void 0:e.some((function(e){return 2===e.id})))||this.$router.push("/")},created:function(){}},f=u,p=(s("4154"),s("2877")),g=s("9989"),m=s("9c40"),b=s("eaac"),h=s("db86"),v=s("24e8"),U=s("f09f"),y=s("a370"),q=s("2c91"),C=s("0378"),O=s("ddd8"),w=s("8572"),L=s("0016"),k=s("7f67"),j=s("eebe"),R=s.n(j),D=Object(p["a"])(f,i,a,!1,null,null,null);t["default"]=D.exports;R()(D,"components",{QPage:g["a"],QBtn:m["a"],QTable:b["a"],QTd:h["a"],QDialog:v["a"],QCard:U["a"],QCardSection:y["a"],QSpace:q["a"],QForm:C["a"],QSelect:O["a"],QField:w["a"],QIcon:L["a"]}),R()(D,"directives",{ClosePopup:k["a"]})},4154:function(e,t,s){"use strict";var i=s("a9ed"),a=s.n(i);a.a},a9ed:function(e,t,s){}}]);