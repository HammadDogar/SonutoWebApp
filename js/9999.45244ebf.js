"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[9999],{9999:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var i=n(59835),o=n(86970),r=function(e){return(0,i.dD)("data-v-12765433"),e=e(),(0,i.Cn)(),e},u=["src"],c={class:"row"},l=["onClick"],a={class:"subtitle"},s={key:0},m={class:"row"},d={class:"col"},f={class:"comment",style:{display:"inline-block","word-break":"break-word"}},p=["src"],h=r((function(){return(0,i._)("div",{class:"text-h6"},"Delete comment",-1)})),C=r((function(){return(0,i._)("span",{class:"q-ml-sm"},"Deleting the comment will remove it from the conversation",-1)}));function w(e,t,n,r,w,k){var _=(0,i.up)("q-avatar"),v=(0,i.up)("q-item-section"),g=(0,i.up)("q-card-section"),D=(0,i.up)("q-icon"),W=(0,i.up)("q-item"),y=(0,i.up)("q-list"),b=(0,i.up)("q-menu"),R=(0,i.up)("q-btn"),q=(0,i.up)("q-input"),Z=(0,i.up)("q-card"),Q=(0,i.up)("q-card-actions"),I=(0,i.up)("q-dialog"),$=(0,i.up)("q-page"),x=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)($,{class:"flex"},{default:(0,i.w5)((function(){return[(0,i.Wm)(Z,{class:"my-card",flat:"",bordered:"",style:{width:"100%"}},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.recipe.recipe_comments,(function(n){return(0,i.wg)(),(0,i.j4)(g,{horizontal:"",key:n.id},{default:(0,i.w5)((function(){return[!1!==w.edit||null!==w.selectedComment&&w.selectedComment.id!==n.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(g,{key:0},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{avatar:"",class:"avatar-section"},{default:(0,i.w5)((function(){return[null!=n.userprofile.avatar?((0,i.wg)(),(0,i.j4)(_,{key:0,size:"34px"},{default:(0,i.w5)((function(){return[(0,i._)("img",{src:"".concat(n.userprofile.avatar.url)},null,8,u)]})),_:2},1024)):((0,i.wg)(),(0,i.j4)(_,{key:1,size:"34px",color:"primary","text-color":"white"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,o.zw)(n.userprofile.firstname.charAt(0)),1)]})),_:2},1024))]})),_:2},1024)]})),_:2},1024)),!1!==w.edit||null!==w.selectedComment&&w.selectedComment.id!==n.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(g,{key:1,class:"comment-section"},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,null,{default:(0,i.w5)((function(){return[(0,i._)("div",c,[(0,i._)("div",{class:"title col",onClick:function(e){return k.goToProfile(parseInt(n.userprofile.id))}},(0,o.zw)(n.userprofile.firstname)+" "+(0,o.zw)(n.userprofile.lastname),9,l),(0,i._)("div",a,"("+(0,o.zw)(k.formatDate(n.created_at))+")",1),parseInt(n.userprofile.id)===e.userprofileDetail.id?((0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(R,{color:"grey-7",round:"",flat:"",icon:"app:three-dot-action",size:"8px"},{default:(0,i.w5)((function(){return[(0,i.Wm)(b,{cover:"","auto-close":""},{default:(0,i.w5)((function(){return[(0,i.Wm)(y,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{clickable:"",onClick:function(e){return k.editComment(n),w.edit=!0}},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{avatar:""},{default:(0,i.w5)((function(){return[(0,i.Wm)(D,{name:"create"})]})),_:1}),(0,i.Wm)(v,null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Edit Comment")]})),_:1})]})),_:2},1032,["onClick"]),(0,i.Wm)(W,{clickable:"",onClick:function(e){return k.editComment(n),w.confirm=!0}},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{avatar:""},{default:(0,i.w5)((function(){return[(0,i.Wm)(D,{name:"delete"})]})),_:1}),(0,i.Wm)(v,null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Delete Comment")]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)])):(0,i.kq)("",!0)]),(0,i._)("div",m,[(0,i._)("div",d,[(0,i._)("p",f,(0,o.zw)(n.comment),1)])])]})),_:2},1024)]})),_:2},1024)),parseInt(n.userprofile.id)===e.userprofileDetail.id&&!0===w.edit&&null!=w.selectedComment&&w.selectedComment.id===n.id?((0,i.wg)(),(0,i.j4)(g,{key:2,class:"comment-input",style:{width:"100%","margin-top":"10px"}},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(q,{rounded:"",outlined:"",modelValue:w.selectedComment.comment,"onUpdate:modelValue":t[1]||(t[1]=function(e){return w.selectedComment.comment=e}),placeholder:"Write a Message",dense:w.dense},{before:(0,i.w5)((function(){return[null!=e.userprofileDetail&&null!=e.userprofileDetail.avatar?((0,i.wg)(),(0,i.j4)(_,{key:0,size:"34px"},{default:(0,i.w5)((function(){return[(0,i._)("img",{src:"".concat(e.userprofileDetail.avatar.url)},null,8,p)]})),_:1})):((0,i.wg)(),(0,i.j4)(_,{key:1,size:"34px",color:"primary","text-color":"white"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,o.zw)(e.userDetails.userprofile.firstname.charAt(0)),1)]})),_:1}))]})),after:(0,i.w5)((function(){return[(0,i.Wm)(D,{name:"close",onClick:k.resetEdit,class:"cursor-pointer"},null,8,["onClick"]),(0,i.Wm)(R,{round:"",dense:"",flat:"",icon:"send",onClick:t[0]||(t[0]=function(e){return k.putRecipeComment()}),style:{color:"#6B7BC7"}})]})),_:1},8,["modelValue","dense"])]})),_:1})]})),_:1})):(0,i.kq)("",!0)]})),_:2},1024)})),128))]})),_:1}),(0,i.Wm)(I,{modelValue:w.confirm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.confirm=e}),persistent:""},{default:(0,i.w5)((function(){return[(0,i.Wm)(Z,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(g,{class:"row items-center"},{default:(0,i.w5)((function(){return[h]})),_:1}),(0,i.Wm)(g,{class:"row items-center"},{default:(0,i.w5)((function(){return[C]})),_:1}),(0,i.Wm)(Q,{align:"right"},{default:(0,i.w5)((function(){return[(0,i.wy)((0,i.Wm)(R,{flat:"",label:"Cancel"},null,512),[[x]]),(0,i.wy)((0,i.Wm)(R,{flat:"",label:"Delete",onClick:k.deleteComment},null,8,["onClick"]),[[x]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var k=n(46264),_=n.n(k),v=(n(58665),n(69665),n(4376)),g=n(33100),D={name:"RecipeComment",computed:_()(_()(_()({},(0,g.Se)("userprofile",["userprofiles","userDetails","userprofileDetail"])),(0,g.Se)("recipe",["recipe"])),(0,g.Se)("footer",["footerData"])),mounted:function(){this.setFooterData(!0),this.setHeaderData(!1,!0,"Comment","","","",!0,!0),this.fetchRecipe(this.$route.params.id),this.$emitter.on("saveCommentButtonClick",this.postNewRecipeComment),this.$emitter.on("headerBackButtonClick",this.backButtonClick)},beforeRouteLeave:function(e,t,n){this.setFooterData(!1),this.$emitter.off("saveCommentButtonClick",this.postNewRecipeComment),this.$emitter.off("headerBackButtonClick",this.backButtonClick),n()},components:{},watch:{"$route.params.id":function(e){e&&this.fetchRecipe(e)}},data:function(){return{tab:"",slide:1,autoplay:!0,commentText:"",ph:"",dense:!1,selectedComment:null,confirm:!1,edit:!1}},methods:_()(_()(_()(_()({},(0,g.nv)("header",["setHeader"])),(0,g.nv)("recipe",["fetchRecipe","postRecipeComments","putRecipeComments","deleteRecipeComments","postRecipeLikes","deleteRecipeLikes"])),{},{setHeaderData:function(e,t,n,i,o,r,u,c){this.setHeader({hamburgerIcon:e,backIcon:t,title:n,rightIcon1:i,rightIcon2:o,rightLinkText:r,notificationIcon:u,searchIcon:c})}},(0,g.nv)("footer",["setFooter","addComment"])),{},{setFooterData:function(e){this.setFooter({commentSection:e})},postNewRecipeComment:function(){var e=this;this.postRecipeComments({comment:this.footerData.comment,recipeId:this.$route.params.id,userprofile:this.userprofileDetail.id}).then((function(){e.addComment(""),e.fetchRecipe(e.$route.params.id)}))},formatDate:function(e){return v.ZP.formatDate(e,"DD MMM")+" at "+v.ZP.formatDate(e,"hh.mm A")},editComment:function(e){this.selectedComment=Object.assign({},e)},resetEdit:function(){this.selectedComment=null,this.edit=!1},putRecipeComment:function(){var e=this;this.putRecipeComments(this.selectedComment).then((function(){e.selectedComment=null,e.edit=!1,e.fetchRecipe(e.$route.params.id)}))},deleteComment:function(){var e=this;this.deleteRecipeComments(this.selectedComment.id).then((function(){e.selectedComment=null,e.fetchRecipe(e.$route.params.id)}))},backButtonClick:function(){this.$router.push({path:"/recipe",query:{id:this.$route.params.id}})},goToProfile:function(e){e===this.userDetails.userprofile.id?this.$router.push("/profile"):this.$router.push("/user-profile/"+e)}})},W=n(11639),y=n(69885),b=n(44458),R=n(63190),q=n(76749),Z=n(61357),Q=n(68879),I=n(56362),$=n(13246),x=n(490),z=n(22857),B=n(13119),j=n(32074),S=n(11821),P=n(30627),F=n(18149),U=n(62146),V=n(69984),A=n.n(V);const H=(0,W.Z)(D,[["render",w],["__scopeId","data-v-12765433"]]);var L=H;A()(D,"components",{QPage:y.Z,QCard:b.Z,QCardSection:R.Z,QItemSection:q.Z,QAvatar:Z.Z,QBtn:Q.Z,QMenu:I.Z,QList:$.Z,QItem:x.Z,QIcon:z.Z,QInput:B.Z,QDialog:j.Z,QCardActions:S.Z,QPageSticky:P.Z,QField:F.Z}),A()(D,"directives",{ClosePopup:U.Z})}}]);