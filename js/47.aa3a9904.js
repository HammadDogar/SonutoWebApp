(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[47],{"66ba":function(e,t,o){"use strict";var s=o("91d7"),a=o.n(s);a.a},"91d7":function(e,t,o){},eb6c:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"flex-center",staticStyle:{"background-color":"white"}},[o("div",{staticClass:"main-container"},[o("div",{staticClass:"profile-edit-section"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("q-form",{staticClass:"q-gutter-md"},[o("div",{staticClass:"row user-section"},[o("div",{staticClass:"col"},[o("span",{staticClass:"user-name"},[o("q-input",{attrs:{label:"Title","stack-label":""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),o("q-select",{staticClass:"q-my-md",attrs:{options:e.blogCategory,"emit-value":"","map-options":"",label:"Category",multiple:"","option-value":function(e){return e.id},"option-label":function(e){return e.Name}},model:{value:e.form.categories,callback:function(t){e.$set(e.form,"categories",t)},expression:"form.categories"}}),o("div",{staticClass:"row user-section"},[o("div",{staticClass:"col"},[e.form.isForVlog?o("span",{staticClass:"user-name"},[e._v("\n                      Video\n                    ")]):o("span",{staticClass:"user-name"},[e._v("\n                      Cover photo/video\n                    ")]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[null!=e.form.coverPhoto?o("q-img",{staticStyle:{"max-height":"280px","max-width":"100%"},attrs:{src:""+e.form.coverPhoto,"spinner-color":"white"}}):e._e(),null!=e.form.coverVideo?o("q-video",{staticStyle:{height:"220px",width:"100%"},attrs:{src:""+e.form.coverVideo}}):e._e(),o("div",{staticClass:"fileupload",staticStyle:{"max-width":"100%",height:"46px",padding:"5px 5px",border:"1px #6B7BC7 dotted","text-align":"center"},on:{click:function(t){return e.$refs.file.click()}}},[o("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:[e.form.isForVlog?"video/*":"image/*"]},on:{change:e.onFileChange}}),o("q-btn",{staticClass:"img-icon",attrs:{icon:"app:upload-img",flat:"",round:"",dense:""}}),e.form.isForVlog?o("span",{staticClass:"banner-image"},[e._v(" Upload Video")]):o("span",{staticClass:"banner-image"},[e._v(" Upload Image ")])],1)],1)])])]),e.form.content?o("div",{staticClass:"content",domProps:{innerHTML:e._s(e.form.content)},on:{click:e.startCreatePost}}):o("div",[o("div",{staticStyle:{"margin-top":"1rem"}},[o("q-btn",{staticStyle:{height:"70px",width:"100% !important"},attrs:{outline:"",align:"left","no-caps":"",label:"Start creating your post..."},on:{click:e.startCreatePost}})],1)]),e.form.isForVlog?e._e():o("q-select",{staticStyle:{width:"100% !important"},attrs:{label:"Labels","use-input":"","use-chips":"",multiple:"",options:e.allKeywords},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"app:question-mark"}})]},proxy:!0}],null,!1,3822986967),model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1)])])],1)])]),o("q-dialog",{attrs:{position:"bottom"},model:{value:e.saveDraftDialog,callback:function(t){e.saveDraftDialog=t},expression:"saveDraftDialog"}},[o("BlogAction",{attrs:{isForVlog:e.form.isForVlog},on:{"clicked-selected-Option":e.clickedSelectedOptionModal}})],1)],1),o("q-dialog",{model:{value:e.successfulModal,callback:function(t){e.successfulModal=t},expression:"successfulModal"}},[o("BlogSuccessMessage",{attrs:{messageType:e.blogMessageType,isVlog:e.form.isForVlog}})],1),o("q-dialog",{model:{value:e.updateModal,callback:function(t){e.updateModal=t},expression:"updateModal"}},[o("q-card",{staticClass:"popup"},[o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("div",{staticClass:"text-h6 col-md-6"},[o("b",[e._v("Updated")])]),o("q-space"),o("div",{staticClass:"text-h6 col-md-6 close"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.gotoblgArticleList}})],1)],1),o("div",{staticClass:"row"},[o("div",{staticClass:"text-h6 col",staticStyle:{"text-align":"center"}},[o("q-icon",{staticClass:"success col-md-12",attrs:{name:"app:successful"}})],1)]),o("q-card-section",{staticClass:"success-msg"},[o("p",[e._v(" Your\n          "),e.form.isForVlog?o("span",[e._v("Vlog")]):o("span",[e._v("Blog")]),e._v("\n          has been updated successfully.\n        ")])]),o("div",{staticClass:"flex flex-center more-info-item"},[o("q-btn",{attrs:{color:"primary",label:"Done",rounded:"","no-caps":""},on:{click:e.gotoblgArticleList}})],1)],1)],1),o("q-dialog",{attrs:{position:"bottom"},model:{value:e.blogDeleteModel,callback:function(t){e.blogDeleteModel=t},expression:"blogDeleteModel"}},[o("q-card",{staticClass:"roundedNewsFeed"},[o("div",{staticClass:"row items-center no-wrap",staticStyle:{"margin-bottom":"30px"}},[o("div",{staticClass:"col"},[o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("div",{staticClass:"text-h6"},[e._v("Delete "),!0===e.form.isForVlog?o("span",[e._v("Vlog")]):o("span",[e._v("Blog")])]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("p",{staticClass:"col-12"},[e._v("\n              Are you sure you want to delete this "),!0===e.form.isForVlog?o("span",[e._v("vlog")]):o("span",[e._v("blog")]),e._v("?\n            ")])]),o("div",{staticClass:"col-12 text-center"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-6 text-center"},[o("q-btn",{staticClass:"button default-button",staticStyle:{color:"#000000",width:"90%"},attrs:{label:"Cancel","no-caps":"",outline:"",color:"primary"},on:{click:function(t){return e.deleteConfirmationChoice("cancel")}}})],1),o("div",{staticClass:"col-6 text-center"},[o("q-btn",{staticClass:"button default-button",staticStyle:{width:"90%"},attrs:{color:"primary",label:"Confirm","no-caps":""},on:{click:function(t){return e.deleteConfirmationChoice("confirm")}}})],1)])])],1)])])],1)],1)},a=[],i=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("456d"),o("a34a")),r=o.n(i),l=(o("551c"),o("96cf"),o("c973")),n=o.n(l),c=(o("6b54"),o("06db"),o("28a5"),o("6762"),o("2fdb"),o("f751"),o("9523")),d=o.n(c),u=o("2f62"),g=o("2a19"),p=o("a2d8"),h=o("f19a");function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){d()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var v={name:"CreatePost",data:function(){return{form:{id:0,title:"",content:"",label:null,coverPhoto:null,coverVideo:null,isForVlog:!1,categories:[]},blogCoverPhoto:null,blogMessageType:"Published",successfulModal:!1,saveDraftDialog:!1,allKeywords:[],updateModal:!1,blogDeleteModel:!1,posterImage:null}},components:{BlogSuccessMessage:p["a"],BlogAction:h["a"]},created:function(){this.$root.$on("headerRightIcon1Click",this.openSaveDialog),this.$root.$on("headerBackButtonClick",this.backButtonClick)},beforeDestroy:function(){this.$root.$off("headerRightIcon1Click",this.openSaveDialog),this.$root.$off("headerBackButtonClick",this.backButtonClick)},computed:m(m({},Object(u["c"])("userprofile",["userDetails"])),Object(u["c"])("blog",["blog","blogs","CreateBlog","keywords","blogCategory"])),mounted:function(){var e,t,o,s,a=this;!0===(null===(e=this.$route)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.isForVlog)&&(this.form.isForVlog=!0),this.setHeaderData(!1,!0,(null===(o=this.$route)||void 0===o||null===(s=o.query)||void 0===s?void 0:s.isForVlog)?"Create Vlog":"Create Blog","three-dots-icon",!1,"",!1,!1),this.fetchKeywords().then((function(){a.allKeywords=a.keywords,a.filterOptions=a.keywords})),null!==this.CreateBlog&&(this.form=Object.assign({},this.CreateBlog),this.blogCoverPhoto=this.CreateBlog.blogCoverPhoto,this.posterImage=this.CreateBlog.posterImage),this.fetchBlogCategory()},methods:m(m(m({},Object(u["b"])("blog",["postBlog","storeContent","fetchKeywords","fetchBlogCategory","PutBlog","deleteBlog"])),Object(u["b"])("header",["setHeader"])),{},{setHeaderData:function(e,t,o,s,a,i,r,l){this.setHeader({hamburgerIcon:e,backIcon:t,title:o,rightIcon1:s,rightIcon2:a,rightLinkText:i,notificationIcon:r,searchIcon:l})},saveBlog:function(e){var t=this;this.form.isForVlog&&null===this.form.coverVideo&&"Submitted"===e?g["a"].create({progress:!0,message:"Please Upload Video",type:"negative"}):""!==this.form.title||"Submitted"!==e?this.form.isForVlog||null!==this.form.coverPhoto||"Submitted"!==e?0!==this.form.categories.length||"Submitted"!==e?(e||(e="Submitted"),this.blogMessageType=e,this.form.categories.includes(1)||this.form.categories.push(1),0===parseInt(this.form.id)?this.postBlog({user:this.userDetails.userprofile.id,form:this.form,status:e,file:this.blogCoverPhoto,poster:this.posterImage}).then((function(e){t.successfulModal=!0})):this.PutBlog({user:this.userDetails.userprofile.id,form:this.form,file:this.blogCoverPhoto,status:e,poster:this.posterImage}).then((function(e){t.updateModal=!0}))):g["a"].create({progress:!0,message:"Please select at least one category",type:"negative"}):g["a"].create({progress:!0,message:"Please Add Cover Photo",type:"negative"}):g["a"].create({progress:!0,message:"Please Add Title",type:"negative"})},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.blogCoverPhoto=t[0],"image"===t[0].type.split("/")[0]?(this.createImage(t[0]),this.form.coverVideo=null):(this.validateVideoFile(t[0]),this.form.coverPhoto=null))},createImage:function(e){var t=this,o=new FileReader;o.onload=function(e){t.form.coverPhoto=e.target.result},o.readAsDataURL(e)},createVideo:function(e){var t=URL.createObjectURL(e);this.form.coverVideo=t},openSaveDialog:function(){this.saveDraftDialog=!0},action:function(e){this.$emit("clicked-selected-Option",e)},clickedSelectedOptionModal:function(e){switch(e){case"Edit":this.startCreatePost();break;case"Submit":this.saveBlog("Submitted");break;case"Draft":this.saveBlog("Drafts");break;case"Delete":this.blogDeleteModel=!0;break;case"Discard":this.saveDraftDialog=!1,this.form.id=0,this.form.title="",this.form.content="",this.form.label=null,this.form.coverPhoto=null,this.form.coverVideo=null,this.blogCoverPhoto=null;break}},backButtonClick:function(){this.$router.push("dashboard")},startCreatePost:function(){var e=this;this.storeContent({form:this.form,file:this.blogCoverPhoto,poster:this.posterImage}).then((function(){e.$router.push("create-post-detail")}))},validateVideoFile:function(e){var t=this,o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=function(){parseInt(o.duration.toString().split(".")[0])<301?(t.form.coverVideo=o.src,t.createThumbnail()):(t.blogCoverPhoto=null,g["a"].create({progress:!0,message:"Video Should be less than 5 mints",type:"negative"}))},o.src=URL.createObjectURL(e)},createThumbnail:function(){var e=this;return n()(r.a.mark((function t(){var o,s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=new FileReader,o.readAsDataURL(e.blogCoverPhoto),s=function(t){t&&(e.posterImage=t)},o.onloadend=n()(r.a.mark((function e(){var t,a,i,l,n,c,d;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.result,a=document.createElement("video"),i=document.createElement("canvas"),a.style.display="none",i.style.display="none",e.next=7,new Promise((function(e,o){a.addEventListener("loadedmetadata",(function(){a.width=a.videoWidth,a.height=a.videoHeight,i.width=a.videoWidth,i.height=a.videoHeight,a.currentTime=.25*a.duration})),a.addEventListener("seeked",(function(){return e()})),a.src=t}));case 7:return i.getContext("2d").drawImage(a,0,0,a.videoWidth,a.videoHeight),l=i.toDataURL("image/png"),e.next=11,fetch(l);case 11:return n=e.sent,e.next=14,n.blob();case 14:c=e.sent,d=new File([c],"poster",{type:"image/png"}),this.posterImage=d,s(d);case 18:case"end":return e.stop()}}),e,this)})));case 4:case"end":return t.stop()}}),t)})))()},gotoblgArticleList:function(){this.form.isForVlog?this.$router.push({name:"blog-articles",params:{tab:this.blogMessageType},query:{isForVlog:"true"}}):this.$router.push({name:"blog-articles",params:{tab:this.blogMessageType}})},deleteConfirmationChoice:function(e){var t=this;"confirm"===e?this.deleteBlog(parseInt(this.form.id)).then((function(){t.blogDeleteModel=!1,g["a"].create({progress:!0,message:"Blog Deleted Successfully",type:"positive"}),t.gotoblgArticleList()})):this.blogDeleteModel=!1}})},b=v,C=(o("66ba"),o("2877")),y=o("9989"),w=o("0378"),k=o("27f9"),D=o("ddd8"),P=o("068f"),x=o("6ac0"),V=o("9c40"),q=o("0016"),S=o("24e8"),B=o("f09f"),O=o("a370"),F=o("2c91"),M=o("7f67"),I=o("eebe"),_=o.n(I),$=Object(C["a"])(b,s,a,!1,null,"37351349",null);t["default"]=$.exports;_()($,"components",{QPage:y["a"],QForm:w["a"],QInput:k["a"],QSelect:D["a"],QImg:P["a"],QVideo:x["a"],QBtn:V["a"],QIcon:q["a"],QDialog:S["a"],QCard:B["a"],QCardSection:O["a"],QSpace:F["a"]}),_()($,"directives",{ClosePopup:M["a"]})}}]);