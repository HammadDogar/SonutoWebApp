"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[1921],{14734:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var l=n(59835),a=n(86970),i=function(e){return(0,l.dD)("data-v-8c7faaf6"),e=e(),(0,l.Cn)(),e},r={class:"main-container"},o={class:"flex flex-center"},u={class:"flex flex-center edit-circle-icon"},s=i((function(){return(0,l._)("div",{class:"flex flex-center profile-photo-header"}," Profile Photo ",-1)})),c={class:"profile-edit-section"},f={class:"row"},d=i((function(){return(0,l._)("div",{class:"col-12 input-label"}," First Name ",-1)})),m={class:"col-12"},p=i((function(){return(0,l._)("div",{class:"col-12 input-label"}," Last Name ",-1)})),h={class:"col-12"},g=i((function(){return(0,l._)("div",{class:"col-12 input-label"}," Country ",-1)})),v={class:"col-12"},x=i((function(){return(0,l._)("div",{class:"col-12 input-label"}," Home Town ",-1)})),y={class:"col-12"},k=i((function(){return(0,l._)("div",{class:"col-12 input-label"}," School/College/University ",-1)})),b={class:"col-12"},_=i((function(){return(0,l._)("div",{class:"col-12 input-label"}," Employer ",-1)})),C={class:"col-12"},S=i((function(){return(0,l._)("div",{class:"col-12 input-label"}," Occupation ",-1)})),V={class:"col-12"},D={id:"image-box",ref:"fullscreenElement"};function w(e,t,n,i,w,F){var I=(0,l.up)("q-img"),B=(0,l.up)("q-avatar"),W=(0,l.up)("q-btn"),U=(0,l.up)("q-input"),Z=(0,l.up)("q-select"),$=(0,l.up)("FullScreen"),q=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(q,{class:"flex flex-center page"},{default:(0,l.w5)((function(){return[(0,l._)("div",r,[(0,l._)("div",o,[null!=w.form.avatar&&null!=w.form.avatar.url?((0,l.wg)(),(0,l.j4)(I,{key:0,src:"".concat(w.form.avatar.url),"spinner-color":"white",class:"rounded-borders profile-img",onClick:t[0]||(t[0]=function(e){return F.getfullScreen(w.form)})},null,8,["src"])):w.form.firstname?((0,l.wg)(),(0,l.j4)(B,{key:1,style:{height:"126px",width:"126px"},color:"primary","text-color":"white"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,a.zw)(w.form.firstname.charAt(0))+" "+(0,a.zw)(w.form.lastname.charAt(0)),1)]})),_:1})):(0,l.kq)("",!0)]),(0,l._)("input",{type:"file",ref:"file",style:{display:"none"},accept:"image/png, image/gif, image/jpeg",onChange:t[1]||(t[1]=function(){return F.onFileChange&&F.onFileChange.apply(F,arguments)})},null,544),(0,l._)("div",u,[(0,l.Wm)(W,{flat:"",icon:"app:filled-circle",size:"14px","no-caps":"",onClick:t[2]||(t[2]=function(t){return e.$refs.file.click()})})]),s,(0,l._)("div",c,[(0,l._)("div",f,[d,(0,l._)("div",m,[(0,l.Wm)(U,{borderless:"",class:"input-control",modelValue:w.form.firstname,"onUpdate:modelValue":t[3]||(t[3]=function(e){return w.form.firstname=e}),"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},rules:[function(e){return!!e||"Field is required"}],onKeyup:t[4]||(t[4]=function(e){return F.validateSpace("firstname")})},null,8,["modelValue","rules"])]),p,(0,l._)("div",h,[(0,l.Wm)(U,{borderless:"",class:"input-control",modelValue:w.form.lastname,"onUpdate:modelValue":t[5]||(t[5]=function(e){return w.form.lastname=e}),"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},rules:[function(e){return!!e||"Field is required"}],onKeyup:t[6]||(t[6]=function(e){return F.validateSpace("lastname")})},null,8,["modelValue","rules"])]),g,(0,l._)("div",v,[(0,l.Wm)(Z,{class:"input-control country-select",modelValue:w.form.country,"onUpdate:modelValue":t[7]||(t[7]=function(e){return w.form.country=e}),options:e.countries,"emit-value":"","map-options":"",filled:"","input-style":{height:"46px",padding:"0px 5px"},rules:[function(e){return!!e||"Field is required"}],style:{"padding-left":"5px"}},null,8,["modelValue","options","rules"])]),x,(0,l._)("div",y,[(0,l.Wm)(U,{borderless:"",class:"input-control",modelValue:w.form.hometown,"onUpdate:modelValue":t[8]||(t[8]=function(e){return w.form.hometown=e}),"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},onKeyup:t[9]||(t[9]=function(e){return F.validateSpace("hometown")})},null,8,["modelValue"])]),k,(0,l._)("div",b,[(0,l.Wm)(U,{borderless:"",class:"input-control",modelValue:w.form.school,"onUpdate:modelValue":t[10]||(t[10]=function(e){return w.form.school=e}),"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},onKeyup:t[11]||(t[11]=function(e){return F.validateSpace("school")})},null,8,["modelValue"])]),_,(0,l._)("div",C,[(0,l.Wm)(U,{borderless:"",class:"input-control",modelValue:w.form.employer,"onUpdate:modelValue":t[12]||(t[12]=function(e){return w.form.employer=e}),"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},onKeyup:t[13]||(t[13]=function(e){return F.validateSpace("employer")})},null,8,["modelValue"])]),S,(0,l._)("div",V,[(0,l.Wm)(U,{borderless:"",class:"input-control",modelValue:w.form.occupation,"onUpdate:modelValue":t[14]||(t[14]=function(e){return w.form.occupation=e}),"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},onKeyup:t[15]||(t[15]=function(e){return F.validateSpace("occupation")})},null,8,["modelValue"])])])])]),(0,l._)("div",D,[(0,l.Wm)($,{details:w.fullscreendata},null,8,["details"])],512)]})),_:1})}var F=n(46264),I=n.n(F),B=(n(58665),n(34442),n(69665),n(62590),n(11476),n(32119),n(33100)),W=n(4376),U=n(6827),Z=n(43038),$={created:function(){this.$emitter.on("headerBackButtonClick",this.backButtonClick),this.$emitter.on("headerRightButtonClick",this.save),this.$emitter.on("onformatDateClick",this.formatDate),this.$emitter.on("onExitFullscreen",this.closeFullScreen)},beforeUnmount:function(){this.$emitter.off("headerBackButtonClick",this.backButtonClick),this.$emitter.off("headerRightButtonClick",this.save),this.$emitter.off("onformatDateClick",this.formatDate),this.$emitter.off("onExitFullscreen",this.closeFullScreen)},computed:I()(I()(I()({},(0,B.Se)("config",["baseUrl"])),(0,B.Se)("userprofile",["userprofileDetail"])),(0,B.Se)("country",["countries"])),components:{FullScreen:Z.Z},data:function(){return{loading:!1,form:{id:"",FirstName:"",LastName:"",country:"",School:"",Employer:"",Occupation:"",Avatar:null,hometown:""},profileImage:null,fullscreendata:{url:null,userprofile:"",feedtext:"",created_at:"",likeLength:"",commentLength:"",id:"",likeIcon:"",hideBack:!1}}},mounted:function(){this.setHeaderData(!1,!0,"Edit Profile","","","Save",!1,!1),0===this.countries.length&&this.getCountry(),this.form=Object.assign({},this.userprofileDetail,{avatar:Object.assign({},this.userprofileDetail.avatar)}),this.form.country=this.userprofileDetail.country},methods:I()(I()(I()(I()({},(0,B.nv)("country",["fetchCountries"])),(0,B.nv)("userprofile",["updateUserDetails"])),(0,B.nv)("header",["setHeader"])),{},{onFileChange:function(e){var t=e.target.files||e.dataTransfer.files,n=t[0].size/1024/1024;if(n>2)return U.Z.create({progress:!0,message:"please select profile photo less than 2 MB",type:"negative"}),!1;t.length&&(this.profileImage=t[0],this.createImage(t[0]))},createImage:function(e){var t=this,n=new FileReader;n.onload=function(e){0!==Object.keys(t.form.avatar).length||(t.form.avatar=Object.assign({})),t.form.avatar.url=e.target.result},n.readAsDataURL(e)},setHeaderData:function(e,t,n,l,a,i,r,o){this.setHeader({hamburgerIcon:e,backIcon:t,title:n,rightIcon1:l,rightIcon2:a,rightLinkText:i,notificationIcon:r,searchIcon:o})},getCountry:function(){this.fetchCountries()},save:function(){this.form.firstname&&this.form.lastname&&this.form.country&&this.updateUserDetails({file:this.profileImage,userDetail:this.form,afterSuccess:this.backButtonClick})},backButtonClick:function(){this.$router.push("profile")},formatDate:function(e){return W.ZP.formatDate(e,"DD MMM")+" at "+W.ZP.formatDate(e,"hh.mm A")},closeFullScreen:function(){if(document.exitFullscreen){document.exitFullscreen();var e=document.getElementById("image-box");e.setAttribute("style","display:none;"),this.fullscreendata.hideBack=!0}},getfullScreen:function(e){this.fullscreendata.hideBack=!1,this.fullscreendata.url=e.avatar.url,this.fullscreendata.name=e.firstname+" "+e.lastname,this.fullscreendata.feedtext=null,this.fullscreendata.created_at=null,this.fullscreendata.likeLength=null,this.fullscreendata.commentLength=null,this.fullscreendata.id=null,this.fullscreendata.likeIcon=null;var t=document.getElementById("image-box");t.setAttribute("style","display:flex;");var n=this.$refs.fullscreenElement;this.$q.fullscreen.toggle(n).then((function(){})).catch((function(e){alert(e)}))},validateSpace:function(e){/^\s/.test(this.form[e])&&(this.form[e]="")}})},q=n(11639),E=n(69885),j=n(91487),A=n(61357),L=n(68879),Q=n(13119),K=n(32259),O=n(18149),P=n(69984),H=n.n(P);const z=(0,q.Z)($,[["render",w],["__scopeId","data-v-8c7faaf6"]]);var M=z;H()($,"components",{QPage:E.Z,QImg:j.Z,QAvatar:A.Z,QBtn:L.Z,QInput:Q.Z,QSelect:K.Z,QField:O.Z})}}]);