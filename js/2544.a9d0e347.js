"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[2544],{82544:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var o=n(59835),i=n(86970),s=function(e){return(0,o.dD)("data-v-4005f54f"),e=e(),(0,o.Cn)(),e},r=["onClick"],a={class:"col-10"},l={class:"row items-center inbox-row"},c={class:"col-12"},u={class:"row items-center"},d=["onClick"],p={class:"title"},f={class:"col-3",style:{"text-align":"right"}},m={class:"row"},h=["onClick"],g={class:"message"},v={key:0},b={key:1,class:"message"},w={class:"col-3 flex items-center justify-end",style:{"text-align":"right"}},x={key:0,class:"unread-count"},_={class:"msg-time"},C={class:"col-10"},k={key:0,class:"no-messages-section"},I=s((function(){return(0,o._)("h6",{class:"text-center q-mb-md"},"No Chat Found",-1)})),D=s((function(){return(0,o._)("p",{class:"text-center"},"Start follow people to see your conversations here",-1)})),y=[I,D];function W(e,t,n,s,I,D){var W=this,M=(0,o.up)("q-img"),S=(0,o.up)("q-avatar"),O=(0,o.up)("q-item-section"),Z=(0,o.up)("q-btn"),q=(0,o.up)("q-card-section"),Q=(0,o.up)("q-separator"),F=(0,o.up)("ChatInboxOption"),j=(0,o.up)("q-dialog"),z=(0,o.up)("InboxWarning"),A=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(A,{class:"inbox-card"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(W.inboxes,(function(t){return(0,o.wg)(),(0,o.iD)("div",{class:"page row items-center justify-end inbox-row",key:t.id},[(0,o._)("div",{class:"col-2",onClick:function(e){return D.goToChat(t)}},[(0,o.Wm)(O,{avatar:"",class:"avatar-section"},{default:(0,o.w5)((function(){return[(t.userFirst.id!=e.userDetails.id&&t.userFirst.userprofile.avatar&&t.userFirst.userprofile.avatar.url?t.userFirst.userprofile.avatar.url:t.userSecond.userprofile.avatar&&t.userSecond.userprofile.avatar.url)?((0,o.wg)(),(0,o.j4)(S,{key:0,size:"38px"},{default:(0,o.w5)((function(){return[(0,o.Wm)(M,{src:"".concat(t.userFirst.id!=e.userDetails.id&&t.userFirst.userprofile.avatar&&t.userFirst.userprofile.avatar.url?t.userFirst.userprofile.avatar.url:t.userSecond.userprofile.avatar&&t.userSecond.userprofile.avatar.url)},null,8,["src"])]})),_:2},1024)):((0,o.wg)(),(0,o.j4)(S,{key:1,color:"primary","text-color":"white"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(t.userFirst.id!=e.userDetails.id?t.userFirst.userprofile.firstname:t.userSecond.userprofile.firstname.charAt(0)),1)]})),_:2},1024))]})),_:2},1024)],8,r),(0,o._)("div",a,[(0,o.Wm)(q,{horizontal:"",class:"messagesection"},{default:(0,o.w5)((function(){return[(0,o.Wm)(O,null,{default:(0,o.w5)((function(){return[(0,o._)("div",l,[(0,o._)("div",c,[(0,o._)("div",u,[(0,o._)("div",{class:"col-9",onClick:function(e){return D.goToChat(t)}},[(0,o._)("div",p,(0,i.zw)(t.userFirst.id!=e.userDetails.id?t.userFirst.userprofile.firstname+" "+t.userFirst.userprofile.lastname:t.userSecond.userprofile.firstname+" "+t.userSecond.userprofile.lastname),1)],8,d),(0,o._)("div",f,[(0,o.Wm)(Z,{class:"options-btn",color:"grey-7",round:"",flat:"",icon:"app:three-dots",onClick:function(e){return D.openChatInboxOptionModel(t.id)}},null,8,["onClick"])])]),(0,o._)("div",m,[(0,o._)("div",{class:"col-9",onClick:function(e){return D.goToChat(t)}},[t.lastMessage.length>0?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,i.C_)(["message-column-width",[t.unreadMessages.length>0&&"bold"]])},[(0,o._)("div",g,[t.lastMessage[0].fromUser.id==e.userDetails.id?((0,o.wg)(),(0,o.iD)("span",v," You: ")):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,i.zw)(t.lastMessage[0].text),1)])],2)):((0,o.wg)(),(0,o.iD)("div",b," No Messages, Start conversation "))],8,h),(0,o._)("div",w,[t.unreadMessages.length>0?((0,o.wg)(),(0,o.iD)("span",x,(0,i.zw)(t.unreadMessages.length),1)):(0,o.kq)("",!0),(0,o._)("div",_,(0,i.zw)(t.lastMessage.length>0?D.formatDate(t.lastMessage[0].created_at):""),1)])])])])]})),_:2},1024)]})),_:2},1024)]),(0,o._)("div",C,[(0,o.Wm)(Q)])])})),128)),e.inboxes.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",k,y)),(0,o.Wm)(j,{modelValue:e.inboxOptionModal,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.inboxOptionModal=t}),position:"bottom"},{default:(0,o.w5)((function(){return[(0,o.Wm)(F,{onClickedSelectedOption:D.clickedSelectedOptionModal},null,8,["onClickedSelectedOption"])]})),_:1},8,["modelValue"]),(0,o.Wm)(j,{modelValue:e.inboxWarningModal,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.inboxWarningModal=t}),position:"bottom"},{default:(0,o.w5)((function(){return[(0,o.Wm)(z,{onDeleteSelectedOption:D.deleteSelectedOption},null,8,["onDeleteSelectedOption"])]})),_:1},8,["modelValue"])]})),_:1})}var M=n(46264),S=n.n(M),O=(n(69665),n(6827)),Z=n(4376),q=n(33100),Q={class:"row items-center no-wrap"},F={class:"col"},j={class:"icon-div"};function z(e,t,n,i,s,r){var a=(0,o.up)("q-icon"),l=(0,o.up)("q-item-section"),c=(0,o.up)("q-item"),u=(0,o.up)("q-list"),d=(0,o.up)("q-card"),p=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(d,{class:"roundedNewsFeed"},{default:(0,o.w5)((function(){return[(0,o._)("div",null,[(0,o._)("hr",{class:"hr",onClick:t[0]||(t[0]=function(){return r.closeActionDialog&&r.closeActionDialog.apply(r,arguments)})})]),(0,o._)("div",Q,[(0,o._)("div",F,[(0,o.Wm)(u,{bordered:"",padding:"",class:"rounded-borders",style:{width:"100%","padding-bottom":"45px"}},{default:(0,o.w5)((function(){return[(0,o.wy)(((0,o.wg)(),(0,o.j4)(c,{clickable:"",onClick:t[1]||(t[1]=function(e){return r.action("delete")}),"active-class":"my-menu-link"},{default:(0,o.w5)((function(){return[(0,o._)("div",j,[(0,o.Wm)(l,{avatar:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(a,{class:"icon-img",name:"app:post-notification"})]})),_:1})]),(0,o.Wm)(l,{class:"option"},{default:(0,o.w5)((function(){return[(0,o.Uk)("Delete")]})),_:1})]})),_:1})),[[p]])]})),_:1})])])]})),_:1})}var A={name:"ChatInboxOption",methods:{action:function(e){this.$emit("clicked-selected-Option",e)},closeActionDialog:function(){this.$emitter.emit("closeInboxChatOption")}}},T=n(11639),U=n(44458),V=n(13246),H=n(490),N=n(76749),$=n(22857),B=n(51136),L=n(69984),P=n.n(L);const Y=(0,T.Z)(A,[["render",z],["__scopeId","data-v-290b73e2"]]);var K=Y;P()(A,"components",{QCard:U.Z,QList:V.Z,QItem:H.Z,QItemSection:N.Z,QIcon:$.Z}),P()(A,"directives",{Ripple:B.Z});var R=function(e){return(0,o.dD)("data-v-308166de"),e=e(),(0,o.Cn)(),e},E={class:"row items-center no-wrap",style:{"margin-bottom":"30px"}},G={class:"col"},J=R((function(){return(0,o._)("div",{class:"text-h6"},"Delete Chat",-1)})),X=R((function(){return(0,o._)("p",{class:"col-12"}," Are you sure you want to delete this chat? It can't be undone. ",-1)})),ee={class:"col-12 text-center"},te={class:"row"},ne={class:"col-6 text-center"},oe={class:"col-6 text-center"};function ie(e,t,n,i,s,r){var a=(0,o.up)("q-space"),l=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-card"),d=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(u,{class:"roundedNewsFeed"},{default:(0,o.w5)((function(){return[(0,o._)("div",E,[(0,o._)("div",G,[(0,o.Wm)(c,{class:"row items-center q-pb-none"},{default:(0,o.w5)((function(){return[J,(0,o.Wm)(a),(0,o.wy)((0,o.Wm)(l,{icon:"close",flat:"",round:"",dense:""},null,512),[[d]])]})),_:1}),(0,o.Wm)(c,{class:"row items-center q-pb-none"},{default:(0,o.w5)((function(){return[X]})),_:1}),(0,o._)("div",ee,[(0,o._)("div",te,[(0,o._)("div",ne,[(0,o.Wm)(l,{label:"Cancel",class:"button default-button","no-caps":"",outline:"",color:"primary",style:{color:"#000000",width:"90%"},onClick:t[0]||(t[0]=function(e){return r.confirmChoice("cancel")})})]),(0,o._)("div",oe,[(0,o.Wm)(l,{color:"primary",style:{width:"90%"},label:"Confirm",class:"button default-button","no-caps":"",onClick:t[1]||(t[1]=function(e){return r.confirmChoice("confirm")})})])])])])])]})),_:1})}var se={name:"InboxWarning",methods:{confirmChoice:function(e){this.$emit("delete-selected-option",e)}}},re=n(63190),ae=n(90136),le=n(68879),ce=n(62146);const ue=(0,T.Z)(se,[["render",ie],["__scopeId","data-v-308166de"]]);var de=ue;P()(se,"components",{QCard:U.Z,QCardSection:re.Z,QSpace:ae.Z,QBtn:le.Z}),P()(se,"directives",{ClosePopup:ce.Z});var pe={name:"inbox",data:function(){return{loading:!1,form:{NewsFeedText:""},inboxOptionModal:!1,inboxWarningModal:!1,selectedInbox:null,dummyData:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}},components:{ChatInboxOption:K,InboxWarning:de},computed:S()(S()({},(0,q.Se)("userprofile",["userDetails"])),(0,q.Se)("chat",["inboxes"])),created:function(){this.$emitter.on("closeInboxChatOption",this.existInboxChatOption)},mounted:function(){this.setHeaderData(!0,!1,"Inbox","","","",!0,!0),this.fetchInboxes(this.userDetails.id)},methods:S()(S()(S()({},(0,q.nv)("header",["setHeader"])),(0,q.nv)("chat",["fetchInboxes","deleteInbox"])),{},{setHeaderData:function(e,t,n,o,i,s,r,a){this.setHeader({hamburgerIcon:e,backIcon:t,title:n,rightIcon1:o,rightIcon2:i,rightLinkText:s,notificationIcon:r,searchIcon:a})},openChatInboxOptionModel:function(e){this.selectedInbox=e,this.inboxOptionModal=!0},clickedSelectedOptionModal:function(e){this.inboxOptionModal=!1,"delete"===e&&(this.inboxWarningModal=!0)},existInboxChatOption:function(){this.selectedInbox=null,this.inboxOptionModal=!1},goToChat:function(e){this.$router.push("/chat/"+e.id)},formatDate:function(e){return Z.ZP.formatDate(e,"DD MMM")},deleteSelectedOption:function(e){var t=this;"cancel"===e?(this.selectedInbox=null,this.inboxWarningModal=!1):this.deleteInbox(parseInt(this.selectedInbox)).then((function(){t.selectedInbox=null,t.inboxWarningModal=!1,O.Z.create({progress:!0,message:"Chat Deleted",type:"positive"})}))}})},fe=n(61357),me=n(91487),he=n(50926),ge=n(32074);const ve=(0,T.Z)(pe,[["render",W],["__scopeId","data-v-4005f54f"]]);var be=ve;P()(pe,"components",{QCard:U.Z,QItemSection:N.Z,QAvatar:fe.Z,QImg:me.Z,QCardSection:re.Z,QBtn:le.Z,QSeparator:he.Z,QDialog:ge.Z})}}]);