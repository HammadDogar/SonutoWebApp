(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{1157:function(e,t,o){"use strict";var a=o("627a"),s=o.n(a);s.a},4839:function(e,t,o){"use strict";var a=o("c7b5"),s=o.n(a);s.a},"627a":function(e,t,o){},c7b5:function(e,t,o){},eb6c:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"flex-center",staticStyle:{"background-color":"white"}},[o("div",{staticClass:"main-container"},[o("div",{staticClass:"profile-edit-section"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("q-form",{staticClass:"q-gutter-md"},[o("div",{staticClass:"row user-section"},[o("div",{staticClass:"col"},[o("span",{staticClass:"user-name"},[o("q-input",{attrs:{label:"Title","stack-label":""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),o("q-select",{staticClass:"q-my-md",attrs:{options:e.blogCategory,"emit-value":"","map-options":"",label:"Category",multiple:"","option-value":function(e){return e.id},"option-label":function(e){return e.Name}},model:{value:e.form.categories,callback:function(t){e.$set(e.form,"categories",t)},expression:"form.categories"}}),o("div",{staticClass:"row user-section"},[o("div",{staticClass:"col"},[e.form.isForVlog?o("span",{staticClass:"user-name"},[e._v("\n                      Video\n                    ")]):o("span",{staticClass:"user-name"},[e._v("\n                      Cover photo/video\n                    ")]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[null!=e.form.coverPhoto?o("q-img",{staticStyle:{"max-height":"280px","max-width":"100%"},attrs:{src:""+e.form.coverPhoto,"spinner-color":"white"}}):e._e(),null!=e.form.coverVideo?o("q-video",{staticStyle:{height:"220px",width:"100%"},attrs:{src:""+e.form.coverVideo}}):e._e(),o("div",{staticClass:"fileupload",staticStyle:{"max-width":"100%",height:"46px",padding:"5px 5px",border:"1px #6B7BC7 dotted","text-align":"center"},on:{click:function(t){return e.$refs.file.click()}}},[o("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:[e.form.isForVlog?"video/*":"image/*"]},on:{change:e.onFileChange}}),o("q-btn",{staticClass:"img-icon",attrs:{icon:"app:upload-img",flat:"",round:"",dense:""}}),e.form.isForVlog?o("span",{staticClass:"banner-image"},[e._v(" Upload Video")]):o("span",{staticClass:"banner-image"},[e._v(" Upload Image ")])],1)],1)])])]),e.form.content?o("div",{staticClass:"content",domProps:{innerHTML:e._s(e.form.content)},on:{click:e.startCreatePost}}):o("div",[o("div",{staticStyle:{"margin-top":"1rem"}},[o("q-btn",{staticStyle:{height:"70px",width:"100% !important"},attrs:{outline:"",align:"left","no-caps":"",label:"Start creating your post..."},on:{click:e.startCreatePost}})],1)]),e.form.isForVlog?e._e():o("q-select",{staticStyle:{width:"100% !important"},attrs:{label:"Labels","use-input":"","use-chips":"",multiple:"",options:e.allKeywords},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"app:question-mark"}})]},proxy:!0}],null,!1,3822986967),model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1)])])],1)])]),o("q-dialog",{attrs:{position:"bottom"},model:{value:e.saveDraftDialog,callback:function(t){e.saveDraftDialog=t},expression:"saveDraftDialog"}},[o("BlogAction",{on:{"clicked-selected-Option":e.clickedSelectedOptionModal}})],1)],1),o("q-dialog",{model:{value:e.successfulModal,callback:function(t){e.successfulModal=t},expression:"successfulModal"}},[o("BlogSuccessMessage",{attrs:{messageType:e.blogMessageType,isVlog:e.form.isForVlog}})],1),o("q-dialog",{model:{value:e.updateModal,callback:function(t){e.updateModal=t},expression:"updateModal"}},[o("q-card",{staticClass:"popup"},[o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("div",{staticClass:"text-h6 col-md-6"},[o("b",[e._v("Updated")])]),o("q-space"),o("div",{staticClass:"text-h6 col-md-6 close"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.gotoblgArticleList}})],1)],1),o("div",{staticClass:"row"},[o("div",{staticClass:"text-h6 col",staticStyle:{"text-align":"center"}},[o("q-icon",{staticClass:"success col-md-12",attrs:{name:"app:successful"}})],1)]),o("q-card-section",{staticClass:"success-msg"},[o("p",[e._v(" Your\n          Blog\n          has been updated successfully.\n        ")])]),o("div",{staticClass:"flex flex-center more-info-item"},[o("q-btn",{attrs:{color:"primary",label:"Done",rounded:"","no-caps":""},on:{click:e.gotoblgArticleList}})],1)],1)],1)],1)},s=[],i=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("456d"),o("6b54"),o("06db"),o("28a5"),o("6762"),o("2fdb"),o("f751"),o("9523")),r=o.n(i),c=o("2f62"),l=o("2a19"),n=o("a2d8"),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-card",{staticClass:"roundedNewsFeed"},[o("div",{staticClass:"row items-center no-wrap"},[o("div",{staticClass:"col"},[o("q-list",{staticClass:"rounded-borders",staticStyle:{width:"100%","padding-bottom":"45px"},attrs:{bordered:"",padding:""}},[e.CreateBlog&&0!==parseInt(e.CreateBlog.id)?e._e():o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"","active-class":"my-menu-link"},on:{click:function(t){return e.action("Submit")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"app:approve"}})],1),o("q-item-section",[e._v("Submit")])],1),e.CreateBlog&&0!==parseInt(e.CreateBlog.id)?e._e():o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"","active-class":"my-menu-link"},on:{click:function(t){return e.action("Save")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"app:save-draft"}})],1),o("q-item-section",[e._v("Save as Draft")])],1),e.CreateBlog&&0!==parseInt(e.CreateBlog.id)?o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"","active-class":"my-menu-link"},on:{click:function(t){return e.action("Update")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"app:approve"}})],1),o("q-item-section",[e._v("Update")])],1):e._e(),o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"","active-class":"my-menu-link"},on:{click:function(t){return e.action("Discard")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"app:discard"}})],1),o("q-item-section",[e._v("Discard")])],1)],1)],1)])])},u=[];function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){r()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var m={name:"BlogAction",computed:f({},Object(c["c"])("blog",["CreateBlog"])),methods:{action:function(e){this.$emit("clicked-selected-Option",e)}}},g=m,h=(o("1157"),o("2877")),v=o("f09f"),b=o("1c1c"),C=o("66e5"),y=o("4074"),k=o("0016"),w=o("714f"),O=o("eebe"),P=o.n(O),q=Object(h["a"])(g,d,u,!1,null,"53ae496e",null),B=q.exports;function S(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function D(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?S(Object(o),!0).forEach((function(t){r()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):S(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}P()(q,"components",{QCard:v["a"],QList:b["a"],QItem:C["a"],QItemSection:y["a"],QIcon:k["a"]}),P()(q,"directives",{Ripple:w["a"]});var j={name:"CreatePost",data:function(){return{form:{id:0,title:"",content:"",label:null,coverPhoto:null,coverVideo:null,isForVlog:!1,categories:[]},blogCoverPhoto:null,blogMessageType:"Published",successfulModal:!1,saveDraftDialog:!1,allKeywords:[],updateModal:!1}},components:{BlogSuccessMessage:n["a"],BlogAction:B},created:function(){this.$root.$on("headerRightIcon1Click",this.openSaveDialog),this.$root.$on("headerBackButtonClick",this.backButtonClick)},beforeDestroy:function(){this.$root.$off("headerRightIcon1Click",this.openSaveDialog),this.$root.$off("headerBackButtonClick",this.backButtonClick)},computed:D(D({},Object(c["c"])("userprofile",["userDetails"])),Object(c["c"])("blog",["blog","blogs","CreateBlog","keywords","blogCategory"])),mounted:function(){var e,t,o,a,s=this;!0===(null===(e=this.$route)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.isForVlog)&&(this.form.isForVlog=!0),this.setHeaderData(!1,!0,(null===(o=this.$route)||void 0===o||null===(a=o.query)||void 0===a?void 0:a.isForVlog)?"Create Vlog":"Create Blog","three-dots-icon",!1,"",!1,!1),this.fetchKeywords().then((function(){s.allKeywords=s.keywords,s.filterOptions=s.keywords})),null!==this.CreateBlog&&(this.form=Object.assign({},this.CreateBlog),this.blogCoverPhoto=this.CreateBlog.blogCoverPhoto),this.fetchBlogCategory()},methods:D(D(D({},Object(c["b"])("blog",["postBlog","storeContent","fetchKeywords","fetchBlogCategory","PutBlog"])),Object(c["b"])("header",["setHeader"])),{},{setHeaderData:function(e,t,o,a,s,i,r,c){this.setHeader({hamburgerIcon:e,backIcon:t,title:o,rightIcon1:a,rightIcon2:s,rightLinkText:i,notificationIcon:r,searchIcon:c})},saveBlog:function(e){var t=this;this.form.isForVlog&&null===this.form.coverVideo?l["a"].create({progress:!0,message:"Please Upload Video",type:"negative"}):""!==this.form.title?this.form.isForVlog||null!==this.form.coverPhoto?0!==this.form.categories.length?(this.form.isForVlog?e="Published":e||(e="Submitted"),this.blogMessageType=e,this.form.categories.includes(1)||this.form.categories.push(1),0===parseInt(this.form.id)?this.postBlog({user:this.userDetails.userprofile.id,form:this.form,status:e,file:this.blogCoverPhoto}).then((function(e){t.successfulModal=!0})):this.PutBlog({user:this.userDetails.userprofile.id,form:this.form,file:this.blogCoverPhoto}).then((function(e){t.updateModal=!0}))):l["a"].create({progress:!0,message:"Please select at least one category",type:"negative"}):l["a"].create({progress:!0,message:"Please Add Cover Photo",type:"negative"}):l["a"].create({progress:!0,message:"Please Add Title",type:"negative"})},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.blogCoverPhoto=t[0],"image"===t[0].type.split("/")[0]?(this.createImage(t[0]),this.form.coverVideo=null):(this.validateVideoFile(t[0]),this.form.coverPhoto=null))},createImage:function(e){var t=this,o=new FileReader;o.onload=function(e){t.form.coverPhoto=e.target.result},o.readAsDataURL(e)},createVideo:function(e){var t=URL.createObjectURL(e);this.form.coverVideo=t},openSaveDialog:function(){this.saveDraftDialog=!0},action:function(e){this.$emit("clicked-selected-Option",e)},clickedSelectedOptionModal:function(e){switch(e){case"Save":this.saveBlog("Drafts");break;case"Submit":this.saveBlog("Submitted");break;case"Update":this.saveBlog("Submitted");break;case"Discard":this.saveDraftDialog=!1,this.form.id=0,this.form.title="",this.form.content="",this.form.label=null,this.form.coverPhoto=null,this.blogCoverPhoto=null;break}},backButtonClick:function(){this.$router.push("dashboard")},startCreatePost:function(){var e=this;this.storeContent({form:this.form,file:this.blogCoverPhoto}).then((function(){e.$router.push("create-post-detail")}))},validateVideoFile:function(e){var t=this,o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=function(){parseInt(o.duration.toString().split(".")[0])<301?t.form.coverVideo=o.src:(t.blogCoverPhoto=null,l["a"].create({progress:!0,message:"Video Should be less than 5 mints",type:"negative"}))},o.src=URL.createObjectURL(e)},gotoblgArticleList:function(){this.form.isForVlog?this.$router.push("/vlogs/Home"):this.$router.push("/blog-articles")}})},V=j,x=(o("4839"),o("9989")),I=o("0378"),$=o("27f9"),_=o("ddd8"),F=o("068f"),M=o("6ac0"),Q=o("9c40"),L=o("24e8"),U=o("a370"),A=o("2c91"),R=o("7f67"),T=Object(h["a"])(V,a,s,!1,null,"536ff596",null);t["default"]=T.exports;P()(T,"components",{QPage:x["a"],QForm:I["a"],QInput:$["a"],QSelect:_["a"],QImg:F["a"],QVideo:M["a"],QBtn:Q["a"],QIcon:k["a"],QDialog:L["a"],QCard:v["a"],QCardSection:U["a"],QSpace:A["a"]}),P()(T,"directives",{ClosePopup:R["a"]})}}]);