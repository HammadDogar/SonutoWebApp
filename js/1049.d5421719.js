"use strict";(self["webpackChunkKonoku"]=self["webpackChunkKonoku"]||[]).push([[1049],{69388:function(e,t,l){l.r(t),l.d(t,{default:function(){return oe}});l(52519),l(62590),l(60893);var i=l(59835),o=l(86970),r=function(e){return(0,i.dD)("data-v-683f8906"),e=e(),(0,i.Cn)(),e},s={key:0,class:"favorite-pic-section"},n={class:"row no-wrap item-section"},a={class:"avatar-section row"},c={class:"col-12"},u={class:"flex flex-center avatar-item"},f={class:"col-12"},d={class:"text-center title-item"},h={class:"col-12"},p={class:"text-center sub-title-item"},g={key:0},w={class:"col-12"},v={class:"text-center country-item"},m={key:0},D={key:1,class:"sub-font-blue"},y={key:0,class:"col-12"},k={class:"more-info-item"},b={key:1,class:"col-12"},F={class:"more-info-item"},S={key:2,class:"col-12 text-center"},I={class:"row"},q={class:"col-6 text-center"},x={class:"col-6 text-center"},_={class:"about-section"},C=r((function(){return(0,i._)("span",{class:"section-header"}," About ",-1)})),P={style:{"margin-top":"1rem"}},A={key:0,class:"section-content"},M={key:1,class:"my-photos-section"},U={class:"row"},$={class:"col-12"},B=r((function(){return(0,i._)("span",{class:"section-header"}," Photos ",-1)})),N={class:"row q-col-gutter-none q-ma-none q-pa-none",style:{"margin-top":"9px"}},Z={key:2,class:"newsfeed-section",style:{width:"100%"}},j={id:"image-box-userprofile",class:"display-none",ref:"fullscreenElement"};function E(e,t,l,r,E,z){var R=(0,i.up)("q-img"),W=(0,i.up)("q-scroll-area"),H=(0,i.up)("q-avatar"),L=(0,i.up)("q-btn"),Q=(0,i.up)("q-icon"),K=(0,i.up)("NewsFeedCard"),Y=(0,i.up)("FullScreen"),O=(0,i.up)("q-page");return null==e.profileDetail||E.loadingProfile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(O,{key:0,class:"page"},{default:(0,i.w5)((function(){return[(!0!==E.privacySetting.IsPrivate||z.verifyFollower(e.profileDetail.id)&&!0===E.privacySetting.IsPrivate)&&e.profileDetail.userphotos?((0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(W,{class:"scroll"},{default:(0,i.w5)((function(){return[(0,i._)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(z.getFevImages(e.profileDetail.userphotos),(function(t){return(0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"item"},[(0,i.Wm)(R,{src:"".concat(e.baseUrl).concat(t.photo.url),"spinner-color":"white",class:"rounded-borders fev-image"},null,8,["src"])])})),128))])]})),_:1})])):(0,i.kq)("",!0),(0,i._)("div",a,[(0,i._)("div",c,[(0,i._)("div",u,[null!=e.profileDetail&&null!=e.profileDetail.avatar?((0,i.wg)(),(0,i.j4)(R,{key:0,src:"".concat(e.profileDetail.avatar.url),"spinner-color":"white",class:"rounded-borders",style:{height:"126px",width:"126px","border-radius":"126px"},onClick:t[0]||(t[0]=function(t){return z.getfullScreen(e.profileDetail,E.enlargesec="profile")})},null,8,["src"])):e.profileDetail.firstname?((0,i.wg)(),(0,i.j4)(H,{key:1,style:{height:"126px",width:"126px"},color:"primary","text-color":"white"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,o.zw)(e.profileDetail.firstname.charAt(0))+" "+(0,o.zw)(e.profileDetail.lastname.charAt(0)),1)]})),_:1})):(0,i.kq)("",!0)])]),(0,i._)("div",f,[(0,i._)("div",d,(0,o.zw)(e.profileDetail.firstname)+" "+(0,o.zw)(e.profileDetail.lastname),1)]),(0,i._)("div",h,[(0,i._)("div",p,[(0,i.Uk)((0,o.zw)(e.profileDetail.employer)+" ",1),e.profileDetail.employer&&e.profileDetail.school?((0,i.wg)(),(0,i.iD)("span",g," /  ")):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,o.zw)(e.profileDetail.school),1)])]),(0,i._)("div",w,[(0,i._)("div",v,[e.profileDetail.country?((0,i.wg)(),(0,i.iD)("span",m,(0,o.zw)(e.profileDetail.country.name),1)):(0,i.kq)("",!0),2===e.followerRequestStatus?((0,i.wg)(),(0,i.iD)("span",D,(0,o.zw)(e.acceptedFollowers.length)+" followers ",1)):(0,i.kq)("",!0)])]),!0!==E.privacySetting.IsPrivate||z.verifyFollower(e.profileDetail.id)&&!0===E.privacySetting.IsPrivate?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("div",k,[(0,i.Wm)(L,{color:"primary",label:"More Info",class:"button",rounded:"","no-caps":"",onClick:z.moreInfo},null,8,["onClick"])])])):(0,i.kq)("",!0),z.verifyFollower(e.profileDetail.id)?((0,i.wg)(),(0,i.iD)("div",S,[(0,i._)("div",I,[(0,i._)("div",q,[(0,i.Wm)(L,{style:{background:"#E49635",color:"white","margin-left":"16px"},label:"Following",class:"button default-button",onClick:z.unFollow,rounded:"","no-caps":""},null,8,["onClick"])]),(0,i._)("div",x,[(0,i.Wm)(L,{outline:"",color:"primary",style:{color:"#000000"},label:"Message",class:"button default-button",rounded:"","no-caps":"",onClick:z.messageUser},null,8,["onClick"])])])])):((0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("div",F,[z.verifyFollowerPending(e.profileDetail.id)?((0,i.wg)(),(0,i.j4)(L,{key:1,outline:"",color:"primary",label:"Cancel Request",class:"button",rounded:"","no-caps":"",onClick:z.unFollow},null,8,["onClick"])):((0,i.wg)(),(0,i.j4)(L,{key:0,style:{background:"#E49635",color:"white"},label:"Follow",class:"button",rounded:"","no-caps":"",onClick:z.follow},null,8,["onClick"]))])]))]),(0,i._)("div",_,[C,(0,i._)("div",P,[e.profileDetail.shortdescription?((0,i.wg)(),(0,i.iD)("span",A,[(0,i.Uk)((0,o.zw)(e.profileDetail.shortdescription.slice(0,E.aboutSeeMore?e.profileDetail.shortdescription.length:125))+" ",1),e.profileDetail.shortdescription.length>125&&!E.aboutSeeMore?((0,i.wg)(),(0,i.iD)("span",{key:0,style:{color:"#5364B5"},class:"flex justify-end",onClick:t[1]||(t[1]=function(e){return E.aboutSeeMore=!0})},"See More")):(0,i.kq)("",!0),E.aboutSeeMore?((0,i.wg)(),(0,i.iD)("span",{key:1,style:{color:"#5364B5"},class:"flex justify-end",onClick:t[2]||(t[2]=function(e){return E.aboutSeeMore=!1})},"See Less")):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])]),!0!==E.privacySetting.IsPrivate||z.verifyFollower(e.profileDetail.id)&&!0===E.privacySetting.IsPrivate?((0,i.wg)(),(0,i.iD)("div",M,[(0,i._)("div",U,[(0,i._)("div",$,[B,e.photos&&e.photos.length>0?((0,i.wg)(),(0,i.j4)(L,{key:0,flat:"",class:"float-right reverse-icon q-pl-none",style:{color:"#5364B5"},onClick:z.viewAllPhoto},{default:(0,i.w5)((function(){return[(0,i.Wm)(Q,{name:"app:back-arrow-blue"})]})),_:1},8,["onClick"])):(0,i.kq)("",!0)])]),(0,i._)("div",N,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.photos.slice(0,3),(function(t){return(0,i.wg)(),(0,i.iD)("div",{class:"col-4",key:"none-".concat(t.id)},[t.photo.url.indexOf("http")?((0,i.wg)(),(0,i.j4)(R,{key:0,src:"".concat(e.baseUrl).concat(t.photo.url),"spinner-color":"white",class:"rounded-borders photo",onClick:function(e){return z.getfullScreen(t,E.enlargesec="myphoto")}},null,8,["src","onClick"])):((0,i.wg)(),(0,i.j4)(R,{key:1,src:t.photo.url,"spinner-color":"white",class:"rounded-borders photo",onClick:function(e){return z.getfullScreen(t,E.enlargesec="myphoto")}},null,8,["src","onClick"]))])})),128))])])):(0,i.kq)("",!0),z.verifyFollower(e.profileDetail.id)?((0,i.wg)(),(0,i.iD)("div",Z,[(0,i.Wm)(K,{isProfile:!0})])):(0,i.kq)("",!0),(0,i._)("div",j,[(0,i.Wm)(Y,{details:E.fullscreendata},null,8,["details"])],512)]})),_:1}))}var z=l(46264),R=l.n(z),W=(l(80676),l(69665),l(56072),l(65716),l(62166)),H=l(33100),L=l(72370),Q=l(4376),K=l(57529),Y={name:"Profile",props:{id:Number},data:function(){return{file:null,privacySetting:{},albums:{info:[{src:"https://cdn.quasar.dev/img/boy-avatar.png",name:"Meeting",count:"16 photos"},{src:"https://cdn.quasar.dev/img/boy-avatar.png",name:"Me",count:"10 photos"}]},fullscreendata:{url:null,userprofile:null,feedtext:null,created_at:null,likeLength:null,commentLength:null,id:null,likeIcon:null,hideBack:!1,hideActivity:!0},enlargesec:"",start:0,limit:10,aboutSeeMore:!1,loadingProfile:!0}},watch:{"$route.params.id":function(){this.loadProfile()}},created:function(){this.$emitter.on("headerRightIcon1Click",this.gotoSearch),this.$emitter.on("onExitFullscreen",this.closeFullScreen),this.$emitter.on("onformatDateClick",this.formatDate)},beforeUnmount:function(){this.$emitter.off("headerRightIcon1Click",this.gotoSearch),this.$emitter.off("onExitFullscreen",this.closeFullScreen),this.$emitter.off("onformatDateClick",this.formatDate)},computed:R()(R()(R()(R()(R()({},(0,H.Se)("config",["baseUrl"])),(0,H.Se)("country",["countries"])),(0,H.Se)("userprofile",["profileDetail","userDetails"])),(0,H.Se)("userphoto",["photos"])),(0,H.Se)("followers",["acceptedFollowers","followings","followerRequestStatus"])),mounted:function(){this.setHeaderData(!0,!1,"Profile","","","",!0,!0),this.loadProfile(),0===this.countries.length&&this.fetchCountries()},methods:R()(R()(R()(R()(R()(R()(R()(R()(R()(R()({},(0,H.nv)("header",["setHeader"])),(0,H.nv)("country",["fetchCountries"])),(0,H.nv)("privacysettings",["fetchUserPrivacySettings"])),(0,H.nv)("newsfeeds",["fetchMyNewsfeeds","sendActivityEmailNotification"])),(0,H.nv)("userprofile",["getProfileDetailById","getUserDetail"])),(0,H.nv)("userphoto",["getPhotos"])),(0,H.nv)("notifications",["postNotifications"])),(0,H.nv)("followers",["fetchFollowings","fetchFollowers","addFollowers","addFollowing","getFollower","removeFollowing","removeFollower"])),(0,H.nv)("chat",["createInbox"])),{},{setHeaderData:function(e,t,l,i,o,r,s,n){this.setHeader({hamburgerIcon:e,backIcon:t,title:l,rightIcon1:i,rightIcon2:o,rightLinkText:r,notificationIcon:s,searchIcon:n})},loadProfile:function(){var e=this;this.getProfileDetailById(this.$route.params.id).then((function(t){e.fetchMyNewsfeeds({id:e.profileDetail.user.id,start:e.start,limit:e.limit}),e.fetchFollowings(e.profileDetail.user.id),e.fetchFollowers(e.profileDetail.user.id),e.getPhotos(e.profileDetail.user.id),e.fetchUserPrivacySettings(e.profileDetail.id).then((function(t){e.privacySetting=t[0]})),e.loadingProfile=!1}))},viewAllPhoto:function(){this.$router.push("/photos/"+this.profileDetail.user.id)},getFevImages:function(e){return null==e?"":e.filter((function(e){return!0===e.Favourite}))},getCountryName:function(e){if(null==e)return"";var t=this.countries.filter((function(t){return t.value===e}));return 0!==t.length?t[0].label:void 0},moreInfo:function(){this.$router.push("/user-profile-more-info")},verifyFollower:function(e){if(void 0!==e){var t=null;return this.userDetails.userfollowings&&this.userDetails.userfollowings.length>0&&(t=this.userDetails.userfollowings.filter((function(t){return t.following===e&&"Accepted"===t.status}))),!!(t&&void 0!==t&&t.length>0)}},verifyFollowerPending:function(e){if(void 0!==e){var t=null;return this.userDetails.userfollowings.length>0&&(t=this.userDetails.userfollowings.filter((function(t){return t.following===e&&"Pending"===t.status}))),!!(t&&void 0!==t&&t.length>0)}},follow:function(){var e,t=this,l="Accepted",i="started following you",o="followers/",r="Follower Recieved",s=" started following you";!0===(null===(e=this.privacySetting)||void 0===e?void 0:e.IsPrivate)?(l="Pending",i="You received a follower request",o="follow-request-notifications",r="Follow Requested",s=" requested to follow you"):(l="Accepted",i="Started following you",o="followers/",r="Follower Recieved",s=" started following you"),this.addFollowers({user:this.profileDetail.user.id,status:l,follower:this.userDetails.userprofile.id}),this.addFollowing({user:this.userDetails.id,status:l,following:this.profileDetail.id}).then((function(){K.socket.emit("sendNotification",{text:i,to:t.profileDetail.id}),t.postNotifications({message:i,userprofileId:t.userDetails.userprofile.id,userId:t.profileDetail.user.id,url:o}),t.sendActivityEmailNotification({title:r,message:t.userDetails.userprofile.firstname+" "+t.userDetails.userprofile.lastname+s,to:t.profileDetail.user.id,url:o,activity:"RequestsBeginsFollow"}),t.createInbox({userFirst:t.userDetails.id,userSecond:t.profileDetail.user.id}),t.getUserDetail(t.userDetails.id)}))},unFollow:function(){var e=this,t=this.userDetails.userfollowings.filter((function(t){return t.following===e.profileDetail.id}));this.removeFollowing(t[0].id).then((function(){e.getUserDetail(e.userDetails.id)})),this.getFollower({followerId:this.userDetails.userprofile.id,userId:this.profileDetail.user.id}).then((function(t){e.removeFollower(t[0].id)}))},gotoSearch:function(){this.$router.push("/search-result")},formatDate:function(e){return Q.ZP.formatDate(e,"DD MMM")+" at "+Q.ZP.formatDate(e,"hh.mm A")},closeFullScreen:function(){if(document.exitFullscreen){document.exitFullscreen();var e=document.getElementById("image-box-userprofile");e.setAttribute("style","display:none;"),this.fullscreendata.hideBack=!0}},getfullScreen:function(e,t){"myphoto"===t?(e.photo.url.indexOf("http")?this.fullscreendata.url=this.baseUrl+e.photo.url:this.fullscreendata.url=e.photo.url,this.fullscreendata.name=null,this.fullscreendata.created_at=null):(this.fullscreendata.url=e.avatar.url,this.fullscreendata.name=e.firstname+" "+e.lastname,this.fullscreendata.created_at=e.created_at),this.fullscreendata.hideBack=!1,this.fullscreendata.likeLength=null,this.fullscreendata.commentLength=null,this.fullscreendata.id=null,this.fullscreendata.likeIcon=null;var l=document.getElementById("image-box-userprofile");l.setAttribute("style","display:flex;");var i=this.$refs.fullscreenElement;this.$q.fullscreen.toggle(i).then((function(){})).catch((function(e){alert(e)}))},messageUser:function(){var e=this;this.createInbox({userFirst:this.userDetails.id,userSecond:this.profileDetail.user.id}).then((function(t){e.$router.push("/chat/"+t.id)}))}}),components:{NewsFeedCard:W.Z,FullScreen:L.Z}},O=l(11639),T=l(69885),G=l(66663),J=l(91487),V=l(61357),X=l(68879),ee=l(22857),te=l(69984),le=l.n(te);const ie=(0,O.Z)(Y,[["render",E],["__scopeId","data-v-683f8906"]]);var oe=ie;le()(Y,"components",{QPage:T.Z,QScrollArea:G.Z,QImg:J.Z,QAvatar:V.Z,QBtn:X.Z,QIcon:ee.Z})}}]);