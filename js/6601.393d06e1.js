"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[6601],{86601:function(e,t,n){n.r(t),n.d(t,{default:function(){return ce}});var a=n(59835),s=n(86970),i=function(e){return(0,a.dD)("data-v-e225e7f6"),e=e(),(0,a.Cn)(),e},o={class:"background"},r={class:"d-flex q-mb-none"},c={class:"steps-description-section"},l={key:0},p=i((function(){return(0,a._)("span",{class:"Heading"},"Prepare for your selfie",-1)})),u=i((function(){return(0,a._)("p",{class:"sub-title"}," Sonuto has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the platform to verify their identity. ",-1)})),d=i((function(){return(0,a._)("p",{class:"sub-title"}," *Remove anything that obstructs your face like hats, sunglasses or headphones. ",-1)})),f=i((function(){return(0,a._)("p",{class:"sub-title"}," *Make sure your face is fully and evenly lit. ",-1)})),m=i((function(){return(0,a._)("p",{class:"sub-title"}," *Position your face at the same height as your phone's camera. ",-1)})),h=[p,u,d,f,m],g={key:1},y=i((function(){return(0,a._)("span",{class:"Heading"},"Prepare to scan your document",-1)})),v=i((function(){return(0,a._)("p",{class:"sub-title"}," Sonuto has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the platform to verify their identity. ",-1)})),k=i((function(){return(0,a._)("p",{class:"sub-title"}," Open the page showing your personal information and continue on the next screen. ",-1)})),w=[y,v,k],b={class:"steps"},D={class:"step1"},_={key:0,class:"content"},I=i((function(){return(0,a._)("h6",{class:"q-mt-none Heading"},"Place your face inside the outline",-1)})),q=i((function(){return(0,a._)("div",{class:"shape"},null,-1)})),x=[I,q],S={key:1,class:"content"},P=i((function(){return(0,a._)("h6",{class:"Heading"},"Place your front side of document",-1)})),T=[P],W={key:2,class:"content"},F=i((function(){return(0,a._)("h6",{class:"Heading"},"Place your document",-1)})),B=[F],C={key:3,class:"content"},V=i((function(){return(0,a._)("h6",{class:"Heading"},"Place your back side of document",-1)})),L=[V],U={key:0,class:"step2"},Z={class:"row"},H={class:"col-12"},Q={class:"buttons-section"};function N(e,t,n,i,p,u){var d=(0,a.up)("q-icon"),f=(0,a.up)("q-step"),m=(0,a.up)("q-stepper"),y=(0,a.up)("q-select"),v=(0,a.up)("q-btn"),k=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(k,{class:"flex"},{default:(0,a.w5)((function(){return[(0,a._)("div",o,[(0,a._)("div",r,[(0,a.Wm)(d,{name:"app:back",onClick:t[0]||(t[0]=function(e){return u.goToBack()}),class:(0,s.C_)(["backbutton",[1===p.steps&&"invisible"]])},null,8,["class"])]),(0,a.Wm)(m,{class:"stepperDiv verification-stepper",modelValue:p.steps,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p.steps=e}),ref:"stepper",color:"white",contracted:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{name:10,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(f,{name:11,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(f,{name:12,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(f,{name:13,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(f,{name:14,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(f,{name:15,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(f,{name:16,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(f,{name:1,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:p.steps>=1,title:"",style:{width:"100%"}},null,8,["done"]),(0,a.Wm)(f,{name:2,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:p.steps>=2,title:"",style:{width:"100%"}},null,8,["done"])]})),_:1},8,["modelValue"]),(0,a._)("div",c,[1===p.steps?((0,a.wg)(),(0,a.iD)("div",l,h)):(0,a.kq)("",!0),2===p.steps?((0,a.wg)(),(0,a.iD)("div",g,w)):(0,a.kq)("",!0)]),(0,a._)("div",b,[(0,a._)("div",D,[p.showDirection?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,s.C_)(["camera-direction",[1===p.directionState?"full-div-height":"half-div-height"]])},[1===p.directionState?((0,a.wg)(),(0,a.iD)("div",_,x)):(0,a.kq)("",!0),2===p.directionState&&"License"===p.form.docType?((0,a.wg)(),(0,a.iD)("div",S,T)):(0,a.kq)("",!0),2===p.directionState&&"Passport"===p.form.docType?((0,a.wg)(),(0,a.iD)("div",W,B)):(0,a.kq)("",!0),3===p.directionState?((0,a.wg)(),(0,a.iD)("div",C,L)):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)]),2===p.steps?((0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("div",Z,[(0,a._)("div",H,[(0,a.Wm)(y,{borderless:"",class:"input-control",options:p.docTypes,"emit-value":"","map-options":"","label-color":"primary",modelValue:p.form.docType,"onUpdate:modelValue":[t[2]||(t[2]=function(e){return p.form.docType=e}),u.resetPictures],label:"Document Type",rules:[function(e){return!!e||"Field is required"}],"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},style:{"padding-left":"5px"}},null,8,["options","modelValue","rules","onUpdate:modelValue"])])])])):(0,a.kq)("",!0)]),(0,a._)("div",Q,[1===p.steps?((0,a.wg)(),(0,a.j4)(v,{key:0,label:"Next",onClick:t[3]||(t[3]=function(e){return u.uploadImages("selfie")}),class:"next-btn","icon-right":"app:right-arrow"})):(0,a.kq)("",!0),2===p.steps?((0,a.wg)(),(0,a.j4)(v,{key:1,label:"Next",onClick:t[4]||(t[4]=function(e){return u.uploadImages("front")}),class:"next-btn",disabled:p.requestLoading,"icon-right":"app:right-arrow"},null,8,["disabled"])):(0,a.kq)("",!0)])])]})),_:1})}var j=n(47798),O=n.n(j),z=n(1001),J=n.n(z),M=n(46264),R=n.n(M),A=(n(69665),n(98998),n(65716),n(48170),n(25231),n(31192),n(83827),n(47725),n(85395),n(8968),n(98234),n(3075),n(90548),n(61343),n(76094),n(26638),n(73049),n(6364),n(20276),n(19077),n(6894),n(25764),n(9141),n(69359),n(78849),n(59699),n(56408),n(32045),n(7025),n(53536),n(42079),n(58218),n(96046),n(25328),n(2767)),E=n(33100),$=n(3710),G=n(6827),K={name:"UserVerification",data:function(){return{steps:1,docTypes:["Passport","License"],form:{personImg:null,docType:"License",docImgFront:null,docImgBack:null},requestLoading:!1,showDirection:!1,directionState:0}},computed:R()(R()({},(0,E.Se)("config",["baseUrl","rocketChatUrl"])),(0,E.Se)("userprofile",["userDetails","userprofileDetail"])),methods:R()(R()(R()(R()({},(0,E.nv)("userprofile",["updateUser"])),(0,E.nv)("verification",["submitUserVerificationsDetail"])),(0,E.nv)("otp",["sendOTP"])),{},{goToBack:function(){1===this.steps?this.$router.push("welcome"):2===this.steps&&(this.steps=1)},uploadImages:function(e){var t=this;return J()(O()().mark((function n(){var a,s,i,o;return O()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=!0,!a){n.next=15;break}return t.showDirection=!0,"selfie"===e?t.directionState=1:"front"===e?t.directionState=2:"License"===t.form.docType&&"back"===e&&(t.directionState=3),n.next=6,t.takePicture();case 6:if(s=n.sent,s){n.next=9;break}return n.abrupt("return");case 9:i=new Blob([new Uint8Array((0,$.J)(s.base64String))],{type:"image/".concat(s.format)}),o=new File([i],"Name",{lastModified:new Date,type:i.type}),t.showDirection=!1,"selfie"===e?(t.form.personImg=o,t.showDirection=!1,t.steps=2):"front"===e?(t.form.docImgFront=o,"License"===t.form.docType?t.uploadImages("back"):t.submitDetails()):"back"===e&&(t.form.docImgBack=o,t.submitDetails()),n.next=17;break;case 15:return G.Z.create({progress:!0,message:"Can't Process Without Camera Permissions",type:"negative"}),n.abrupt("return",null);case 17:case"end":return n.stop()}}),n)})))()},takePicture:function(){var e=this;return J()(O()().mark((function t(){var n;return O()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A.V1.getPhoto({quality:90,allowEditing:!0,resultType:A.dk.Base64}).catch((function(t){e.showDirection=!1}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},next:function(e){this.steps=e},submitDetails:function(){var e=this;this.requestLoading=!0;var t=new FormData;t.append("data",JSON.stringify({documentType:this.form.docType,status:"Pending",users_permissions_user:this.userDetails.id})),t.append("files.personImg",this.form.personImg,"personImg"),"License"===this.form.docType?(t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),t.append("files.docBackImg",this.form.docImgBack,"docBackImg")):t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),this.submitUserVerificationsDetail({verRequest:t,userDetails:{name:this.userprofileDetail.firstfame+" "+this.userprofileDetail.lastname,id:this.userprofileDetail.user}}).then((function(t){e.requestLoading=!1,window.location.href="/"}))},resetPictures:function(){this.form.docImgBack=null,this.form.docImgFront=null}}),mounted:function(){}},X=n(11639),Y=n(69885),ee=n(22857),te=n(8225),ne=n(46017),ae=n(68879),se=n(32259),ie=n(69984),oe=n.n(ie);const re=(0,X.Z)(K,[["render",N],["__scopeId","data-v-e225e7f6"]]);var ce=re;oe()(K,"components",{QPage:Y.Z,QIcon:ee.Z,QStepper:te.Z,QStep:ne.Z,QBtn:ae.Z,QSelect:se.Z})}}]);