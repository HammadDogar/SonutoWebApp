"use strict";(self["webpackChunkKonoku"]=self["webpackChunkKonoku"]||[]).push([[6973],{46973:function(e,t,n){n.r(t),n.d(t,{default:function(){return ye}});var a=n(59835),i=n(86970),s=function(e){return(0,a.dD)("data-v-32f6bea8"),e=e(),(0,a.Cn)(),e},r={class:"camera-header"},o=s((function(){return(0,a._)("img",{src:"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Cg id='Icon_5_'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M402.2,134L378,109.8c-1.6-1.6-4.1-1.6-5.7,0L258.8,223.4c-1.6,1.6-4.1,1.6-5.7,0L139.6,109.8 c-1.6-1.6-4.1-1.6-5.7,0L109.8,134c-1.6,1.6-1.6,4.1,0,5.7l113.5,113.5c1.6,1.6,1.6,4.1,0,5.7L109.8,372.4c-1.6,1.6-1.6,4.1,0,5.7 l24.1,24.1c1.6,1.6,4.1,1.6,5.7,0l113.5-113.5c1.6-1.6,4.1-1.6,5.7,0l113.5,113.5c1.6,1.6,4.1,1.6,5.7,0l24.1-24.1 c1.6-1.6,1.6-4.1,0-5.7L288.6,258.8c-1.6-1.6-1.6-4.1,0-5.7l113.5-113.5C403.7,138.1,403.7,135.5,402.2,134z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},null,-1)})),c=[o],l={key:0,class:"content"},p=s((function(){return(0,a._)("h6",{class:"q-mt-none Heading text-center"},"Place your face inside the outline",-1)})),u=s((function(){return(0,a._)("div",{class:"shape"},null,-1)})),d=[p,u],m={key:1,class:"content"},h=s((function(){return(0,a._)("h6",{class:"Heading text-center"},"Place your front side of document",-1)})),g=[h],f={key:2,class:"content"},v=s((function(){return(0,a._)("h6",{class:"Heading text-center"},"Place your document",-1)})),w=[v],y={key:3,class:"content"},k=s((function(){return(0,a._)("h6",{class:"Heading text-center"},"Place your back side of document",-1)})),b=[k],_={key:0,class:"preview-img-wrapper"},C=["src"],I={class:"pick-image"},P={for:"_pwa-elements-file-pick"},x=s((function(){return(0,a._)("div",{class:"shutter-button"},null,-1)})),D=[x],q={key:1,class:"camera-footer preview"},F={class:"pick-image"},S={class:"rotate"},L={class:"background"},T={class:"d-flex q-mb-none"},W={class:"steps-description-section"},B={key:0},U=s((function(){return(0,a._)("span",{class:"Heading"},"Prepare for your selfie",-1)})),V=s((function(){return(0,a._)("p",{class:"sub-title"}," Konoku has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the platform to verify their identity. ",-1)})),Z=s((function(){return(0,a._)("p",{class:"sub-title"}," *Remove anything that obstructs your face like hats, sunglasses or headphones. ",-1)})),A=s((function(){return(0,a._)("p",{class:"sub-title"}," *Make sure your face is fully and evenly lit. ",-1)})),E=s((function(){return(0,a._)("p",{class:"sub-title"}," *Position your face at the same height as your phone's camera. ",-1)})),H=[U,V,Z,A,E],Q={key:1},j=s((function(){return(0,a._)("span",{class:"Heading"},"Prepare to scan your document",-1)})),K=s((function(){return(0,a._)("p",{class:"sub-title"}," Konoku has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the platform to verify their identity. ",-1)})),N=s((function(){return(0,a._)("p",{class:"sub-title"}," Open the page showing your personal information and continue on the next screen. ",-1)})),z=[j,K,N],M={class:"steps"},O={key:0,class:"step2"},J={class:"row"},R={class:"col-12"},$={class:"buttons-section"};function Y(e,t,n,s,o,p){var u=(0,a.up)("q-icon"),h=(0,a.up)("q-step"),v=(0,a.up)("q-stepper"),k=(0,a.up)("q-select"),x=(0,a.up)("q-btn"),U=(0,a.up)("q-page");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,i.C_)(["camera-wrapper",[o.showCamera&&"show"]])},[(0,a._)("div",r,[(0,a._)("div",{class:"item close",onClick:t[0]||(t[0]=function(){return p.closeCameraPreview&&p.closeCameraPreview.apply(p,arguments)})},c)]),(0,a._)("div",{id:"cameraPreview",class:(0,i.C_)(["camera-preview",[o.capturedImage&&"hidden"]])},[o.showDirection?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,i.C_)(["camera-direction",[1===o.directionState?"full-div-height":"half-div-height"]])},[1===o.directionState?((0,a.wg)(),(0,a.iD)("div",l,d)):(0,a.kq)("",!0),2===o.directionState&&"License"===o.form.docType?((0,a.wg)(),(0,a.iD)("div",m,g)):(0,a.kq)("",!0),2===o.directionState&&"Passport"===o.form.docType?((0,a.wg)(),(0,a.iD)("div",f,w)):(0,a.kq)("",!0),3===o.directionState?((0,a.wg)(),(0,a.iD)("div",y,b)):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)],2),o.capturedImage?((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("img",{src:"data:image/png;base64,"+o.capturedImage,alt:"preview-img",class:(0,i.C_)(["preview-img",["front"===o.cameraPosition&&"front-preview"]])},null,10,C)])):(0,a.kq)("",!0),(0,a._)("div",{class:(0,i.C_)(["camera-footer",[o.capturedImage&&"hidden"]])},[(0,a._)("div",I,[(0,a._)("label",P,[(0,a.Wm)(u,{name:"app:file-upload",class:"icon-image"})]),(0,a._)("input",{type:"file",id:"_pwa-elements-file-pick",accept:"image/*",class:"pick-image-button",ref:"choosedFileInput",onChange:t[1]||(t[1]=function(){return p.chooseAsFile&&p.chooseAsFile.apply(p,arguments)})},null,544)]),(0,a._)("div",{class:"shutter",onClick:t[2]||(t[2]=function(){return p.takePicture&&p.takePicture.apply(p,arguments)})},D),(0,a._)("div",{class:"rotate",onClick:t[3]||(t[3]=function(){return p.changeCameraPosition&&p.changeCameraPosition.apply(p,arguments)})},[(0,a.Wm)(u,{name:"app:revert-camera",class:"icon-image"})])],2),o.capturedImage?((0,a.wg)(),(0,a.iD)("div",q,[(0,a._)("div",F,[(0,a.Wm)(u,{name:"app:reject-image",class:"icon-image",onClick:t[4]||(t[4]=function(e){return p.previewAction("reject")})})]),(0,a._)("div",S,[(0,a.Wm)(u,{name:"app:accept-image",class:"icon-image",onClick:t[5]||(t[5]=function(e){return p.previewAction("accept")})})])])):(0,a.kq)("",!0)],2),(0,a.Wm)(U,{class:(0,i.C_)(["flex",[o.showCamera&&"hidden"]])},{default:(0,a.w5)((function(){return[(0,a._)("div",L,[(0,a._)("div",T,[(0,a.Wm)(u,{name:"app:back",onClick:t[6]||(t[6]=function(e){return p.goToBack()}),class:(0,i.C_)(["backbutton",[1===o.steps&&"invisible"]])},null,8,["class"])]),(0,a.Wm)(v,{class:"stepperDiv verification-stepper",modelValue:o.steps,"onUpdate:modelValue":t[7]||(t[7]=function(e){return o.steps=e}),ref:"stepper",color:"white",contracted:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{name:10,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(h,{name:11,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(h,{name:12,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(h,{name:13,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(h,{name:14,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(h,{name:15,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(h,{name:16,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(h,{name:1,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:o.steps>=1,title:"",style:{width:"100%"}},null,8,["done"]),(0,a.Wm)(h,{name:2,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:o.steps>=2,title:"",style:{width:"100%"}},null,8,["done"])]})),_:1},8,["modelValue"]),(0,a._)("div",W,[1===o.steps?((0,a.wg)(),(0,a.iD)("div",B,H)):(0,a.kq)("",!0),2===o.steps?((0,a.wg)(),(0,a.iD)("div",Q,z)):(0,a.kq)("",!0)]),(0,a._)("div",M,[2===o.steps?((0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("div",J,[(0,a._)("div",R,[(0,a.Wm)(k,{borderless:"",class:"input-control",options:o.docTypes,"emit-value":"","map-options":"","label-color":"primary",modelValue:o.form.docType,"onUpdate:modelValue":[t[8]||(t[8]=function(e){return o.form.docType=e}),p.resetPictures],label:"Document Type",rules:[function(e){return!!e||"Field is required"}],"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},style:{"padding-left":"5px"}},null,8,["options","modelValue","rules","onUpdate:modelValue"])])])])):(0,a.kq)("",!0)]),(0,a._)("div",$,[1===o.steps?((0,a.wg)(),(0,a.j4)(x,{key:0,label:"Next",onClick:t[9]||(t[9]=function(e){return p.uploadImages("selfie")}),class:"next-btn","icon-right":"app:right-arrow"})):(0,a.kq)("",!0),2===o.steps?((0,a.wg)(),(0,a.j4)(x,{key:1,label:"Next",onClick:t[10]||(t[10]=function(e){return p.uploadImages("front")}),class:"next-btn",disabled:o.requestLoading,"icon-right":"app:right-arrow"},null,8,["disabled"])):(0,a.kq)("",!0)])])]})),_:1},8,["class"])],64)}var G=n(47798),X=n.n(G),ee=n(1001),te=n.n(ee),ne=n(46264),ae=n.n(ne),ie=(n(69665),n(65716),n(59437),n(25328),n(98998),n(48170),n(25231),n(31192),n(83827),n(47725),n(85395),n(8968),n(98234),n(3075),n(90548),n(61343),n(76094),n(26638),n(73049),n(6364),n(20276),n(19077),n(6894),n(25764),n(9141),n(69359),n(78849),n(59699),n(56408),n(32045),n(7025),n(53536),n(42079),n(58218),n(96046),n(33100)),se=n(3710),re=n(6827),oe=n(4637),ce={name:"UserVerification",data:function(){return{steps:1,docTypes:["Passport","License"],form:{personImg:null,docType:"License",docImgFront:null,docImgBack:null},requestLoading:!1,showDirection:!1,directionState:0,showCamera:!1,cameraPosition:"rear",capturedImage:null,currentSide:null}},computed:ae()(ae()({},(0,ie.Se)("config",["baseUrl","rocketChatUrl"])),(0,ie.Se)("userprofile",["userDetails","userprofileDetail"])),methods:ae()(ae()(ae()(ae()({},(0,ie.nv)("userprofile",["updateUser"])),(0,ie.nv)("verification",["submitUserVerificationsDetail"])),(0,ie.nv)("otp",["sendOTP"])),{},{goToBack:function(){1===this.steps?this.$router.push("welcome"):2===this.steps&&(this.steps=1)},openCamera:function(){var e=this;return new Promise((function(t){oe.v.start({parent:"cameraPreview",position:e.cameraPosition,toBack:!0}).then((function(){e.showCamera=!0,e.showDirection=!0,document.querySelector("body").classList.add("bg-transparent"),t(!0)})).catch((function(){e.showDirection=!1,e.directionState=0,e.showCamera=!1,document.querySelector("body").classList.remove("bg-transparent"),t(!1)}))}))},uploadImages:function(e){var t=this;return te()(X()().mark((function n(){var a,i;return X()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=!0,t.currentSide=e,!a){n.next=9;break}return n.next=5,t.openCamera();case 5:i=n.sent,i&&("selfie"===e?t.directionState=1:"front"===e?t.directionState=2:"License"===t.form.docType&&"back"===e&&(t.directionState=3)),n.next=11;break;case 9:return re.Z.create({progress:!0,message:"Can't Process Without Camera Permissions",type:"negative"}),n.abrupt("return",null);case 11:case"end":return n.stop()}}),n)})))()},takePicture:function(){var e=this;return te()(X()().mark((function t(){var n;return X()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,oe.v.capture({quality:100}).catch((function(e){alert(e)}));case 2:n=t.sent,n.value&&(e.capturedImage=n.value);case 4:case"end":return t.stop()}}),t)})))()},next:function(e){this.steps=e},submitDetails:function(){var e=this;this.requestLoading=!0;var t=new FormData;t.append("data",JSON.stringify({documentType:this.form.docType,status:"Pending",users_permissions_user:this.userDetails.id})),t.append("files.personImg",this.form.personImg,"personImg"),"License"===this.form.docType?(t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),t.append("files.docBackImg",this.form.docImgBack,"docBackImg")):t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),this.submitUserVerificationsDetail({verRequest:t,userDetails:{name:this.userprofileDetail.firstfame+" "+this.userprofileDetail.lastname,id:this.userprofileDetail.user}}).then((function(){e.requestLoading=!1,window.location.href="/"}))},resetPictures:function(){this.form.docImgBack=null,this.form.docImgFront=null},closeCameraPreview:function(){oe.v.stop(),this.showDirection=!1,this.directionState=0,this.showCamera=!1,this.capturedImage=null},changeCameraPosition:function(){var e=this;oe.v.stop().then((function(t){"rear"===e.cameraPosition?e.cameraPosition="front":e.cameraPosition="rear",e.openCamera()})).catch((function(e){console.log("error",e)}))},settingImagesToForm:function(e){"selfie"===this.currentSide?(this.form.personImg=e,this.steps=2):"front"===this.currentSide?(this.form.docImgFront=e,"License"===this.form.docType?this.uploadImages("back"):this.submitDetails()):"back"===this.currentSide&&(this.form.docImgBack=e,this.submitDetails())},previewAction:function(e){switch(e){case"reject":this.capturedImage=null;break;case"accept":var t=new Blob([new Uint8Array((0,se.J)(this.capturedImage))],{type:"image/png"}),n=new File([t],"Name",{lastModified:new Date,type:t.type});this.closeCameraPreview(),this.settingImagesToForm(n);break}},chooseAsFile:function(e){var t=e.target.files,n=null===t||void 0===t?void 0:t[0];n&&(this.closeCameraPreview(),this.$refs.choosedFileInput.value=null,this.settingImagesToForm(n))}})},le=n(11639),pe=n(22857),ue=n(69885),de=n(8225),me=n(46017),he=n(32259),ge=n(68879),fe=n(69984),ve=n.n(fe);const we=(0,le.Z)(ce,[["render",Y],["__scopeId","data-v-32f6bea8"]]);var ye=we;ve()(ce,"components",{QIcon:pe.Z,QPage:ue.Z,QStepper:de.Z,QStep:me.Z,QSelect:he.Z,QBtn:ge.Z})}}]);