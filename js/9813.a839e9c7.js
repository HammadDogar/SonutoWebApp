"use strict";(self["webpackChunkKonoku"]=self["webpackChunkKonoku"]||[]).push([[9813],{52032:function(t,e,o){o.r(e),o.d(e,{default:function(){return x}});var n=o(59835),i=o(86970),l={class:"q-gutter-y-md",style:{width:"100%"}},r=["src","id","poster","onClick"],a=["onClick"],s={key:0,class:"text-caption text-grey blog-description"};function u(t,e,o,u,c,d){var p=(0,n.up)("q-tab"),g=(0,n.up)("q-tabs"),f=(0,n.up)("q-separator"),h=(0,n.up)("q-card-section"),m=(0,n.up)("q-card"),y=(0,n.up)("q-tab-panel"),b=(0,n.up)("q-tab-panels"),v=(0,n.up)("BlogVlogOption"),w=(0,n.up)("q-dialog"),k=(0,n.up)("DeletePostWarning"),B=(0,n.up)("q-page"),C=(0,n.Q2)("intersection");return(0,n.wg)(),(0,n.j4)(B,{class:"flex"},{default:(0,n.w5)((function(){return[(0,n._)("div",l,[(0,n.Wm)(m,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{modelValue:c.tab,"onUpdate:modelValue":e[0]||(e[0]=function(t){return c.tab=t}),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.blogCategory,(function(t){return(0,n.wg)(),(0,n.j4)(p,{"no-caps":"",key:t.id,name:t.Name,label:t.Name},null,8,["name","label"])})),128))]})),_:1},8,["modelValue"]),(0,n.Wm)(f),(0,n.Wm)(b,{modelValue:c.tab,"onUpdate:modelValue":e[1]||(e[1]=function(t){return c.tab=t}),animated:""},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.blogCategory,(function(e){return(0,n.wg)(),(0,n.j4)(y,{key:e.id,name:e.Name,style:{padding:"0px !important"}},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.publishedBlogs,(function(t){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{transition:"scale",class:"vlog-div",key:t.id},[d.filterCategory(t,e.Name)?((0,n.wg)(),(0,n.j4)(m,{key:0,class:"my-card",flat:"",style:{width:"100%"}},{default:(0,n.w5)((function(){return[(0,n._)("div",null,[null!==t.CoverPhoto&&!1===d.isImagePost(t.CoverPhoto.mime)?((0,n.wg)(),(0,n.iD)("video",{key:0,src:t.CoverPhoto.url,class:"video-player",id:t.id,controls:"",poster:!!t.PosterImage&&t.PosterImage.url,preload:"none",controlsList:"nodownload",onClick:function(e){return d.goToBlog(t.id)}},null,8,r)):(0,n.kq)("",!0)]),(0,n.Wm)(h,null,{default:(0,n.w5)((function(){return[(0,n._)("div",{class:"text-h5 q-mt-sm q-mb-xs blog-title",onClick:function(e){return d.goToBlog(t.id)}},(0,i.zw)(t.Title),9,a),t.ShortDescription?((0,n.wg)(),(0,n.iD)("div",s,(0,i.zw)(d.truncateFunc(t.ShortDescription,50,"...")),1)):(0,n.kq)("",!0)]})),_:2},1024)]})),_:2},1024)):(0,n.kq)("",!0)])),[[C,d.onIntersection]])})),128))]})),_:2},1032,["name"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]),(0,n.Wm)(w,{modelValue:c.postOptionModel,"onUpdate:modelValue":e[2]||(e[2]=function(t){return c.postOptionModel=t}),position:"bottom"},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{isMyProfilePost:c.isMyPost,onClickedSelectedOption:d.clickedSelectedOptionModal},null,8,["isMyProfilePost","onClickedSelectedOption"])]})),_:1},8,["modelValue"]),(0,n.Wm)(w,{modelValue:c.postWarningModal,"onUpdate:modelValue":e[3]||(e[3]=function(t){return c.postWarningModal=t}),position:"bottom"},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{postType:"Vlog",onDeleteSelectedOption:d.deleteSelectedOption},null,8,["onDeleteSelectedOption"])]})),_:1},8,["modelValue"])]})),_:1})}var c=o(46264),d=o.n(c),p=(o(51393),o(69665),o(65716),o(61732),o(18381),o(60499)),g=o(4376),f=o(6827),h=o(33100),m=o(85541),y=o(80156),b={name:"VlogList",created:function(){this.$emitter.on("headerBackButtonClick",this.backButtonClick),window.addEventListener("scroll",this.playVideoOnScroll)},beforeUnmount:function(){this.$emitter.off("footerAddIconClick",this.showAddVlogPage),this.$emitter.off("headerBackButtonClick",this.backButtonClick),window.removeEventListener("scroll",this.playVideoOnScroll),this.setFooterData(!1,!0)},computed:d()(d()(d()({},(0,h.Se)("blog",["blogCategory","blogs","publishedBlogs","popularBlogs"])),(0,h.Se)("config",["blobBaseUrl"])),(0,h.Se)("userprofile",["userDetails","userprofileDetail"])),data:function(){return{inView:(0,p.iH)(Array.apply(null,Array(3)).map((function(t){return!0}))),selectedBlog:null,isMyPost:!1,postOptionModel:!1,postWarningModal:!1,tab:"Home"}},watch:{publishedBlogs:function(){this.inView=(0,p.iH)(Array.apply(null,Array(this.publishedBlogs.length)).map((function(t){return!1})))}},mounted:function(){this.setHeaderData(!1,!0,"Vlogs","","","",!0,!0),this.setFooterData(!1,!1),this.fetchBlogs(!0),this.fetchBlogCategory(),this.$route.params.category&&(this.tab=this.$route.params.category)},methods:d()(d()(d()(d()({},(0,h.nv)("header",["setHeader"])),(0,h.nv)("blog",["fetchBlogs","storeContent","deleteBlog","fetchBlogCategory"])),(0,h.nv)("footer",["setFooter"])),{},{setHeaderData:function(t,e,o,n,i,l,r,a){this.setHeader({hamburgerIcon:t,backIcon:e,title:o,rightIcon1:n,rightIcon2:i,rightLinkText:l,notificationIcon:r,searchIcon:a})},truncateFunc:function(t,e,o){return null===t?"":(null===t||void 0===t?void 0:t.length)>e?t.substring(0,e)+o:t},backButtonClick:function(){this.$router.push("/")},goToBlog:function(t){this.$router.push({path:"/blog",query:{id:t}})},formatDate:function(t){return g.ZP.formatDate(t,"DD MMM")+" at "+g.ZP.formatDate(t,"hh.mm A")},gotoSearch:function(){this.$router.push("blog-search")},closeFullScreen:function(){if(document.exitFullscreen){document.exitFullscreen();var t=document.getElementById("image-box");t.setAttribute("style","display:none;")}},getImageurl:function(t){var e=t.substring(t.lastIndexOf("/")+1),o="https://sonutostorage.blob.core.windows.net/photos/assets/";return t=o+e,t},isImagePost:function(t){return"image"===t.split("/")[0]},onIntersection:function(t){},playPauseVideo:function(){var t=document.querySelectorAll(".video-player");t.forEach((function(t){t.muted=!0;var e=t.play();void 0!==e&&e.then((function(e){var o=new IntersectionObserver((function(e){e.forEach((function(e){console.log("intersectionRatio",e.intersectionRatio,t.id),e.intersectionRatio<1&&!t.paused?t.pause():1===e.intersectionRatio&&t.paused&&t.play()}))}),{threshold:1});o.observe(t)}))}))},playVideoOnScroll:function(){var t=!1,e=document.querySelectorAll(".video-player");e.forEach((function(e){var o=400,n=e.getBoundingClientRect().top;n>0&&n<o&&!t?(e.muted=!0,e.play(),t=!0):e.pause()}))},showAddVlogPage:function(){var t=this;this.storeContent({form:null}).then((function(){t.$router.push({path:"/create-post",query:{isForVlog:!0}})}))},openBlogVlogOptionModel:function(t){this.selectedBlog=t,parseInt(t.userprofile.id)===parseInt(this.userDetails.userprofile.id)?this.isMyPost=!0:this.isMyPost=!1,this.postOptionModel=!0},clickedSelectedOptionModal:function(t){switch(this.postOptionModel=!1,t){case"delete":this.postWarningModal=!0;break}},deleteSelectedOption:function(t){"cancel"===t?(this.isMyPost=!1,this.postWarningModal=!1):(this.deleteBlog(parseInt(this.selectedBlog.id)).then((function(){f.Z.create({progress:!0,message:"Vlog Deleted Successfully",type:"positive"})})),this.isMyPost=!1,this.postWarningModal=!1)},filterCategory:function(t,e){var o=t.blog_categories.find((function(t){return t.Name===e}));return void 0!==o},setFooterData:function(t,e){this.setFooter({commentSection:t,addButton:e})}}),components:{BlogVlogOption:m.Z,DeletePostWarning:y.Z}},v=o(11639),w=o(69885),k=o(44458),B=o(47817),C=o(57661),V=o(50926),D=o(89800),P=o(84106),M=o(91487),S=o(63190),I=o(68879),O=o(32074),q=o(18149),Z=o(79205),W=o(69984),_=o.n(W);const Q=(0,v.Z)(b,[["render",u],["__scopeId","data-v-5ab78d98"]]);var x=Q;_()(b,"components",{QPage:w.Z,QCard:k.Z,QTabs:B.Z,QTab:C.Z,QSeparator:V.Z,QTabPanels:D.Z,QTabPanel:P.Z,QImg:M.Z,QCardSection:S.Z,QBtn:I.Z,QDialog:O.Z,QField:q.Z}),_()(b,"directives",{Intersection:Z.Z})}}]);