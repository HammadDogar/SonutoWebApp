"use strict";(self["webpackChunkKonoku"]=self["webpackChunkKonoku"]||[]).push([[4091],{54091:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var s=n(59835),o=n(86970),i=function(e){return(0,s.dD)("data-v-6c7ce26a"),e=e(),(0,s.Cn)(),e},l={class:"row"},m={class:"row items-center no-wrap"},r={class:"col"},d=["src"],c={class:"col-auto"},f=i((function(){return(0,s._)("span",{class:"action post-interaction-text"},"Like",-1)})),u=i((function(){return(0,s._)("span",{class:"action post-interaction-text"},"Replies",-1)})),a=["src"],w={class:"row justify-between items-center"},p={class:"col-10"},C={class:"col-2 flex justify-between items-center"},h={class:"row justify-between items-center"},k=["onClick"],N={class:"subtitle flex justify-between items-center"},_={key:0},y={class:"comment"},v={class:"action"},g=i((function(){return(0,s._)("span",{class:"action"},"Replies",-1)})),D=i((function(){return(0,s._)("div",{class:"text-h6"},"Delete comment",-1)})),W=i((function(){return(0,s._)("span",{class:"q-ml-sm"},"Deleting the comment will remove it from the conversation",-1)}));function R(e,t,n,i,R,b){var q=(0,s.up)("q-avatar"),I=(0,s.up)("q-item-section"),F=(0,s.up)("q-item-label"),z=(0,s.up)("q-card-section"),Z=(0,s.up)("q-btn"),L=(0,s.up)("q-img"),j=(0,s.up)("q-separator"),Q=(0,s.up)("q-card-actions"),x=(0,s.up)("q-input"),B=(0,s.up)("q-icon"),$=(0,s.up)("q-item"),S=(0,s.up)("q-list"),U=(0,s.up)("q-menu"),P=(0,s.up)("q-card"),A=(0,s.up)("q-dialog"),V=(0,s.up)("q-page"),H=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(V,{class:"page bg-white"},{default:(0,s.w5)((function(){return[(0,s._)("div",l,[e.newsfeeds.selectedNewsfeedComment?((0,s.wg)(),(0,s.j4)(P,{key:0,flat:"",bordered:"",class:"reply-comment-card newsfeed-card"},{default:(0,s.w5)((function(){return[(0,s._)("div",m,[(0,s._)("div",r,[(0,s.Wm)(z,{horizontal:"",class:"newsfeed-card-section"},{default:(0,s.w5)((function(){return[(0,s.Wm)(I,{avatar:"",class:"avatar-section"},{default:(0,s.w5)((function(){return[e.newsfeeds.selectedNewsfeedComment.userprofile&&null!==e.newsfeeds.selectedNewsfeedComment.userprofile.avatar?((0,s.wg)(),(0,s.j4)(q,{key:0,size:"34px"},{default:(0,s.w5)((function(){return[(0,s._)("img",{src:"".concat(e.newsfeeds.selectedNewsfeedComment.userprofile.avatar.url)},null,8,d)]})),_:1})):e.newsfeeds.selectedNewsfeedComment.userprofile&&e.newsfeeds.selectedNewsfeedComment.userprofile.firstname?((0,s.wg)(),(0,s.j4)(q,{key:1,size:"34px",color:"primary","text-color":"white"},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,o.zw)(e.newsfeeds.selectedNewsfeedComment.userprofile.firstname.charAt(0)),1)]})),_:1})):(0,s.kq)("",!0)]})),_:1}),(0,s.Wm)(I,null,{default:(0,s.w5)((function(){return[null!=e.newsfeeds.selectedNewsfeedComment.userprofile&&null!=e.newsfeeds.selectedNewsfeedComment.userprofile.firstname?((0,s.wg)(),(0,s.j4)(F,{key:0,class:"title",onClick:t[0]||(t[0]=function(t){return b.goToProfile(parseInt(e.newsfeeds.selectedNewsfeedComment.userprofile.id))})},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,o.zw)(e.newsfeeds.selectedNewsfeedComment.userprofile.firstname)+" "+(0,o.zw)(e.newsfeeds.selectedNewsfeedComment.userprofile.lastname),1)]})),_:1})):(0,s.kq)("",!0),(0,s.Wm)(F,{caption:"",class:"subtitle"},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,o.zw)(b.formatDate(e.newsfeeds.selectedNewsfeedComment.created_at)),1)]})),_:1})]})),_:1})]})),_:1})]),(0,s._)("div",c,[(0,s.Wm)(Z,{flat:"",icon:"app:three-dots"})])]),(0,s.Wm)(z,{horizontal:"",class:"newsfeed-card-section"},{default:(0,s.w5)((function(){return[(0,s.Wm)(I,{class:"description"},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,o.zw)(e.newsfeeds.selectedNewsfeedComment.comment),1)]})),_:1})]})),_:1}),e.newsfeeds.selectedNewsfeedComment.feedimage?((0,s.wg)(),(0,s.j4)(L,{key:0,src:e.newsfeeds.selectedNewsfeedComment.feedimage},null,8,["src"])):(0,s.kq)("",!0),(0,s.Wm)(j),(0,s.Wm)(Q,{class:"icons",align:"between"},{default:(0,s.w5)((function(){return[(0,s.Wm)(Z,{flat:"",icon:b.likeReplyColour(),"no-caps":"",onClick:t[1]||(t[1]=function(e){return b.setLikeForNewfeedsComment()}),class:"like-interaction-icon post-actions"},{default:(0,s.w5)((function(){return[f]})),_:1},8,["icon"]),(0,s.Wm)(Z,{flat:"",icon:"app:comment-vector","no-caps":"",onClick:t[2]||(t[2]=function(e){return b.setSelectedReplyData()}),class:"share-interaction-icon post-actions"},{default:(0,s.w5)((function(){return[u]})),_:1})]})),_:1}),(0,s.Wm)(Q,{align:"between",class:"post-like-comment-info"},{default:(0,s.w5)((function(){return[e.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes?((0,s.wg)(),(0,s.j4)(F,{key:0,class:"q-mt-none"},{default:(0,s.w5)((function(){return[(0,s.Uk)(" Liked by "+(0,o.zw)(e.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes.length),1)]})),_:1})):(0,s.kq)("",!0),e.newsfeeds.selectedNewsfeedComment.newsfeedreplycomments?((0,s.wg)(),(0,s.j4)(F,{key:1,class:"comment-count"},{default:(0,s.w5)((function(){return[(0,s.Uk)(" Comments ("+(0,o.zw)(e.newsfeeds.selectedNewsfeedComment.newsfeedreplycomments.length)+") ",1)]})),_:1})):(0,s.kq)("",!0)]})),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.newsfeeds.selectedNewsfeedComment.newsfeedreplycomments,(function(n){return(0,s.wg)(),(0,s.j4)(P,(0,s.dG)({class:"comment-card",flat:"",bordered:"",key:n.id},n),{default:(0,s.w5)((function(){return[(0,s.Wm)(z,{horizontal:""},{default:(0,s.w5)((function(){return[(0,s.Wm)(z,{class:"flex justify-between items-center"},{default:(0,s.w5)((function(){return[(0,s.Wm)(I,{avatar:"",class:"avatar-section"},{default:(0,s.w5)((function(){return[null!==n.userprofile.avatar?((0,s.wg)(),(0,s.j4)(q,{key:0,size:"34px"},{default:(0,s.w5)((function(){return[(0,s._)("img",{src:"".concat(n.userprofile.avatar.url)},null,8,a)]})),_:2},1024)):(0,s.kq)("",!0)]})),_:2},1024)]})),_:2},1024),(0,s.Wm)(z,{class:"comment-section"},{default:(0,s.w5)((function(){return[R.editingCommentDetail&&R.editingCommentDetail.id===n.id?((0,s.wg)(),(0,s.j4)(I,{key:0},{default:(0,s.w5)((function(){return[(0,s._)("div",w,[(0,s._)("div",p,[(0,s.Wm)(x,{rounded:"",outlined:"",placeholder:"Write a Message",dense:!1,class:"edit-input",modelValue:R.editingComment,"onUpdate:modelValue":t[3]||(t[3]=function(e){return R.editingComment=e})},null,8,["modelValue"])]),(0,s._)("div",C,[(0,s.Wm)(B,{size:"33px",name:"close",class:"cursor-pointer close-comment",onClick:t[4]||(t[4]=function(e){return R.editingCommentDetail=null})}),(0,s.Wm)(Z,{onClick:b.updateCommentAction,round:"",dense:"",flat:"",icon:"send",style:{color:"#6B7BC7"}},null,8,["onClick"])])])]})),_:1})):((0,s.wg)(),(0,s.j4)(I,{key:1},{default:(0,s.w5)((function(){return[(0,s._)("div",h,[(0,s._)("div",{class:"title",onClick:function(e){return b.goToProfile(parseInt(n.userprofile.id))}},(0,o.zw)(n.userprofile.firstname)+" "+(0,o.zw)(n.userprofile.lastname),9,k),(0,s._)("div",N,[(0,s.Uk)("("+(0,o.zw)(b.formatDate(n.created_at))+") ",1),parseInt(n.userprofile.id)===e.userprofileDetail.id?((0,s.wg)(),(0,s.iD)("div",_,[(0,s.Wm)(Z,{color:"grey-7",round:"",flat:"",icon:"app:three-dot-action",size:"8px"},{default:(0,s.w5)((function(){return[(0,s.Wm)(U,{cover:"","auto-close":""},{default:(0,s.w5)((function(){return[(0,s.Wm)(S,null,{default:(0,s.w5)((function(){return[(0,s.Wm)($,{clickable:"",onClick:function(e){return b.editComment(n)}},{default:(0,s.w5)((function(){return[(0,s.Wm)(I,{avatar:""},{default:(0,s.w5)((function(){return[(0,s.Wm)(B,{name:"create"})]})),_:1}),(0,s.Wm)(I,null,{default:(0,s.w5)((function(){return[(0,s.Uk)("Edit Comment")]})),_:1})]})),_:2},1032,["onClick"]),(0,s.Wm)($,{clickable:"",onClick:function(e){return b.deleteComment(n)}},{default:(0,s.w5)((function(){return[(0,s.Wm)(I,{avatar:""},{default:(0,s.w5)((function(){return[(0,s.Wm)(B,{name:"delete"})]})),_:1}),(0,s.Wm)(I,null,{default:(0,s.w5)((function(){return[(0,s.Uk)("Delete Comment")]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)])):(0,s.kq)("",!0)])]),(0,s._)("p",y,(0,o.zw)(n.comment),1)]})),_:2},1024))]})),_:2},1024)]})),_:2},1024),(0,s.Wm)(z,{horizontal:"",class:"card-buttons"},{default:(0,s.w5)((function(){return[(0,s.Wm)(Z,{flat:"",icon:b.likeColour(parseInt(n.id)),size:"10px","no-caps":"",onClick:function(e){return b.setLikeForNewfeedsReplyComment(parseInt(n.id))}},{default:(0,s.w5)((function(){return[(0,s._)("span",v,(0,o.zw)(n.newsfeedreplycommentslikes.length)+" Like ",1)]})),_:2},1032,["icon","onClick"]),(0,s.Wm)(j,{vertical:"",class:"separator"}),(0,s.Wm)(Z,{flat:"",icon:"app:comment",size:"10px","no-caps":"",onClick:function(e){return b.setReplyComment(parseInt(n.id))}},{default:(0,s.w5)((function(){return[g]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1040)})),128))]})),_:1})):(0,s.kq)("",!0)]),(0,s.Wm)(A,{modelValue:R.deleteConfirm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return R.deleteConfirm=e}),persistent:""},{default:(0,s.w5)((function(){return[(0,s.Wm)(P,null,{default:(0,s.w5)((function(){return[(0,s.Wm)(z,{class:"row items-center"},{default:(0,s.w5)((function(){return[D]})),_:1}),(0,s.Wm)(z,{class:"row items-center"},{default:(0,s.w5)((function(){return[W]})),_:1}),(0,s.Wm)(Q,{align:"right"},{default:(0,s.w5)((function(){return[(0,s.wy)((0,s.Wm)(Z,{flat:"",label:"Cancel"},null,512),[[H]]),(0,s.wy)((0,s.Wm)(Z,{flat:"",label:"Delete",onClick:b.deleteCommentAction},null,8,["onClick"]),[[H]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var b=n(46264),q=n.n(b),I=(n(69665),n(18381),n(65716),n(58665),n(4376)),F=n(33100),z={name:"ReplyComments",data:function(){return{selectedComment:null,deleteConfirm:!1,editCommentState:!1,editingCommentDetail:null,editingComment:""}},computed:q()(q()(q()(q()({},(0,F.Se)("config",["baseUrl"])),(0,F.Se)("userprofile",["userDetails","userprofileDetail"])),(0,F.Se)("newsfeeds",["newsfeeds"])),(0,F.Se)("footer",["footerData"])),mounted:function(){this.$emitter.on("saveCommentButtonClick",this.postNewsFeedComment),this.$emitter.on("savePostReplyButtonClick",this.postReplyComment),this.$emitter.on("headerBackButtonClick",this.backButtonClick),this.setFooterData(!0),this.setHeaderData(!1,!0,"","","","",!0,!0),this.fetchNewsfeedComment(this.$route.params.id)},beforeRouteLeave:function(e,t,n){this.setFooterData(!1),this.$emitter.off("savePostReplyButtonClick",this.postReplyComment),this.$emitter.off("saveCommentButtonClick",this.postNewsFeedComment),this.$emitter.off("headerBackButtonClick",this.backButtonClick),n()},methods:q()(q()(q()(q()({},(0,F.nv)("header",["setHeader"])),(0,F.nv)("newsfeeds",["postNewsFeedComments","deleteNewsfeedReplyCommentsLikes","deleteLikeNewfeedsComments","postReplyComments","postNewsFeedCommentsLikes","postNewsFeedReplyCommentsLikes","fetchNewsfeedComment","postNewsFeedReplyComments","setSelectedReplyComment","deleteNewsFeedReplyComment","updatePostCommentReply"])),(0,F.nv)("footer",["setFooter","addComment"])),{},{setHeaderData:function(e,t,n,s,o,i,l,m){this.setHeader({hamburgerIcon:e,backIcon:t,title:n,rightIcon1:s,rightIcon2:o,rightLinkText:i,notificationIcon:l,searchIcon:m})},setFooterData:function(e){this.setFooter({commentSection:e})},formatDate:function(e){return I.ZP.formatDate(e,"DD MMM")+" at "+I.ZP.formatDate(e,"hh.mm A")},backButtonClick:function(){this.$router.push("/comments/"+this.newsfeeds.selectedNewsfeedComment.newsfeed.id)},postNewsFeedComment:function(){var e=this;this.postNewsFeedReplyComments({comment:this.footerData.comment,user:this.userDetails,newsfeedcomment:this.newsfeeds.selectedNewsfeedComment}).then((function(){e.addComment(""),e.fetchNewsfeedComment(e.newsfeeds.selectedNewsfeedComment.id)}))},postReplyComment:function(){var e=this;this.postNewsFeedReplyComments({comment:this.footerData.comment,user:this.userDetails,newsfeedcomment:this.newsfeeds.selectedNewsfeedComment}).then((function(){e.addComment(""),e.fetchNewsfeedComment(e.newsfeeds.selectedNewsfeedComment.id)}))},setSelectedReplyData:function(){this.$emitter.emit("setReplyButtonClick")},setReplyComment:function(e){var t=this.newsfeeds.selectedNewsfeedComment.newsfeedreplycomments.find((function(t){return parseInt(t.id)===e}));this.setSelectedReplyComment(t),this.$emitter.emit("setReplyCommentClick")},likeColour:function(e){var t=this.newsfeeds.selectedNewsfeedComment.newsfeedreplycomments.find((function(t){return parseInt(t.id)===e})),n=this.userDetails.userprofile.id,s=t.newsfeedreplycommentslikes.find((function(e){return parseInt(e.userprofile.id)===n}));return void 0!==s?"app:like-blue":"app:like"},setLikeForNewfeedsReplyComment:function(e){var t=this,n=this.newsfeeds.selectedNewsfeedComment.newsfeedreplycomments.find((function(t){return parseInt(t.id)===e})),s=this.userDetails.userprofile.id,o=n.newsfeedreplycommentslikes.find((function(e){return parseInt(e.userprofile.id)===s}));void 0!==o?this.deleteNewsfeedReplyCommentsLikes({id:o.id}).then((function(){t.fetchNewsfeedComment(t.newsfeeds.selectedNewsfeedComment.id)})):this.postNewsFeedReplyCommentsLikes({user:this.userDetails,newsfeedreplycomment:n}).then((function(){t.fetchNewsfeedComment(t.newsfeeds.selectedNewsfeedComment.id)}))},setLikeForNewfeedsComment:function(){var e=this;if(this.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes&&this.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes.length>0){var t=this.userDetails.userprofile.id,n=this.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes.find((function(e){return parseInt(e.userprofile.id)===t}));void 0!==n?this.deleteLikeNewfeedsComments({id:n.id}).then((function(){e.fetchNewsfeedComment(e.newsfeeds.selectedNewsfeedComment.id)})):this.postNewsFeedCommentsLikes({user:this.userDetails,newsfeedcomment:this.newsfeeds.selectedNewsfeedComment}).then((function(){e.fetchNewsfeedComment(e.newsfeeds.selectedNewsfeedComment.id)}))}else this.postNewsFeedCommentsLikes({user:this.userDetails,newsfeedcomment:this.newsfeeds.selectedNewsfeedComment}).then((function(){e.fetchNewsfeedComment(e.newsfeeds.selectedNewsfeedComment.id)}))},likeReplyColour:function(){if(this.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes&&this.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes.length>0){var e=this.userDetails.userprofile.id,t=this.newsfeeds.selectedNewsfeedComment.newsfeedcommentslikes.find((function(t){return parseInt(t.userprofile.id)===e}));return void 0!==t?"app:like-filled-vector":"app:like-vector"}return"app:like-vector"},goToProfile:function(e){e===this.userDetails.userprofile.id?this.$router.push("/profile"):this.$router.push("/user-profile/"+e)},deleteComment:function(e){this.deleteConfirm=!0,this.selectedComment=Object.assign({},e)},deleteCommentAction:function(){var e=this;this.deleteNewsFeedReplyComment(this.selectedComment.id).then((function(t){e.selectedComment=null,e.fetchNewsfeedComment(e.$route.params.id)}))},editComment:function(e){this.editingCommentDetail=e,this.editingComment=e.comment},updateCommentAction:function(){var e=this,t={id:this.editingCommentDetail.id,comment:this.editingComment};this.updatePostCommentReply(t).then((function(){e.fetchNewsfeedComment(e.$route.params.id),e.editingCommentDetail=null}))}})},Z=n(11639),L=n(69885),j=n(44458),Q=n(63190),x=n(76749),B=n(61357),$=n(33115),S=n(68879),U=n(91487),P=n(50926),A=n(11821),V=n(13119),H=n(22857),M=n(56362),T=n(13246),K=n(490),E=n(32074),G=n(18149),O=n(62146),Y=n(69984),J=n.n(Y);const X=(0,Z.Z)(z,[["render",R],["__scopeId","data-v-6c7ce26a"]]);var ee=X;J()(z,"components",{QPage:L.Z,QCard:j.Z,QCardSection:Q.Z,QItemSection:x.Z,QAvatar:B.Z,QItemLabel:$.Z,QBtn:S.Z,QImg:U.Z,QSeparator:P.Z,QCardActions:A.Z,QInput:V.Z,QIcon:H.Z,QMenu:M.Z,QList:T.Z,QItem:K.Z,QDialog:E.Z,QField:G.Z}),J()(z,"directives",{ClosePopup:O.Z})}}]);