"use strict";(self["webpackChunkSonuto"]=self["webpackChunkSonuto"]||[]).push([[1380],{31380:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ce}});var a=n(59835),i=n(86970),r=function(e){return(0,a.dD)("data-v-1497dd40"),e=e(),(0,a.Cn)(),e},s={class:"camera-header"},c=r((function(){return(0,a._)("img",{src:"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Cg id='Icon_5_'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M402.2,134L378,109.8c-1.6-1.6-4.1-1.6-5.7,0L258.8,223.4c-1.6,1.6-4.1,1.6-5.7,0L139.6,109.8 c-1.6-1.6-4.1-1.6-5.7,0L109.8,134c-1.6,1.6-1.6,4.1,0,5.7l113.5,113.5c1.6,1.6,1.6,4.1,0,5.7L109.8,372.4c-1.6,1.6-1.6,4.1,0,5.7 l24.1,24.1c1.6,1.6,4.1,1.6,5.7,0l113.5-113.5c1.6-1.6,4.1-1.6,5.7,0l113.5,113.5c1.6,1.6,4.1,1.6,5.7,0l24.1-24.1 c1.6-1.6,1.6-4.1,0-5.7L288.6,258.8c-1.6-1.6-1.6-4.1,0-5.7l113.5-113.5C403.7,138.1,403.7,135.5,402.2,134z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},null,-1)})),o=[c],l={key:0,class:"content"},p=r((function(){return(0,a._)("h6",{class:"q-mt-none Heading text-center"},"Place your face inside the outline",-1)})),u=r((function(){return(0,a._)("div",{class:"shape"},null,-1)})),d=[p,u],m={key:1,class:"content"},g=r((function(){return(0,a._)("h6",{class:"Heading text-center"},"Place your front side of document",-1)})),h=[g],f={key:2,class:"content"},v=r((function(){return(0,a._)("h6",{class:"Heading text-center"},"Place your document",-1)})),w=[v],y={key:3,class:"content"},k=r((function(){return(0,a._)("h6",{class:"Heading text-center"},"Place your back side of document",-1)})),C=[k],x={key:0,class:"preview-img-wrapper"},_=["src"],b={class:"pick-image"},F=r((function(){return(0,a._)("label",{for:"_pwa-elements-file-pick"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512"},[(0,a._)("path",{d:"M450.29,112H142c-34,0-62,27.51-62,61.33V418.67C80,452.49,108,480,142,480H450c34,0,62-26.18,62-60V173.33C512,139.51,484.32,112,450.29,112Zm-77.15,61.34a46,46,0,1,1-46.28,46A46.19,46.19,0,0,1,373.14,173.33Zm-231.55,276c-17,0-29.86-13.75-29.86-30.66V353.85l90.46-80.79a46.54,46.54,0,0,1,63.44,1.83L328.27,337l-113,112.33ZM480,418.67a30.67,30.67,0,0,1-30.71,30.66H259L376.08,333a46.24,46.24,0,0,1,59.44-.16L480,370.59Z"}),(0,a._)("path",{d:"M384,32H64A64,64,0,0,0,0,96V352a64.11,64.11,0,0,0,48,62V152a72,72,0,0,1,72-72H446A64.11,64.11,0,0,0,384,32Z"})])],-1)})),I=r((function(){return(0,a._)("div",{class:"shutter-button"},null,-1)})),P=[I],D=r((function(){return(0,a._)("img",{src:"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M352,0H160C72,0,0,72,0,160v192c0,88,72,160,160,160h192c88,0,160-72,160-160V160C512,72,440,0,352,0z M356.7,365.8l-3.7,3.3c-27,23.2-61.4,35.9-96.8,35.9c-72.4,0-135.8-54.7-147-125.6c-0.3-1.9-2-3.3-3.9-3.3H64 c-3.3,0-5.2-3.8-3.2-6.4l61.1-81.4c1.6-2.1,4.7-2.1,6.4-0.1l63.3,81.4c2,2.6,0.2,6.5-3.2,6.5h-40.6c-2.5,0-4.5,2.4-3.9,4.8 c11.5,51.5,59.2,90.6,112.4,90.6c26.4,0,51.8-9.7,73.7-27.9l3.1-2.5c1.6-1.3,3.9-1.1,5.3,0.3l18.5,18.6 C358.5,361.6,358.4,364.3,356.7,365.8z M451.4,245.6l-61,83.5c-1.6,2.2-4.8,2.2-6.4,0.1l-63.3-83.3c-2-2.6-0.1-6.4,3.2-6.4h40.8 c2.5,0,4.4-2.3,3.9-4.8c-5.1-24.2-17.8-46.5-36.5-63.7c-21.2-19.4-48.2-30.1-76-30.1c-26.5,0-52.6,9.7-73.7,27.3l-3.1,2.5 c-1.6,1.3-3.9,1.2-5.4-0.3l-18.5-18.5c-1.6-1.6-1.5-4.3,0.2-5.9l3.5-3.1c27-23.2,61.4-35.9,96.8-35.9c38,0,73.9,13.7,101.2,38.7 c23.2,21.1,40.3,55.2,45.7,90.1c0.3,1.9,1.9,3.4,3.9,3.4h41.3C451.4,239.2,453.3,243,451.4,245.6z'/%3E%3C/g%3E%3C/svg%3E"},null,-1)})),L=[D],E={key:1,class:"camera-footer preview"},q={class:"pick-image"},S={class:"rotate"},T={class:"background"},B={class:"d-flex q-mb-none"},V={class:"steps-description-section"},W={key:0},H=r((function(){return(0,a._)("span",{class:"Heading"},"Prepare for your selfie",-1)})),Z=r((function(){return(0,a._)("p",{class:"sub-title"}," Sonuto has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the platform to verify their identity. ",-1)})),A=r((function(){return(0,a._)("p",{class:"sub-title"}," *Remove anything that obstructs your face like hats, sunglasses or headphones. ",-1)})),M=r((function(){return(0,a._)("p",{class:"sub-title"}," *Make sure your face is fully and evenly lit. ",-1)})),U=r((function(){return(0,a._)("p",{class:"sub-title"}," *Position your face at the same height as your phone's camera. ",-1)})),z=[H,Z,A,M,U],Q={key:1},j=r((function(){return(0,a._)("span",{class:"Heading"},"Prepare to scan your document",-1)})),N=r((function(){return(0,a._)("p",{class:"sub-title"}," Sonuto has adopted a zero-tolerance policy to prevent abuse by making it mandatory for all users of the platform to verify their identity. ",-1)})),O=r((function(){return(0,a._)("p",{class:"sub-title"}," Open the page showing your personal information and continue on the next screen. ",-1)})),J=[j,N,O],R={class:"steps"},$={key:0,class:"step2"},Y={class:"row"},G={class:"col-12"},K={class:"buttons-section"};function X(e,t,n,r,c,p){var u=(0,a.up)("q-icon"),g=(0,a.up)("q-step"),v=(0,a.up)("q-stepper"),k=(0,a.up)("q-select"),I=(0,a.up)("q-btn"),D=(0,a.up)("q-page");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,i.C_)(["camera-wrapper",[c.showCamera&&"show"]])},[(0,a._)("div",s,[(0,a._)("div",{class:"item close",onClick:t[0]||(t[0]=function(){return p.closeCameraPreview&&p.closeCameraPreview.apply(p,arguments)})},o)]),(0,a._)("div",{id:"cameraPreview",class:(0,i.C_)(["camera-preview",[c.capturedImage&&"hidden"]])},[c.showDirection?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,i.C_)(["camera-direction",[1===c.directionState?"full-div-height":"half-div-height"]])},[1===c.directionState?((0,a.wg)(),(0,a.iD)("div",l,d)):(0,a.kq)("",!0),2===c.directionState&&"License"===c.form.docType?((0,a.wg)(),(0,a.iD)("div",m,h)):(0,a.kq)("",!0),2===c.directionState&&"Passport"===c.form.docType?((0,a.wg)(),(0,a.iD)("div",f,w)):(0,a.kq)("",!0),3===c.directionState?((0,a.wg)(),(0,a.iD)("div",y,C)):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)],2),c.capturedImage?((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("img",{src:"data:image/png;base64,"+c.capturedImage,alt:"preview-img",class:(0,i.C_)(["preview-img",["front"===c.cameraPosition&&"front-preview"]])},null,10,_)])):(0,a.kq)("",!0),(0,a._)("div",{class:(0,i.C_)(["camera-footer",[c.capturedImage&&"hidden"]])},[(0,a._)("div",b,[F,(0,a._)("input",{type:"file",id:"_pwa-elements-file-pick",accept:"image/*",class:"pick-image-button",ref:"choosedFileInput",onChange:t[1]||(t[1]=function(){return p.chooseAsFile&&p.chooseAsFile.apply(p,arguments)})},null,544)]),(0,a._)("div",{class:"shutter",onClick:t[2]||(t[2]=function(){return p.takePicture&&p.takePicture.apply(p,arguments)})},P),(0,a._)("div",{class:"rotate",onClick:t[3]||(t[3]=function(){return p.changeCameraPosition&&p.changeCameraPosition.apply(p,arguments)})},L)],2),c.capturedImage?((0,a.wg)(),(0,a.iD)("div",E,[(0,a._)("div",q,[(0,a._)("img",{onClick:t[4]||(t[4]=function(e){return p.previewAction("reject")}),src:"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Ccircle fill='%23727A87' cx='256' cy='256' r='256'/%3E%3Cg id='Icon_5_'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M394.2,142L370,117.8c-1.6-1.6-4.1-1.6-5.7,0L258.8,223.4c-1.6,1.6-4.1,1.6-5.7,0L147.6,117.8 c-1.6-1.6-4.1-1.6-5.7,0L117.8,142c-1.6,1.6-1.6,4.1,0,5.7l105.5,105.5c1.6,1.6,1.6,4.1,0,5.7L117.8,364.4c-1.6,1.6-1.6,4.1,0,5.7 l24.1,24.1c1.6,1.6,4.1,1.6,5.7,0l105.5-105.5c1.6-1.6,4.1-1.6,5.7,0l105.5,105.5c1.6,1.6,4.1,1.6,5.7,0l24.1-24.1 c1.6-1.6,1.6-4.1,0-5.7L288.6,258.8c-1.6-1.6-1.6-4.1,0-5.7l105.5-105.5C395.7,146.1,395.7,143.5,394.2,142z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"})]),(0,a._)("div",S,[(0,a._)("img",{onClick:t[5]||(t[5]=function(e){return p.previewAction("accept")}),src:"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Ccircle fill='%232CD865' cx='256' cy='256' r='256'/%3E%3Cg id='Icon_1_'%3E%3Cg%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M208,301.4l-55.4-55.5c-1.5-1.5-4-1.6-5.6-0.1l-23.4,22.3c-1.6,1.6-1.7,4.1-0.1,5.7l81.6,81.4 c3.1,3.1,8.2,3.1,11.3,0l171.8-171.7c1.6-1.6,1.6-4.2-0.1-5.7l-23.4-22.3c-1.6-1.5-4.1-1.5-5.6,0.1L213.7,301.4 C212.1,303,209.6,303,208,301.4z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E"})])])):(0,a.kq)("",!0)],2),(0,a.Wm)(D,{class:(0,i.C_)(["flex",[c.showCamera&&"hidden"]])},{default:(0,a.w5)((function(){return[(0,a._)("div",T,[(0,a._)("div",B,[(0,a.Wm)(u,{name:"app:back",onClick:t[6]||(t[6]=function(e){return p.goToBack()}),class:(0,i.C_)(["backbutton",[1===c.steps&&"invisible"]])},null,8,["class"])]),(0,a.Wm)(v,{class:"stepperDiv verification-stepper",modelValue:c.steps,"onUpdate:modelValue":t[7]||(t[7]=function(e){return c.steps=e}),ref:"stepper",color:"white",contracted:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{name:10,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(g,{name:11,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(g,{name:12,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(g,{name:13,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(g,{name:14,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(g,{name:15,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(g,{name:16,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:!0,title:"",style:{width:"100%"}}),(0,a.Wm)(g,{name:1,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:c.steps>=1,title:"",style:{width:"100%"}},null,8,["done"]),(0,a.Wm)(g,{name:2,icon:"app:transparent-rectangle","active-icon":"app:rectangle-dash","done-icon":"app:rectangle-dash",done:c.steps>=2,title:"",style:{width:"100%"}},null,8,["done"])]})),_:1},8,["modelValue"]),(0,a._)("div",V,[1===c.steps?((0,a.wg)(),(0,a.iD)("div",W,z)):(0,a.kq)("",!0),2===c.steps?((0,a.wg)(),(0,a.iD)("div",Q,J)):(0,a.kq)("",!0)]),(0,a._)("div",R,[2===c.steps?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("div",Y,[(0,a._)("div",G,[(0,a.Wm)(k,{borderless:"",class:"input-control",options:c.docTypes,"emit-value":"","map-options":"","label-color":"primary",modelValue:c.form.docType,"onUpdate:modelValue":[t[8]||(t[8]=function(e){return c.form.docType=e}),p.resetPictures],label:"Document Type",rules:[function(e){return!!e||"Field is required"}],"input-style":{maxWidth:"335px",height:"46px",padding:"0px 5px"},style:{"padding-left":"5px"}},null,8,["options","modelValue","rules","onUpdate:modelValue"])])])])):(0,a.kq)("",!0)]),(0,a._)("div",K,[1===c.steps?((0,a.wg)(),(0,a.j4)(I,{key:0,label:"Next",onClick:t[9]||(t[9]=function(e){return p.uploadImages("selfie")}),class:"next-btn","icon-right":"app:right-arrow"})):(0,a.kq)("",!0),2===c.steps?((0,a.wg)(),(0,a.j4)(I,{key:1,label:"Next",onClick:t[10]||(t[10]=function(e){return p.uploadImages("front")}),class:"next-btn",disabled:c.requestLoading,"icon-right":"app:right-arrow"},null,8,["disabled"])):(0,a.kq)("",!0)])])]})),_:1},8,["class"])],64)}var ee=n(47798),te=n.n(ee),ne=n(1001),ae=n.n(ne),ie=n(46264),re=n.n(ie),se=(n(69665),n(65716),n(59437),n(25328),n(98998),n(48170),n(25231),n(31192),n(83827),n(47725),n(85395),n(8968),n(98234),n(3075),n(90548),n(61343),n(76094),n(26638),n(73049),n(6364),n(20276),n(19077),n(6894),n(25764),n(9141),n(69359),n(78849),n(59699),n(56408),n(32045),n(7025),n(53536),n(42079),n(58218),n(96046),n(33100)),ce=n(3710),oe=n(6827),le=n(4637),pe={name:"UserVerification",data:function(){return{steps:1,docTypes:["Passport","License"],form:{personImg:null,docType:"License",docImgFront:null,docImgBack:null},requestLoading:!1,showDirection:!1,directionState:0,showCamera:!1,cameraPosition:"rear",capturedImage:null,currentSide:null}},computed:re()(re()({},(0,se.Se)("config",["baseUrl","rocketChatUrl"])),(0,se.Se)("userprofile",["userDetails","userprofileDetail"])),methods:re()(re()(re()(re()({},(0,se.nv)("userprofile",["updateUser"])),(0,se.nv)("verification",["submitUserVerificationsDetail"])),(0,se.nv)("otp",["sendOTP"])),{},{goToBack:function(){1===this.steps?this.$router.push("welcome"):2===this.steps&&(this.steps=1)},openCamera:function(){var e=this;return new Promise((function(t){le.v.start({parent:"cameraPreview",position:e.cameraPosition,toBack:!0}).then((function(){e.showCamera=!0,e.showDirection=!0,document.querySelector("body").classList.add("bg-transparent"),t(!0)})).catch((function(n){e.showDirection=!1,e.directionState=0,e.showCamera=!1,document.querySelector("body").classList.remove("bg-transparent"),t(!1)}))}))},uploadImages:function(e){var t=this;return ae()(te()().mark((function n(){var a,i;return te()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=!0,t.currentSide=e,!a){n.next=9;break}return n.next=5,t.openCamera();case 5:i=n.sent,i&&("selfie"===e?t.directionState=1:"front"===e?t.directionState=2:"License"===t.form.docType&&"back"===e&&(t.directionState=3)),n.next=11;break;case 9:return oe.Z.create({progress:!0,message:"Can't Process Without Camera Permissions",type:"negative"}),n.abrupt("return",null);case 11:case"end":return n.stop()}}),n)})))()},takePicture:function(){var e=this;return ae()(te()().mark((function t(){var n;return te()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,le.v.capture({quality:100}).catch((function(e){alert(e)}));case 2:n=t.sent,n.value&&(e.capturedImage=n.value);case 4:case"end":return t.stop()}}),t)})))()},next:function(e){this.steps=e},submitDetails:function(){var e=this;this.requestLoading=!0;var t=new FormData;t.append("data",JSON.stringify({documentType:this.form.docType,status:"Pending",users_permissions_user:this.userDetails.id})),t.append("files.personImg",this.form.personImg,"personImg"),"License"===this.form.docType?(t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),t.append("files.docBackImg",this.form.docImgBack,"docBackImg")):t.append("files.docFrontImg",this.form.docImgFront,"docFrontImg"),this.submitUserVerificationsDetail({verRequest:t,userDetails:{name:this.userprofileDetail.firstfame+" "+this.userprofileDetail.lastname,id:this.userprofileDetail.user}}).then((function(){e.requestLoading=!1,window.location.href="/"}))},resetPictures:function(){this.form.docImgBack=null,this.form.docImgFront=null},closeCameraPreview:function(){le.v.stop(),this.showDirection=!1,this.directionState=0,this.showCamera=!1,this.capturedImage=null},changeCameraPosition:function(){var e=this;le.v.stop().then((function(t){"rear"===e.cameraPosition?e.cameraPosition="front":e.cameraPosition="rear",e.openCamera()})).catch((function(e){console.log("error",e)}))},settingImagesToForm:function(e){"selfie"===this.currentSide?(this.form.personImg=e,this.steps=2):"front"===this.currentSide?(this.form.docImgFront=e,"License"===this.form.docType?this.uploadImages("back"):this.submitDetails()):"back"===this.currentSide&&(this.form.docImgBack=e,this.submitDetails())},previewAction:function(e){switch(e){case"reject":this.capturedImage=null;break;case"accept":var t=new Blob([new Uint8Array((0,ce.J)(this.capturedImage))],{type:"image/png"}),n=new File([t],"Name",{lastModified:new Date,type:t.type});this.closeCameraPreview(),this.settingImagesToForm(n);break}},chooseAsFile:function(e){var t=e.target.files,n=null===t||void 0===t?void 0:t[0];n&&(this.closeCameraPreview(),this.$refs.choosedFileInput.value=null,this.settingImagesToForm(n))}})},ue=n(11639),de=n(69885),me=n(22857),ge=n(8225),he=n(46017),fe=n(32259),ve=n(68879),we=n(69984),ye=n.n(we);const ke=(0,ue.Z)(pe,[["render",X],["__scopeId","data-v-1497dd40"]]);var Ce=ke;ye()(pe,"components",{QPage:de.Z,QIcon:me.Z,QStepper:ge.Z,QStep:he.Z,QSelect:fe.Z,QBtn:ve.Z})}}]);